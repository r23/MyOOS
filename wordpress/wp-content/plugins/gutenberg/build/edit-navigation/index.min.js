!function(){var e={4184:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)a.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){"use strict";n.r(a),n.d(a,{__unstableCreateMenuPreloadingMiddleware:function(){return en},initialize:function(){return an}});var e={};n.r(e),n.d(e,{getNavigationPostForMenu:function(){return x}});var t={};n.r(t),n.d(t,{getNavigationPostForMenu:function(){return D},getSelectedMenuId:function(){return T},hasResolvedNavigationPost:function(){return L},isInserterOpened:function(){return A}});var r={};n.r(r),n.d(r,{saveNavigationPost:function(){return z},setIsInserterOpened:function(){return W},setSelectedMenuId:function(){return V}});var o={};n.r(o),n.d(o,{disableComplementaryArea:function(){return Oe},enableComplementaryArea:function(){return Fe},pinItem:function(){return ze},setFeatureDefaults:function(){return He},setFeatureValue:function(){return je},toggleFeature:function(){return Ge},unpinItem:function(){return Ue}});var i={};n.r(i),n.d(i,{getActiveComplementaryArea:function(){return $e},isFeatureActive:function(){return Ye},isItemPinned:function(){return qe}});var s=window.wp.element,l=window.wp.blocks,c=window.wp.blockLibrary,u=window.wp.data,d=window.wp.coreData,m=window.wp.i18n;const p="root",v="menu",g="root",_="navigationPost",h="core/edit-navigation",E="edit-navigation/menu",f="edit-navigation/block-inspector",b="_blank";var y=(0,u.combineReducers)({selectedMenuId:function(e=null,t){switch(t.type){case"SET_SELECTED_MENU_ID":return t.menuId}return e},blockInserterPanel:function(e=!1,t){switch(t.type){case"SET_IS_INSERTER_OPENED":return t.value}return e}});const w=e=>`navigation-post-${e}`;function S(e){return e.attributes.__internalRecordId}function k(e,t){return{...e,attributes:{...e.attributes||{},__internalRecordId:t}}}const I=e=>["core/navigation-link","core/navigation-submenu"].includes(e.name);var M=window.lodash;function N(e){return e?C(function(e,t="id",n="parent"){const a=Object.create(null),r=[];for(const n of e)a[n[t]]={...n,children:[]};for(const o of e)o[n]?(a[o[n]]=a[o[n]]||{},a[o[n]].children=a[o[n]].children||[],a[o[n]].children.push(a[o[t]])):r.push(a[o[t]]);return r}(e)):null}function C(e){const t=(0,M.sortBy)(e,"menu_order"),n=t.map((e=>{var t;if("block"===e.type){const[t]=(0,l.parse)(e.content.raw);return t||(0,l.createBlock)("core/freeform",{content:e.content})}const n=B(e),a=null!==(t=e.children)&&void 0!==t&&t.length?C(e.children):[],r=null!=a&&a.length?"core/navigation-submenu":"core/navigation-link";return(0,l.createBlock)(r,n,a)}));return(0,M.zip)(n,t).map((([e,t])=>k(e,t.id)))}function B({title:e,xfn:t,classes:n,attr_title:a,object:r,object_id:o,description:i,url:s,type:l,target:c}){var u;return r&&"post_tag"===r&&(r="tag"),{label:(null==e?void 0:e.rendered)||"",...(null===(u=r)||void 0===u?void 0:u.length)&&{type:r},kind:(null==l?void 0:l.replace("_","-"))||"custom",url:s||"",...(null==t?void 0:t.length)&&t.join(" ").trim()&&{rel:t.join(" ").trim()},...(null==n?void 0:n.length)&&n.join(" ").trim()&&{className:n.join(" ").trim()},...(null==a?void 0:a.length)&&{title:a},...o&&"custom"!==r&&{id:o},...(null==i?void 0:i.length)&&{description:i},...c===b&&{opensInNewTab:!0}}}const x=e=>async({registry:t,dispatch:n})=>{if(!e)return;const a=P(e);n(R(a));const r=[g,_,a.id];t.dispatch(d.store).startResolution("getEntityRecord",r);const o=function(e){const t=N(e);return(0,l.createBlock)("core/navigation",{orientation:"vertical"},t)}(await t.resolveSelect(d.store).getMenuItems(function(e){return{menus:e,per_page:-1}}(e))),i=P(e,o);n(R(i)),t.dispatch(d.store).finishResolution("getEntityRecord",r)},P=(e,t=null)=>{const n=w(e);return{id:n,slug:n,status:"draft",type:"page",blocks:t?[t]:[],meta:{menuId:e}}},R=e=>({registry:t})=>{t.dispatch(d.store).receiveEntityRecords(g,_,e,{id:e.id},!1)};function T(e){var t;return null!==(t=e.selectedMenuId)&&void 0!==t?t:null}const D=(0,u.createRegistrySelector)((e=>(t,n)=>L(t,n)?e(d.store).getEditedEntityRecord(g,_,w(n)):null)),L=(0,u.createRegistrySelector)((e=>(t,n)=>e(d.store).hasFinishedResolution("getEntityRecord",[g,_,w(n)])));function A(e=!1){return!(null==e||!e.blockInserterPanel)}var F=window.wp.notices;const O="core/edit-navigation";function V(e){return{type:"SET_SELECTED_MENU_ID",menuId:e}}const z=e=>async({registry:t,dispatch:n})=>{const a=await t.dispatch(d.store).__unstableAcquireStoreLock(O,["savingMenu"],{exclusive:!0});try{const r=e.meta.menuId;await t.dispatch(d.store).saveEditedEntityRecord("root","menu",r);const o=t.select(d.store).getLastEntitySaveError("root","menu",r);if(o)throw new Error(o.message);const i=await n(U(e.blocks[0],r));t.dispatch(d.store).receiveEntityRecords(g,_,e,void 0);const s={...e,blocks:[i]};t.dispatch(d.store).receiveEntityRecords(g,_,s,void 0),t.dispatch(F.store).createSuccessNotice((0,m.__)("Navigation saved."),{type:"snackbar"})}catch(e){const n=e?(0,m.sprintf)(
/* translators: %s: The text of an error message (potentially untranslated). */
(0,m.__)("Unable to save: '%s'"),e.message):(0,m.__)("Unable to save: An error ocurred.");t.dispatch(F.store).createErrorNotice(n,{type:"snackbar"})}finally{t.dispatch(d.store).__unstableReleaseStoreLock(a)}},U=(e,t)=>async({dispatch:n,registry:a})=>{const r=await a.resolveSelect(d.store).getMenuItems({menus:t,per_page:-1}),o=await n(G(e)),i=await n(j(o,t)),s=(0,M.difference)(r.map((({id:e})=>e)),q(i).map(S));return await n(H(s)),i},G=e=>async({registry:t})=>{const n=q(e).filter((e=>I(e)&&!S(e))),a=n.map((()=>({saveEntityRecord:e})=>e("root","menuItem",{title:(0,m.__)("Menu item"),url:"#placeholder",menu_order:1}))),r=await t.dispatch(d.store).__experimentalBatch(a),o=new Map((0,M.zip)(n,r));return Y(e,(e=>o.has(e)?k(e,o.get(e).id):e))},j=(e,t)=>async({registry:n})=>{const a=$(e),r=a.filter((({block:e})=>!I(e))).map((({block:e})=>e.name));r.length&&window.console.warn((0,m.sprintf)(// translators: %s: Name of block (i.e. core/legacy-widget)
(0,m.__)('The following blocks haven\'t been saved because they are not supported: "%s".'),r.join('", "')));const o=a.filter((({block:e})=>I(e))).map((({block:e,parentBlock:a,childIndex:r})=>function(e,t,n,a,r){let o;return(t=(0,M.omit)(t,"menus","meta","_links")).content=(0,M.get)(t.content,"raw",t.content),o=I(e)?(({label:e="",url:t="",description:n,rel:a,className:r,title:o,type:i,id:s,kind:l,opensInNewTab:c})=>{var u;return i&&"tag"===i&&(i="post_tag"),{title:e,url:t,...(null==n?void 0:n.length)&&{description:n},...(null==a?void 0:a.length)&&{xfn:null==a?void 0:a.trim().split(" ")},...(null==r?void 0:r.length)&&{classes:null==r?void 0:r.trim().split(" ")},...(null==o?void 0:o.length)&&{attr_title:o},...(null===(u=i)||void 0===u?void 0:u.length)&&{object:i},...(null==l?void 0:l.length)&&{type:null==l?void 0:l.replace("-","_")},...s&&"custom"!==i&&{object_id:s},target:c?b:""}})(e.attributes):{type:"block",content:(0,l.serialize)(e)},{...t,...o,content:o.content||"",id:S(e),menu_order:a+1,menus:r,parent:n||0,status:"publish"}}(e,n.select(d.store).getMenuItem(S(e)),S(a),r,t))).filter((e=>(n.dispatch(d.store).editEntityRecord("root","menuItem",e.id,e,{undoIgnore:!0}),n.select(d.store).hasEditsForEntityRecord("root","menuItem",e.id)))),i=o.map((e=>({saveEditedEntityRecord:t})=>t("root","menuItem",e.id)));return await n.dispatch(d.store).__experimentalBatch(i),o.forEach((e=>{const t=n.select(d.store).getLastEntitySaveError("root","menuItem",e.id);if(t)throw new Error(t.message)})),Y(e,(e=>{if(!I(e))return e;const t=n.select(d.store).getMenuItem(S(e));return k({...e,attributes:B(t)},t.id)}))},H=e=>async({registry:t})=>{const n=e.map((e=>async({deleteEntityRecord:t})=>{const n=await t("root","menuItem",e,{force:!0});if(!n)throw new Error(e);return n}));return await t.dispatch(d.store).__experimentalBatch(n)};function $(e){return(e.innerBlocks||[]).flatMap(((t,n)=>[{block:t,parentBlock:e,childIndex:n}].concat($(t))))}function q(e){return $(e).map((({block:e})=>e))}function Y(e,t,n=null,a=0){return{...t(e,n,a),innerBlocks:(e.innerBlocks||[]).map(((n,a)=>Y(n,t,e,a)))}}function W(e){return{type:"SET_IS_INSERTER_OPENED",value:e}}const J={reducer:y,selectors:t,resolvers:e,actions:r,persist:["selectedMenuId"],__experimentalUseThunks:!0},K=(0,u.createReduxStore)(O,J);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}(0,u.registerStore)(O,J);var X=window.wp.hooks,Z=window.wp.compose,ee=window.wp.blockEditor;function te(){return(0,s.createElement)(ee.InnerBlocks.ButtonBlockAppender,{isToggle:!0})}function ne({blockEdit:e,...t}){const n=t.clientId,{noBlockSelected:a,isSelected:r,isImmediateParentOfSelectedBlock:o,selectedBlockHasDescendants:i}=(0,u.useSelect)((e=>{var t;const{getClientIdsOfDescendants:a,hasSelectedInnerBlock:r,getSelectedBlockClientId:o}=e(ee.store),i=r(n,!1),s=o(),l=!(null===(t=a([s]))||void 0===t||!t.length);return{isSelected:s===n,noBlockSelected:!s,isImmediateParentOfSelectedBlock:i,selectedBlockHasDescendants:l}}),[n]),l=!!(a||r||o&&!i)&&te;return(0,s.createElement)(e,Q({},t,{customAppender:l}))}const ae=(0,Z.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,s.createElement)(e,t):(0,s.createElement)(ne,Q({blockEdit:e},t))),"withNavigationEditorCustomAppender");var re=window.wp.components,oe=window.wp.primitives,ie=(0,s.createElement)(oe.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)(oe.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}));function se(e){const{editEntityRecord:t}=(0,u.useDispatch)(d.store),n=[p,v,e],{editedMenu:a,hasLoadedEditedMenu:r}=(0,u.useSelect)((t=>({editedMenu:e&&t(d.store).getEditedEntityRecord(...n),hasLoadedEditedMenu:t(d.store).hasFinishedResolution("getEditedEntityRecord",[...n])})),[e]);return{editedMenu:a,menuEntityData:n,editMenuEntityRecord:t,hasLoadedEditedMenu:r}}function le(e,t){return(0,d.useEntityProp)(p,v,e,t)}const ce=e=>{const t=e("core"),n={per_page:-1};return{menus:t.getMenus(n),hasLoadedMenus:t.hasFinishedResolution("getMenus",[n])}};var ue=window.wp.dom;function de(){const e=(0,u.useSelect)((e=>e(K).getSelectedMenuId()),[]),{setSelectedMenuId:t}=(0,u.useDispatch)(K);return[e,t]}var me=window.wp.apiFetch,pe=n.n(me);const ve=(e,t)=>Object.values(e).filter((({menu:e})=>e===t)).map((({name:e})=>e));var ge=()=>(0,u.useSelect)((e=>{const{getBlockOrder:t}=e(ee.store),n=t()[0];return{navBlockClientId:n,lastNavBlockItemIndex:t(n).length}}),[]);const _e=(0,m.__)("(untitled menu)"),he=(0,s.createContext)();function Ee(){const{menus:e,isResolvingMenus:t,hasResolvedMenus:n}=(0,u.useSelect)((e=>{const{getMenus:t,isResolving:n,hasFinishedResolution:a}=e(d.store),r=[{per_page:-1}];return{menus:t(...r),isResolvingMenus:n("getMenus",r),hasResolvedMenus:a("getMenus",r)}}),[]);return{menus:e,isResolvingMenus:t,hasResolvedMenus:n,hasMenus:!(!n||null==e||!e.length)}}function fe(e){const{menuItems:t,hasResolvedMenuItems:n}=(0,u.useSelect)((t=>{const{getMenuItems:n,hasFinishedResolution:a}=t(d.store),r=void 0!==e,o=r?[{menus:e,per_page:-1}]:void 0;return{menuItems:r?n(...o):void 0,hasResolvedMenuItems:!!r&&a("getMenuItems",o)}}),[e]);return{menuItems:t,hasResolvedMenuItems:n}}function be(){const{pages:e,isResolvingPages:t,hasResolvedPages:n}=(0,u.useSelect)((e=>{const{getEntityRecords:t,isResolving:n,hasFinishedResolution:a}=e(d.store),r=["postType","page",{parent:0,order:"asc",orderby:"id",per_page:-1}];return{pages:t(...r)||null,isResolvingPages:n("getEntityRecords",r),hasResolvedPages:a("getEntityRecords",r)}}),[]);return{pages:e,isResolvingPages:t,hasResolvedPages:n,hasPages:!(!n||null==e||!e.length)}}const ye={variant:"tertiary"},we={position:"bottom center"};var Se=(0,s.forwardRef)((function({onCreate:e},t){const[n,a]=(0,s.useState)(),[r,o]=(0,s.useState)(!1),[i]=de(),[c]=le("name",i),{isResolvingPages:u,menus:d,isResolvingMenus:p,menuItems:v,hasResolvedMenuItems:g,pages:_,hasPages:h,hasMenus:E}=(f=n,{...be(),...Ee(),...fe(f)});var f;const b=u||p,y=(0,s.useCallback)((()=>{const{innerBlocks:t}=N(v);e(t,!0)}),[v,N,e]);(0,s.useEffect)((()=>{r&&g&&(y(),o(!1))}),[r,g]);const w=null==d?void 0:d.filter((e=>e.id!==i)),S=!(null==w||!w.length);return(0,s.createElement)(re.Placeholder,{className:"edit-navigation-block-placeholder",label:c,instructions:(0,m.__)("This menu is empty. You can start blank and choose what to add, add your existing pages, or add the content of another menu.")},(0,s.createElement)("div",{className:"edit-navigation-block-placeholder__controls"},b&&(0,s.createElement)("div",{ref:t},(0,s.createElement)(re.Spinner,null)),!b&&(0,s.createElement)("div",{ref:t,className:"edit-navigation-block-placeholder__actions"},(0,s.createElement)(re.Button,{variant:"tertiary",onClick:()=>{e([])}},(0,m.__)("Start blank")),h?(0,s.createElement)(re.Button,{variant:E?"tertiary":"primary",onClick:()=>{const t=function(e){return null!=e&&e.length?e.map((({title:e,type:t,link:n,id:a})=>(0,l.createBlock)("core/navigation-link",{type:t,id:a,url:n,label:e.rendered?e.rendered:(0,m.__)("(no title)"),opensInNewTab:!1}))):null}(_);e(t,!0)}},(0,m.__)("Add all pages")):void 0,S?(0,s.createElement)(re.DropdownMenu,{text:(0,m.__)("Copy existing menu"),icon:ie,toggleProps:ye,popoverProps:we},(({onClose:e})=>(0,s.createElement)(re.MenuGroup,null,w.map((t=>(0,s.createElement)(re.MenuItem,{onClick:()=>{a(t.id),g?y():o(!0)},onClose:e,key:t.id},t.name)))))):void 0)))}));const ke=(0,Z.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,s.createElement)(e,t):(0,s.createElement)(e,Q({},t,{customPlaceholder:Se}))),"withNavigationEditorPlaceholder");var Ie=n(4184),Me=n.n(Ie),Ne=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),Ce=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),Be=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),xe=window.wp.viewport,Pe=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"}));const Re=(0,u.combineReducers)({features(e={},t){if("SET_FEATURE_DEFAULTS"===t.type){const{scope:n,defaults:a}=t;return{...e,[n]:{...e[n],...a}}}return e}}),Te=(0,u.combineReducers)({features(e={},t){if("SET_FEATURE_VALUE"===t.type){const{scope:n,featureName:a,value:r}=t;return{...e,[n]:{...e[n],[a]:r}}}return e}}),De=(0,u.combineReducers)({singleEnableItems:function(e={},{type:t,itemType:n,scope:a,item:r}){return"SET_SINGLE_ENABLE_ITEM"===t&&n&&a?{...e,[n]:{...e[n],[a]:r||null}}:e},multipleEnableItems:function(e={},{type:t,itemType:n,scope:a,item:r,isEnable:o}){if("SET_MULTIPLE_ENABLE_ITEM"!==t||!n||!a||!r||(0,M.get)(e,[n,a,r])===o)return e;const i=e[n]||{},s=i[a]||{};return{...e,[n]:{...i,[a]:{...s,[r]:o||!1}}}}});var Le=(0,u.combineReducers)({enableItems:De,preferenceDefaults:Re,preferences:Te});function Ae(e,t,n){return{type:"SET_SINGLE_ENABLE_ITEM",itemType:e,scope:t,item:n}}function Fe(e,t){return Ae("complementaryArea",e,t)}function Oe(e){return Ae("complementaryArea",e,void 0)}function Ve(e,t,n,a){return{type:"SET_MULTIPLE_ENABLE_ITEM",itemType:e,scope:t,item:n,isEnable:a}}function ze(e,t){return Ve("pinnedItems",e,t,!0)}function Ue(e,t){return Ve("pinnedItems",e,t,!1)}function Ge(e,t){return function({select:n,dispatch:a}){const r=n.isFeatureActive(e,t);a.setFeatureValue(e,t,!r)}}function je(e,t,n){return{type:"SET_FEATURE_VALUE",scope:e,featureName:t,value:!!n}}function He(e,t){return{type:"SET_FEATURE_DEFAULTS",scope:e,defaults:t}}function $e(e,t){return function(e,t,n){return(0,M.get)(e.enableItems.singleEnableItems,["complementaryArea",n])}(e,0,t)}function qe(e,t,n){return!1!==function(e,t,n,a){return(0,M.get)(e.enableItems.multipleEnableItems,["pinnedItems",n,a])}(e,0,t,n)}function Ye(e,t,n){var a,r;const o=null===(a=e.preferences.features[t])||void 0===a?void 0:a[n];return!!(void 0!==o?o:null===(r=e.preferenceDefaults.features[t])||void 0===r?void 0:r[n])}const We="core/interface",Je=(0,u.createReduxStore)(We,{reducer:Le,actions:o,selectors:i,persist:["enableItems","preferences"],__experimentalUseThunks:!0});(0,u.registerStore)(We,{reducer:Le,actions:o,selectors:i,persist:["enableItems","preferences"],__experimentalUseThunks:!0});var Ke=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),Qe=Ke((function({as:e=re.Button,scope:t,identifier:n,icon:a,selectedIcon:r,...o}){const i=e,l=(0,u.useSelect)((e=>e(Je).getActiveComplementaryArea(t)===n),[n]),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,u.useDispatch)(Je);return(0,s.createElement)(i,Q({icon:r&&l?r:a,onClick:()=>{l?d(t):c(t,n)}},(0,M.omit)(o,["name"])))})),Xe=({smallScreenTitle:e,children:t,className:n,toggleButtonProps:a})=>{const r=(0,s.createElement)(Qe,Q({icon:Pe},a));return(0,s.createElement)(s.Fragment,null,(0,s.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},e&&(0,s.createElement)("span",{className:"interface-complementary-area-header__small-title"},e),r),(0,s.createElement)("div",{className:Me()("components-panel__header","interface-complementary-area-header",n),tabIndex:-1},t,r))};function Ze({name:e,as:t=re.Button,onClick:n,...a}){return(0,s.createElement)(re.Fill,{name:e},(({onClick:e})=>(0,s.createElement)(t,Q({onClick:n||e?(...t)=>{(n||M.noop)(...t),(e||M.noop)(...t)}:void 0},a))))}Ze.Slot=function({name:e,as:t=re.ButtonGroup,fillProps:n={},bubblesVirtually:a,...r}){return(0,s.createElement)(re.Slot,{name:e,bubblesVirtually:a,fillProps:n},(e=>{if((0,M.isEmpty)(s.Children.toArray(e)))return null;const n=[];s.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&n.push(t)}));const a=s.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&n.includes(e.props.__unstableTarget)?null:e));return(0,s.createElement)(t,r,a)}))};var et=Ze;const tt=e=>(0,s.createElement)(re.MenuItem,(0,M.omit)(e,["__unstableExplicitMenuItem","__unstableTarget"]));function nt({scope:e,target:t,__unstableExplicitMenuItem:n,...a}){return(0,s.createElement)(Qe,Q({as:a=>(0,s.createElement)(et,Q({__unstableExplicitMenuItem:n,__unstableTarget:`${e}/${t}`,as:tt,name:`${e}/plugin-more-menu`},a)),role:"menuitemcheckbox",selectedIcon:Ne,name:t,scope:e},a))}function at({scope:e,...t}){return(0,s.createElement)(re.Fill,Q({name:`PinnedItems/${e}`},t))}at.Slot=function({scope:e,className:t,...n}){return(0,s.createElement)(re.Slot,Q({name:`PinnedItems/${e}`},n),(e=>!(0,M.isEmpty)(e)&&(0,s.createElement)("div",{className:Me()(t,"interface-pinned-items")},e)))};var rt=at;function ot({scope:e,children:t,className:n}){return(0,s.createElement)(re.Fill,{name:`ComplementaryArea/${e}`},(0,s.createElement)("div",{className:n},t))}const it=Ke((function({children:e,className:t,closeLabel:n=(0,m.__)("Close plugin"),identifier:a,header:r,headerClassName:o,icon:i,isPinnable:l=!0,panelClassName:c,scope:d,name:p,smallScreenTitle:v,title:g,toggleShortcut:_,isActiveByDefault:h,showIconLabels:E=!1}){const{isActive:f,isPinned:b,activeArea:y,isSmall:w,isLarge:S}=(0,u.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(Je),r=t(d);return{isActive:r===a,isPinned:n(d,a),activeArea:r,isSmall:e(xe.store).isViewportMatch("< medium"),isLarge:e(xe.store).isViewportMatch("large")}}),[a,d]);!function(e,t,n,a,r){const o=(0,s.useRef)(!1),i=(0,s.useRef)(!1),{enableComplementaryArea:l,disableComplementaryArea:c}=(0,u.useDispatch)(Je);(0,s.useEffect)((()=>{a&&r&&!o.current?(c(e),i.current=!0):i.current&&!r&&o.current?(i.current=!1,l(e,t)):i.current&&n&&n!==t&&(i.current=!1),r!==o.current&&(o.current=r)}),[a,r,e,t,n])}(d,a,y,f,w);const{enableComplementaryArea:k,disableComplementaryArea:I,pinItem:M,unpinItem:N}=(0,u.useDispatch)(Je);return(0,s.useEffect)((()=>{h&&void 0===y&&!w&&k(d,a)}),[y,h,d,a,w]),(0,s.createElement)(s.Fragment,null,l&&(0,s.createElement)(rt,{scope:d},b&&(0,s.createElement)(Qe,{scope:d,identifier:a,isPressed:f&&(!E||S),"aria-expanded":f,label:g,icon:E?Ne:i,showTooltip:!E,variant:E?"tertiary":void 0})),p&&l&&(0,s.createElement)(nt,{target:p,scope:d,icon:i},g),f&&(0,s.createElement)(ot,{className:Me()("interface-complementary-area",t),scope:d},(0,s.createElement)(Xe,{className:o,closeLabel:n,onClose:()=>I(d),smallScreenTitle:v,toggleButtonProps:{label:n,shortcut:_,scope:d,identifier:a}},r||(0,s.createElement)(s.Fragment,null,(0,s.createElement)("strong",null,g),l&&(0,s.createElement)(re.Button,{className:"interface-complementary-area__pin-unpin-item",icon:b?Ce:Be,label:b?(0,m.__)("Unpin from toolbar"):(0,m.__)("Pin to toolbar"),onClick:()=>(b?N:M)(d,a),isPressed:b,"aria-expanded":b}))),(0,s.createElement)(re.Panel,{className:c},e)))}));it.Slot=function({scope:e,...t}){return(0,s.createElement)(re.Slot,Q({name:`ComplementaryArea/${e}`},t))};var st=it,lt=(0,s.forwardRef)((function({footer:e,header:t,sidebar:n,secondarySidebar:a,notices:r,content:o,drawer:i,actions:l,labels:c,className:u,shortcuts:d},p){const v=(0,re.__unstableUseNavigateRegions)(d);!function(e){(0,s.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={
/* translators: accessibility text for the nav bar landmark region. */
drawer:(0,m.__)("Drawer"),
/* translators: accessibility text for the top bar landmark region. */
header:(0,m.__)("Header"),
/* translators: accessibility text for the content landmark region. */
body:(0,m.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,m.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,m.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,m.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,m.__)("Footer"),...c};return(0,s.createElement)("div",Q({},v,{ref:(0,Z.useMergeRefs)([p,v.ref]),className:Me()(u,"interface-interface-skeleton",v.className,!!e&&"has-footer")}),!!i&&(0,s.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer},i),(0,s.createElement)("div",{className:"interface-interface-skeleton__editor"},!!t&&(0,s.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},t),(0,s.createElement)("div",{className:"interface-interface-skeleton__body"},!!a&&(0,s.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},a),!!r&&(0,s.createElement)("div",{className:"interface-interface-skeleton__notices"},r),(0,s.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},o),!!n&&(0,s.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},n),!!l&&(0,s.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},l))),!!e&&(0,s.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},e))})),ct=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"}));function ut({as:e=re.DropdownMenu,className:t,label:
/* translators: button label text should, if possible, be under 16 characters. */
n=(0,m.__)("Options"),popoverProps:a,toggleProps:r,children:o}){return(0,s.createElement)(e,{className:Me()("interface-more-menu-dropdown",t),icon:ct,label:n,popoverProps:{position:"bottom left",...a,className:Me()("interface-more-menu-dropdown__content",null==a?void 0:a.className)},toggleProps:{tooltipPosition:"bottom",...r}},(e=>o(e)))}var dt=window.wp.htmlEntities;function mt(){const{enableComplementaryArea:e}=(0,u.useDispatch)(Je),[t]=de(),[n]=le("name",t),[,a]=(0,s.useContext)(he),r=(0,dt.decodeEntities)(null!=n?n:_e);return(0,s.createElement)(ee.BlockControls,null,(0,s.createElement)(re.ToolbarGroup,null,(0,s.createElement)(re.ToolbarButton,{"aria-label":(0,m.sprintf)(// translators: %s: the name of a menu.
(0,m.__)("Edit menu name: %s"),r),onClick:()=>{e(h,E),a(!0)}},(0,s.createElement)(re.__experimentalText,{limit:24,ellipsizeMode:"tail",truncate:!0},r))))}const pt=(0,Z.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,s.createElement)(e,t):(0,s.createElement)(s.Fragment,null,(0,s.createElement)(mt,null),(0,s.createElement)(e,t))),"withMenuName");function vt(e,t){return["core/navigation","core/navigation-link","core/navigation-submenu"].includes(t)||(0,M.set)(e,["supports","inserter"],!1),e}const gt=(0,Z.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,s.createElement)(e,t):(0,s.createElement)(e,Q({},t,{hasSubmenuIndicatorSetting:!1,hasItemJustificationControls:!1,hasColorSettings:!1}))),"removeNavigationBlockEditUnsupportedFeatures");function _t(e,t){return"core/navigation"!==t?e:{...e,supports:{customClassName:!1,html:!1,inserter:!0},variations:void 0}}var ht=window.wp.keyboardShortcuts,Et=(0,re.withNotices)((function({className:e,onCreate:t,titleText:n,helpText:a,focusInputOnMount:r=!1,noticeUI:o,noticeOperations:i}){const l=(0,Z.useFocusOnMount)(r),[c,g]=(0,s.useState)(""),[_,h]=(0,s.useState)(!1),{createInfoNotice:E}=(0,u.useDispatch)(F.store),{saveMenu:f}=(0,u.useDispatch)(d.store),{createErrorNotice:b,removeAllNotices:y}=i,w=(0,u.useSelect)((e=>e(d.store).getLastEntitySaveError(p,v)),[]);return(0,s.useEffect)((()=>{w&&b((0,ue.__unstableStripHTML)(null==w?void 0:w.message))}),[w]),(0,s.createElement)("form",{className:Me()("edit-navigation-add-menu",e),onSubmit:async e=>{if(e.preventDefault(),!c.length||_)return;h(!0),y();const n=await f({name:c});h(!1),n&&(E((0,m.__)("Menu created"),{type:"snackbar",isDismissible:!0}),t&&t(n.id))}},o,n&&(0,s.createElement)("h3",{className:"edit-navigation-add-menu__title"},n),(0,s.createElement)(re.TextControl,{ref:l,label:(0,m.__)("Menu name"),value:c,onChange:g,help:a}),(0,s.createElement)(re.Button,{className:"edit-navigation-add-menu__create-menu-button",type:"submit",variant:"primary",disabled:!c.length,isBusy:_,"aria-disabled":!c.length||_},(0,m.__)("Create menu")))}));function ft({menus:e,selectedMenuId:t,onSelectMenu:n=M.noop}){const[a,r]=(0,s.useState)(!1),o=()=>r(!1);return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(re.MenuGroup,null,(0,s.createElement)(re.MenuItemsChoice,{value:t,onSelect:n,choices:e.map((({id:e,name:t})=>({value:e,label:(0,dt.decodeEntities)(t),"aria-label":(0,m.sprintf)(
/* translators: %s: The name of a menu. */
(0,m.__)("Switch to '%s'"),t)})))})),(0,s.createElement)(re.MenuGroup,{hideSeparator:!0},(0,s.createElement)(re.MenuItem,{className:"edit-navigation-menu-switcher__new-button",onClick:()=>r(!0)},(0,m.__)("Create a new menu")),a&&(0,s.createElement)(re.Modal,{title:(0,m.__)("Create a new menu"),className:"edit-navigation-menu-switcher__modal",onRequestClose:o},(0,s.createElement)(Et,{onCreate:e=>{o(),n(e)},helpText:(0,m.__)("A short descriptive name for your menu.")}))))}function bt({onCreate:e,onSelectMenu:t,menus:n}){const a=(null==n?void 0:n.length)>0;return(0,s.createElement)("div",{className:"edit-navigation-empty-state"},a&&(0,s.createElement)("h4",null,(0,m.__)("Choose a menu to edit:")),(0,s.createElement)(re.Card,null,(0,s.createElement)(re.CardBody,null,a?(0,s.createElement)(re.NavigableMenu,null,(0,s.createElement)(ft,{onSelectMenu:t,menus:n})):(0,s.createElement)(Et,{onCreate:e,titleText:(0,m.__)("Create your first menu"),helpText:(0,m.__)("A short descriptive name for your menu."),focusInputOnMount:!0}))))}class yt extends s.Component{constructor(){super(...arguments),this.reboot=this.reboot.bind(this),this.state={error:null}}componentDidCatch(e){this.setState({error:e})}reboot(){this.props.onError&&this.props.onError()}render(){const{error:e}=this.state;return e?(0,s.createElement)(ee.Warning,{className:"navigation-editor-error-boundary",actions:[(0,s.createElement)(re.Button,{key:"recovery",onClick:this.reboot,variant:"secondary"},(0,m.__)("Attempt Recovery"))]},(0,m.__)("The navigation editor has encountered an unexpected error.")):this.props.children}}var wt=yt;function St({saveBlocks:e}){(0,ht.useShortcut)("core/edit-navigation/save-menu",(t=>{t.preventDefault(),e()}));const{redo:t,undo:n}=(0,u.useDispatch)(d.store);return(0,ht.useShortcut)("core/edit-navigation/undo",(e=>{n(),e.preventDefault()})),(0,ht.useShortcut)("core/edit-navigation/redo",(e=>{t(),e.preventDefault()})),null}St.Register=function(){const{registerShortcut:e}=(0,u.useDispatch)(ht.store);return(0,s.useEffect)((()=>{e({name:"core/edit-navigation/save-menu",category:"global",description:(0,m.__)("Save the navigation currently being edited."),keyCombination:{modifier:"primary",character:"s"}}),e({name:"core/edit-navigation/undo",category:"global",description:(0,m.__)("Undo your last changes."),keyCombination:{modifier:"primary",character:"z"}}),e({name:"core/edit-navigation/redo",category:"global",description:(0,m.__)("Redo your last undo."),keyCombination:{modifier:"primaryShift",character:"z"}})}),[e]),null};var kt=St,It=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function Mt({sidebarName:e}){const{enableComplementaryArea:t}=(0,u.useDispatch)(Je),[n,a]=e===E?// translators: ARIA label for the Menu sidebar tab, selected.
[(0,m.__)("Menu (selected)"),"is-active"]:// translators: ARIA label for the Menu Settings Sidebar tab, not selected.
[(0,m.__)("Menu"),""],[r,o]=e===f?// translators: ARIA label for the Block Settings Sidebar tab, selected.
[(0,m.__)("Block (selected)"),"is-active"]:// translators: ARIA label for the Block Settings Sidebar tab, not selected.
[(0,m.__)("Block"),""];return(0,s.createElement)("ul",null,(0,s.createElement)("li",null,(0,s.createElement)(re.Button,{onClick:()=>t(h,E),className:`edit-navigation-sidebar__panel-tab ${a}`,"aria-label":n,"data-label":(0,m.__)("Menu")},// translators: Text label for the Menu Settings Sidebar tab.
(0,m.__)("Menu"))),(0,s.createElement)("li",null,(0,s.createElement)(re.Button,{onClick:()=>t(h,f),className:`edit-navigation-sidebar__panel-tab ${o}`,"aria-label":r,"data-label":(0,m.__)("Block")},// translators: Text label for the Block Settings Sidebar tab.
(0,m.__)("Block"))))}function Nt(){const[e,t]=(0,s.useContext)(he),[n]=de(),[a,r]=le("name",n),o=(0,s.useRef)();return(0,s.useEffect)((()=>{e&&o.current.focus()}),[e]),(0,s.createElement)(re.TextControl,{ref:o,help:(0,m.__)("A short, descriptive name used to refer to this menu elsewhere."),label:(0,m.__)("Name"),onBlur:()=>t(!1),className:"edit-navigation-name-editor__text-control",value:(0,dt.decodeEntities)(a||""),onChange:r})}function Ct({menuId:e}){const[t,n]=le("auto_add",e);return(0,s.createElement)(re.ToggleControl,{label:(0,m.__)("Add new pages"),help:(0,m.__)("Automatically add published top-level pages to this menu."),checked:null!=t&&t,onChange:n})}function Bt({menuId:e}){return(0,s.createElement)(re.PanelBody,{title:(0,m.__)("Menu settings")},(0,s.createElement)(Nt,null),(0,s.createElement)(Ct,{menuId:e}))}function xt({menus:e,selectedMenuId:t,onSelectMenu:n}){const{menuLocations:a,assignMenuToLocation:r,toggleMenuLocationAssignment:o}=function(){const[e,t]=(0,s.useState)(null),[n]=de(),{editMenuEntityRecord:a,menuEntityData:r}=se(n);(0,s.useEffect)((()=>{let e=!0;return(async()=>{const n=await pe()({method:"GET",path:"/__experimental/menu-locations"});e&&t(n)})(),()=>e=!1}),[]);const o=(0,s.useCallback)((async(n,o)=>{const i=e[n].menu,s=(0,M.merge)(e,{[n]:{menu:o}});t(s),a(...r,{locations:ve(s,o||i)})}),[e]);return{menuLocations:(0,s.useMemo)((()=>Object.values(e||{})),[e]),assignMenuToLocation:o,toggleMenuLocationAssignment:(t,n)=>{const a=e[t].menu===n?0:n;o(t,a)}}}(),[i,l]=(0,s.useState)(!1),c=()=>l(!1),{createSuccessNotice:d,createErrorNotice:p}=(0,u.useDispatch)(F.store);if(!a||null==e||!e.length)return(0,s.createElement)(re.Spinner,null);if(!a.length)return(0,s.createElement)(re.PanelBody,{title:(0,m.__)("Theme locations")},(0,s.createElement)("p",null,(0,m.__)("There are no available menu locations.")));const v=(0,m.sprintf)(// translators: Number of available theme locations.
(0,m.__)("Your current theme provides %d different locations to place menu."),a.length),g=(0,m.sprintf)(// translators: Number of available theme locations.
(0,m.__)("Your current theme supports %d different locations. Select which menu appears in each location."),a.length),_=a.map((({name:n,description:a,menu:r})=>{const i=e.filter((({id:e})=>![0,t].includes(e))).find((({id:e})=>e===r));return(0,s.createElement)("li",{key:n,className:"edit-navigation-manage-locations__checklist-item"},(0,s.createElement)(re.CheckboxControl,{className:"edit-navigation-manage-locations__menu-location-checkbox",checked:r===t,onChange:()=>o(n,t),label:a,help:i&&(0,m.sprintf)(// translators: menu name.
(0,m.__)("Currently using %s"),(0,dt.decodeEntities)(i.name))}))})),h=a.map((t=>(0,s.createElement)("div",{key:t.name,className:"edit-navigation-manage-locations__menu-entry"},(0,s.createElement)(re.SelectControl,{key:t.name,className:"edit-navigation-manage-locations__select-menu",label:t.description,labelPosition:"top",value:(0,dt.decodeEntities)(t.menu),options:[{value:0,label:(0,m.__)("Select a Menu"),key:0},...e.map((({id:e,name:t})=>({key:e,value:e,label:(0,dt.decodeEntities)(t)})))],onChange:e=>{r(t.name,Number(e))}}),(0,s.createElement)(re.Button,{variant:"secondary",style:{visibility:t.menu?"visible":"hidden"},className:"edit-navigation-manage-locations__edit-button",onClick:()=>(c(),n(t.menu))},(0,m.__)("Edit")))));return(0,s.createElement)(re.PanelBody,{title:(0,m.__)("Theme locations")},(0,s.createElement)("div",{className:"edit-navigation-manage-locations__theme-location-text-main"},v),(0,s.createElement)("ul",{className:"edit-navigation-manage-locations__checklist"},_),(0,s.createElement)(re.Button,{variant:"secondary",className:"edit-navigation-manage-locations__open-menu-locations-modal-button","aria-expanded":i,onClick:()=>l(!0)},(0,m.__)("Manage locations")),i&&(0,s.createElement)(re.Modal,{className:"edit-navigation-manage-locations__modal",title:(0,m.__)("Manage locations"),onRequestClose:c},(0,s.createElement)("div",{className:"edit-navigation-manage-locations__theme-location-text-modal"},g),h,(0,s.createElement)(re.Button,{className:"edit-navigation-manage-locations__save-button",variant:"primary",onClick:async()=>{const t="POST",n=e.map((({id:e})=>{const n=a.filter((t=>t.menu===e)).map((e=>e.name));return{path:`/__experimental/menus/${e}`,body:{locations:n},method:t}}));if(!(r=await pe()({path:"batch/v1",data:{validation:"require-all-validate",requests:n},method:t})).failed&&1>r.responses.filter((e=>200>e.status||300<=e.status)).length)return d((0,m.__)("Menu locations have been updated."),{type:"snackbar"}),void c();var r;p((0,m.__)("An error occurred while trying to update menu locations."),{type:"snackbar"})}},(0,m.__)("Update"))))}function Pt({onDeleteMenu:e,isMenuBeingDeleted:t}){return(0,s.createElement)(re.PanelBody,null,(0,s.createElement)(re.Button,{className:"edit-navigation-inspector-additions__delete-menu-button",variant:"secondary",isDestructive:!0,isBusy:t,onClick:()=>{window.confirm((0,m.__)("Are you sure you want to delete this navigation? This action cannot be undone."))&&e()}},(0,m.__)("Delete menu")))}function Rt({menuId:e,menus:t,isMenuBeingDeleted:n,onDeleteMenu:a,onSelectMenu:r}){const o=(0,Z.useViewportMatch)("medium"),{sidebar:i,hasBlockSelection:l,hasSidebarEnabled:c}=(0,u.useSelect)((e=>{const t=e(Je).getActiveComplementaryArea(h),n=[E,f].includes(t);return{sidebar:t,hasBlockSelection:!!e(ee.store).getBlockSelectionStart(),hasSidebarEnabled:n}}),[]),{enableComplementaryArea:d}=(0,u.useDispatch)(Je);(0,s.useEffect)((()=>{c&&d(h,l?f:E)}),[l,c]);let p=i;return c||(p=l?f:E),(0,s.createElement)(st,{className:"edit-navigation-sidebar"
/* translators: button label text should, if possible, be under 16 characters. */,title:(0,m.__)("Settings"),closeLabel:(0,m.__)("Close settings"),scope:h,identifier:p,icon:It,isActiveByDefault:o,header:(0,s.createElement)(Mt,{sidebarName:p}),headerClassName:"edit-navigation-sidebar__panel-tabs",isPinnable:!0},p===E&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Bt,{menuId:e}),(0,s.createElement)(xt,{menus:t,selectedMenuId:e,onSelectMenu:r}),(0,s.createElement)(Pt,{onDeleteMenu:a,isMenuBeingDeleted:n})),p===f&&(0,s.createElement)(ee.BlockInspector,null))}function Tt({menus:e,isLoading:t}){const[n,a]=de(),[r]=le("name",n),o=(0,s.useRef)();return t?(0,s.createElement)("div",{className:"edit-navigation-menu-actions"},(0,m.__)("Loadingâ€¦")):(0,s.createElement)("div",{className:"edit-navigation-menu-actions"},(0,s.createElement)("div",{ref:o,className:"edit-navigation-menu-actions__subtitle-wrapper"},(0,s.createElement)(re.__experimentalText,{size:"body",className:"edit-navigation-menu-actions__subtitle",as:"h2",limit:24,ellipsizeMode:"tail",truncate:!0},(0,dt.decodeEntities)(r)),(0,s.createElement)(re.DropdownMenu,{icon:ie,toggleProps:{label:(0,m.__)("Switch menu"),className:"edit-navigation-menu-actions__switcher-toggle",showTooltip:!1,__experimentalIsFocusable:!0},popoverProps:{className:"edit-navigation-menu-actions__switcher-dropdown",position:"bottom center",anchorRef:o.current}},(({onClose:t})=>(0,s.createElement)(ft,{menus:e,selectedMenuId:n,onSelectMenu:e=>{a(e),t()}})))))}function Dt(){const[e,t]=(0,s.useState)(!1),[,n]=de();return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(re.Button,{variant:"tertiary",onClick:()=>t(!0)},(0,m.__)("New menu")),e&&(0,s.createElement)(re.Modal,{title:(0,m.__)("Create a new menu"),className:"edit-navigation-menu-switcher__modal",onRequestClose:()=>t(!1)},(0,s.createElement)(Et,{helpText:(0,m.__)("A short descriptive name for your menu."),onCreate:e=>{t(!1),n(e)}})))}function Lt({navigationPost:e}){const{isDirty:t}=(0,u.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e(d.store);return{isDirty:t().length>0}}),[]),{saveNavigationPost:n}=(0,u.useDispatch)(K),a=!t||!e;return(0,s.createElement)(re.Button,{className:"edit-navigation-toolbar__save-button",variant:"primary",onClick:()=>{n(e)},disabled:a},(0,m.__)("Save"))}var At=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})),Ft=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})),Ot=window.wp.keycodes;function Vt(){const e=(0,u.useSelect)((e=>e(d.store).hasUndo()),[]),{undo:t}=(0,u.useDispatch)(d.store);return(0,s.createElement)(re.ToolbarButton,{icon:(0,m.isRTL)()?Ft:At,label:(0,m.__)("Undo"),shortcut:Ot.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?t:void 0})}function zt(){const e=(0,u.useSelect)((e=>e(d.store).hasRedo()),[]),{redo:t}=(0,u.useDispatch)(d.store);return(0,s.createElement)(re.ToolbarButton,{icon:(0,m.isRTL)()?At:Ft,label:(0,m.__)("Redo"),shortcut:Ot.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?t:void 0})}var Ut=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})),Gt=function(){const{navBlockClientId:e}=ge(),{isInserterOpened:t,hasInserterItems:n}=(0,u.useSelect)((t=>({hasInserterItems:t(ee.store).hasInserterItems(e),isInserterOpened:t(K).isInserterOpened()})),[e]),{setIsInserterOpened:a}=(0,u.useDispatch)(K);return(0,s.createElement)(re.ToolbarItem,{as:re.Button,className:"edit-navigation-header-inserter-toggle",variant:"primary",isPressed:t,onMouseDown:e=>{e.preventDefault()},onClick:()=>a(!t),icon:Ut
/* translators: button label text should, if possible, be under 16
    		characters. */,label:(0,m._x)("Toggle block inserter","Generic label for block inserter button"),disabled:!n})},jt=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M18.2 17c0 .7-.6 1.2-1.2 1.2H7c-.7 0-1.2-.6-1.2-1.2V7c0-.7.6-1.2 1.2-1.2h3.2V4.2H7C5.5 4.2 4.2 5.5 4.2 7v10c0 1.5 1.2 2.8 2.8 2.8h10c1.5 0 2.8-1.2 2.8-2.8v-3.6h-1.5V17zM14.9 3v1.5h3.7l-6.4 6.4 1.1 1.1 6.4-6.4v3.7h1.5V3h-6.3z"}));function Ht(){return(0,s.createElement)(ut,null,(()=>(0,s.createElement)(re.MenuGroup,{label:(0,m.__)("Tools")},(0,s.createElement)(re.MenuItem,{role:"menuitem",icon:jt,href:"https://github.com/WordPress/gutenberg/tree/trunk/packages/edit-navigation/docs/user-documentation.md",target:"_blank",rel:"noopener noreferrer"},(0,m.__)("Help"),(0,s.createElement)(re.VisuallyHidden,{as:"span"},
/* translators: accessibility text */
(0,m.__)("(opens in a new tab)"))))))}function $t({isMenuSelected:e,menus:t,isPending:n,navigationPost:a}){const r=(0,Z.useViewportMatch)("medium");return e?(0,s.createElement)("div",{className:"edit-navigation-header"},(0,s.createElement)("div",{className:"edit-navigation-header__toolbar-wrapper"},r&&(0,s.createElement)("h1",{className:"edit-navigation-header__title"},(0,m.__)("Navigation")),(0,s.createElement)(ee.NavigableToolbar,{className:"edit-navigation-header__toolbar","aria-label":(0,m.__)("Document tools")},(0,s.createElement)(Gt,null),r&&(0,s.createElement)(s.Fragment,null,(0,s.createElement)(Vt,null),(0,s.createElement)(zt,null)))),(0,s.createElement)(Tt,{menus:t,isLoading:n}),(0,s.createElement)("div",{className:"edit-navigation-header__actions"},r&&(0,s.createElement)(Dt,null),(0,s.createElement)(Lt,{navigationPost:a}),(0,s.createElement)(rt.Slot,{scope:"core/edit-navigation"}),(0,s.createElement)(Ht,null))):(0,s.createElement)("div",{className:"edit-navigation-header"},(0,s.createElement)("div",{className:"edit-navigation-header__toolbar-wrapper"},(0,s.createElement)("h1",{className:"edit-navigation-header__title"},(0,m.__)("Navigation"))))}function qt(){const{removeNotice:e}=(0,u.useDispatch)(F.store),t=(0,u.useSelect)((e=>e(F.store).getNotices()),[]),n=(0,M.filter)(t,{isDismissible:!0,type:"default"}),a=(0,M.filter)(t,{isDismissible:!1,type:"default"}),r=(0,M.filter)(t,{type:"snackbar"});return(0,s.createElement)(s.Fragment,null,(0,s.createElement)(re.NoticeList,{notices:a,className:"edit-navigation-notices__notice-list"}),(0,s.createElement)(re.NoticeList,{notices:n,className:"edit-navigation-notices__notice-list",onRemove:e}),(0,s.createElement)(re.SnackbarList,{notices:r,className:"edit-navigation-notices__snackbar-list",onRemove:e}))}function Yt({isPending:e}){return(0,s.createElement)("div",{className:"edit-navigation-editor"},e?(0,s.createElement)(re.Spinner,null):(0,s.createElement)("div",{className:"editor-styles-wrapper"},(0,s.createElement)(ee.WritingFlow,null,(0,s.createElement)(ee.ObserveTyping,null,(0,s.createElement)(ee.BlockList,null)))))}var Wt=(0,s.createElement)(oe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(oe.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),Jt=function(){const e=(0,Z.useViewportMatch)("medium","<"),{navBlockClientId:t,lastNavBlockItemIndex:n}=ge(),{hasInserterItems:a,selectedBlockClientId:r}=(0,u.useSelect)((e=>{var n;return{hasInserterItems:e(ee.store).hasInserterItems(t),selectedBlockClientId:null===(n=e(ee.store).getSelectedBlock())||void 0===n?void 0:n.clientId}}),[t]),{setIsInserterOpened:o}=(0,u.useDispatch)(K),[i,l]=(0,Z.__experimentalUseDialog)({onClose:()=>o(!1)});if(!a)return null;const c=!r||t===r;return(0,s.createElement)("div",Q({ref:i},l,{className:"edit-navigation-layout__inserter-panel"}),(0,s.createElement)("div",{className:"edit-navigation-layout__inserter-panel-header"},(0,s.createElement)(re.Button,{icon:Wt,onClick:()=>o(!1)})),(0,s.createElement)("div",{className:"edit-navigation-layout__inserter-panel-content"},(0,s.createElement)(ee.__experimentalLibrary,{rootClientId:c?t:void 0,__experimentalInsertionIndex:c?n:void 0,shouldFocusBlock:e,showInserterHelpPanel:!1})))};function Kt(){const e=(0,u.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e(d.store);return t().length>0}),[]);return(0,s.useEffect)((()=>{const t=t=>{if(e)return t.returnValue=(0,m.__)("You have unsaved changes. If you proceed, they will be lost."),t.returnValue};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]),null}const Qt={
/* translators: accessibility text for the navigation screen top bar landmark region. */
header:(0,m.__)("Navigation top bar"),
/* translators: accessibility text for the navigation screen content landmark region. */
body:(0,m.__)("Navigation menu blocks"),
/* translators: accessibility text for the navigation screen settings landmark region. */
sidebar:(0,m.__)("Navigation settings"),secondarySidebar:(0,m.__)("Block library")};function Xt({blockEditorSettings:e}){const t=(0,ee.__unstableUseBlockSelectionClearer)(),[n,a]=(0,s.useState)(!1),{saveNavigationPost:r}=(0,u.useDispatch)(K),{menus:o,hasLoadedMenus:i,hasFinishedInitialLoad:l,selectedMenuId:c,navigationPost:h,isMenuBeingDeleted:E,selectMenu:f,deleteMenu:b,isMenuSelected:y}=function(){var e;const{deleteMenu:t}=(0,u.useDispatch)(d.store),[n,a]=de(),[r,o]=(0,s.useState)(!1),{editedMenu:i,hasLoadedEditedMenu:l}=se(n),{menus:c,hasLoadedMenus:p}=(0,u.useSelect)(ce,[]);(0,s.useEffect)((()=>{var e;!l||null!==(e=Object.keys(i))&&void 0!==e&&e.length||a(null)}),[l,i]);const{createErrorNotice:v,createInfoNotice:g}=(0,u.useDispatch)(F.store),_=(0,u.useSelect)((e=>e(d.store).isDeletingEntityRecord("root","menu",n)),[n]),h=(null==c||null===(e=c.find((({id:e})=>e===n)))||void 0===e?void 0:e.name)||"";(0,s.useEffect)((()=>{p&&o(!0)}),[p]);const E=(0,u.useSelect)((e=>{if(n)return e(K).getNavigationPostForMenu(n)}),[n]);return{menus:c,hasLoadedMenus:p,hasFinishedInitialLoad:r,selectedMenuId:n,navigationPost:E,isMenuBeingDeleted:_,selectMenu:a,deleteMenu:async()=>{await t(n,{force:!0})?(a(null),g((0,m.sprintf)(// translators: %s: the name of a menu.
(0,m.__)('"%s" menu has been deleted'),h),{type:"snackbar",isDismissible:!0})):v((0,m.__)("Menu deletion unsuccessful"))},isMenuSelected:!!n}}(),[w,S,k]=(0,d.useEntityBlockEditor)(g,_,{id:null==h?void 0:h.id}),{hasSidebarEnabled:I,isInserterOpened:M}=(0,u.useSelect)((e=>({hasSidebarEnabled:!!e(Je).getActiveComplementaryArea("core/edit-navigation"),isInserterOpened:e(K).isInserterOpened()})),[]);(0,s.useEffect)((()=>{!c&&null!=o&&o.length&&f(o[0].id)}),[c,o]),function(e){const{createErrorNotice:t}=(0,u.useDispatch)(F.store),n=(0,u.useSelect)((t=>t(d.store).getLastEntityDeleteError(p,v,e)),[e]);(0,s.useEffect)((()=>{n&&t((0,ue.__unstableStripHTML)(null==n?void 0:n.message),{id:"edit-navigation-error"})}),[n])}(c);const N=!!(null!=o&&o.length&&h&&y);return(0,s.createElement)(wt,null,(0,s.createElement)(ht.ShortcutProvider,null,(0,s.createElement)("div",{hidden:!E,className:"edit-navigation-layout__overlay"}),(0,s.createElement)(re.SlotFillProvider,null,(0,s.createElement)(ee.BlockEditorKeyboardShortcuts.Register,null),(0,s.createElement)(kt.Register,null),(0,s.createElement)(kt,{saveBlocks:()=>r(h)}),(0,s.createElement)(ee.BlockEditorProvider,{value:w,onInput:S,onChange:k,settings:{...e,templateLock:"all"},useSubRegistry:!1},(0,s.createElement)(he.Provider,{value:(0,s.useMemo)((()=>[n,a]),[n])},(0,s.createElement)(lt,{className:"edit-navigation-layout",labels:Qt,header:(0,s.createElement)($t,{isMenuSelected:y,isPending:!i,menus:o,navigationPost:h}),content:(0,s.createElement)(s.Fragment,null,(0,s.createElement)(qt,null),!l&&(0,s.createElement)(re.Spinner,null),!y&&l&&(0,s.createElement)(bt,{onSelectMenu:f,onCreate:f,menus:o}),N&&(0,s.createElement)("div",{className:"edit-navigation-layout__content-area",ref:t},(0,s.createElement)(ee.BlockTools,null,(0,s.createElement)(Yt,{isPending:!i})))),sidebar:I&&(0,s.createElement)(st.Slot,{scope:"core/edit-navigation"}),secondarySidebar:M&&(0,s.createElement)(Jt,null)}),y&&(0,s.createElement)(Rt,{menus:o,menuId:c,onSelectMenu:f,onDeleteMenu:b,isMenuBeingDeleted:E})),(0,s.createElement)(Kt,null)),(0,s.createElement)(re.Popover.Slot,null))))}var Zt=window.wp.url;function en(e){const t=Object.keys(e).reduce(((t,n)=>(t[(0,Zt.normalizePath)(n)]=e[n],t)),{});let n=!1,a=!1;return(e,r)=>{var o,i;const{parse:s=!0}=e;if("string"!=typeof e.path)return r(e);if("GET"!==(e.method||"GET"))return r(e);const l=(0,Zt.normalizePath)(e.path);if(!n&&t[l])return n=!0,tn(t[l],s);if(a)return r(e);const c=l.match(/^\/__experimental\/menus\/(\d+)\?context=edit$/);if(!c)return r(e);const u=null===(o=Object.keys(t))||void 0===o?void 0:o[0],d=null===(i=t[u])||void 0===i?void 0:i.body;if(!d)return r(e);const m=parseInt(c[1]),p=d.filter((({id:e})=>e===m));return p.length>0?(a=!0,tn({body:p[0],headers:{}},s)):r(e)}}function tn(e,t){return Promise.resolve(t?e.body:new window.Response(JSON.stringify(e.body),{status:200,statusText:"OK",headers:e.headers}))}function nn({settings:e}){const{setIsInserterOpened:t}=(0,u.useDispatch)(K),n=t,a=(t,n)=>(n.perPage=10,(0,d.__experimentalFetchLinkSuggestions)(t,n,e)),r=(0,s.useMemo)((()=>({...e,__experimentalFetchLinkSuggestions:a,__experimentalSetIsInserterOpened:n})),[e,a,n]);return(0,s.createElement)(Xt,{blockEditorSettings:r})}function an(e,t){!function(e){var t;t=!e.blockNavMenus,(0,X.addFilter)("editor.BlockEdit","core/edit-navigation/with-navigation-editor-custom-appender",ae),(0,X.addFilter)("editor.BlockEdit","core/edit-navigation/with-navigation-editor-placeholder",ke),(0,X.addFilter)("editor.BlockEdit","core/edit-navigation/with-menu-name",pt),t&&(0,X.addFilter)("blocks.registerBlockType","core/edit-navigation/disable-inserting-non-navigation-blocks",vt),(0,X.addFilter)("editor.BlockEdit","core/edit-navigation/remove-navigation-block-edit-unsupported-features",gt),(0,X.addFilter)("blocks.registerBlockType","core/edit-navigation/remove-navigation-block-settings-unsupported-features",_t),(0,u.dispatch)(d.store).addEntities([{kind:g,name:_,transientEdits:{blocks:!0,selection:!0},label:(0,m.__)("Navigation Post"),__experimentalNoFetch:!0}]),(0,u.dispatch)(l.store).__experimentalReapplyBlockTypeFilters(),(0,c.registerCoreBlocks)(),(0,c.__experimentalRegisterExperimentalCoreBlocks)()}(t),(0,s.render)((0,s.createElement)(nn,{settings:t}),document.getElementById(e))}}(),(window.wp=window.wp||{}).editNavigation=a}();