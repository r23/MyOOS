!function(){var e={4184:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var l in n)a.call(n,l)&&n[l]&&e.push(l);else e.push(n.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){"use strict";n.r(a),n.d(a,{initialize:function(){return At}});var e={};n.r(e),n.d(e,{disableComplementaryArea:function(){return D},enableComplementaryArea:function(){return R},pinItem:function(){return L},setFeatureDefaults:function(){return G},setFeatureValue:function(){return O},toggleFeature:function(){return F},unpinItem:function(){return x}});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:function(){return U},isFeatureActive:function(){return V},isItemPinned:function(){return j}});var r={};n.r(r),n.d(r,{getNavigationPostForMenu:function(){return Ae}});var o={};n.r(o),n.d(o,{getMenuItemForClientId:function(){return Fe},getNavigationPostForMenu:function(){return Le},getSelectedMenuId:function(){return Be},hasResolvedNavigationPost:function(){return xe}});var i={};n.r(i),n.d(i,{createMissingMenuItems:function(){return Ye},saveNavigationPost:function(){return Je},setSelectedMenuId:function(){return Qe}});var l=window.wp.element,s=window.wp.blockLibrary,c=window.wp.coreData,u=window.wp.hooks,d=window.wp.compose,m=window.wp.components,p=window.wp.blockEditor,_=window.wp.data;function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var f=n(4184),E=n.n(f),v=window.wp.i18n,y=window.wp.primitives,h=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M18.3 5.6L9.9 16.9l-4.6-3.4-.9 1.2 5.8 4.3 9.3-12.6z"})),b=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),S=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),N=window.wp.viewport,I=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),w=window.lodash;const M=(0,w.flow)([_.combineReducers])({features(e={},t){if("SET_FEATURE_DEFAULTS"===t.type){const{scope:n,defaults:a}=t;return{...e,[n]:{...e[n],...a}}}return e}}),C=(0,w.flow)([_.combineReducers])({features(e={},t){if("SET_FEATURE_VALUE"===t.type){const{scope:n,featureName:a,value:r}=t;return{...e,[n]:{...e[n],[a]:r}}}return e}}),k=(0,_.combineReducers)({singleEnableItems:function(e={},{type:t,itemType:n,scope:a,item:r}){return"SET_SINGLE_ENABLE_ITEM"===t&&n&&a?{...e,[n]:{...e[n],[a]:r||null}}:e},multipleEnableItems:function(e={},{type:t,itemType:n,scope:a,item:r,isEnable:o}){if("SET_MULTIPLE_ENABLE_ITEM"!==t||!n||!a||!r||(0,w.get)(e,[n,a,r])===o)return e;const i=e[n]||{},l=i[a]||{};return{...e,[n]:{...i,[a]:{...l,[r]:o||!1}}}}});var T=(0,_.combineReducers)({enableItems:k,preferenceDefaults:M,preferences:C});const P="core/interface";function A(e,t,n){return{type:"SET_SINGLE_ENABLE_ITEM",itemType:e,scope:t,item:n}}function R(e,t){return A("complementaryArea",e,t)}function D(e){return A("complementaryArea",e,void 0)}function B(e,t,n,a){return{type:"SET_MULTIPLE_ENABLE_ITEM",itemType:e,scope:t,item:n,isEnable:a}}function L(e,t){return B("pinnedItems",e,t,!0)}function x(e,t){return B("pinnedItems",e,t,!1)}function*F(e,t){const n=yield _.controls.select(P,"isFeatureActive",e,t);yield _.controls.dispatch(P,"setFeatureValue",e,t,!n)}function O(e,t,n){return{type:"SET_FEATURE_VALUE",scope:e,featureName:t,value:!!n}}function G(e,t){return{type:"SET_FEATURE_DEFAULTS",scope:e,defaults:t}}function U(e,t){return function(e,t,n){return(0,w.get)(e.enableItems.singleEnableItems,["complementaryArea",n])}(e,0,t)}function j(e,t,n){return!1!==function(e,t,n,a){return(0,w.get)(e.enableItems.multipleEnableItems,["pinnedItems",n,a])}(e,0,t,n)}function V(e,t,n){var a,r;const o=null===(a=e.preferences.features[t])||void 0===a?void 0:a[n];return!!(void 0!==o?o:null===(r=e.preferenceDefaults.features[t])||void 0===r?void 0:r[n])}const z=(0,_.createReduxStore)(P,{reducer:T,actions:e,selectors:t,persist:["enableItems","preferences"]});(0,_.registerStore)(P,{reducer:T,actions:e,selectors:t,persist:["enableItems","preferences"]});var $=(0,window.wp.plugins.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),H=$((function({as:e=m.Button,scope:t,identifier:n,icon:a,selectedIcon:r,...o}){const i=e,s=(0,_.useSelect)((e=>e(z).getActiveComplementaryArea(t)===n),[n]),{enableComplementaryArea:c,disableComplementaryArea:u}=(0,_.useDispatch)(z);return(0,l.createElement)(i,g({icon:r&&s?r:a,onClick:()=>{s?u(t):c(t,n)}},(0,w.omit)(o,["name"])))})),q=({smallScreenTitle:e,children:t,className:n,toggleButtonProps:a})=>{const r=(0,l.createElement)(H,g({icon:I},a));return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},e&&(0,l.createElement)("span",{className:"interface-complementary-area-header__small-title"},e),r),(0,l.createElement)("div",{className:E()("components-panel__header","interface-complementary-area-header",n),tabIndex:-1},t,r))};function Q({name:e,as:t=m.Button,onClick:n,...a}){return(0,l.createElement)(m.Fill,{name:e},(({onClick:e})=>(0,l.createElement)(t,g({onClick:n||e?(...t)=>{(n||w.noop)(...t),(e||w.noop)(...t)}:void 0},a))))}Q.Slot=function({name:e,as:t=m.ButtonGroup,fillProps:n={},bubblesVirtually:a,...r}){return(0,l.createElement)(m.Slot,{name:e,bubblesVirtually:a,fillProps:n},(e=>{if((0,w.isEmpty)(l.Children.toArray(e)))return null;const n=[];l.Children.forEach(e,(({props:{__unstableExplicitMenuItem:e,__unstableTarget:t}})=>{t&&e&&n.push(t)}));const a=l.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&n.includes(e.props.__unstableTarget)?null:e));return(0,l.createElement)(t,r,a)}))};var Y=Q;const J=e=>(0,l.createElement)(m.MenuItem,(0,w.omit)(e,["__unstableExplicitMenuItem","__unstableTarget"]));function W({scope:e,target:t,__unstableExplicitMenuItem:n,...a}){return(0,l.createElement)(H,g({as:a=>(0,l.createElement)(Y,g({__unstableExplicitMenuItem:n,__unstableTarget:`${e}/${t}`,as:J,name:`${e}/plugin-more-menu`},a)),role:"menuitemcheckbox",selectedIcon:h,name:t,scope:e},a))}function K({scope:e,...t}){return(0,l.createElement)(m.Fill,g({name:`PinnedItems/${e}`},t))}K.Slot=function({scope:e,className:t,...n}){return(0,l.createElement)(m.Slot,g({name:`PinnedItems/${e}`},n),(e=>!(0,w.isEmpty)(e)&&(0,l.createElement)("div",{className:E()(t,"interface-pinned-items")},e)))};var X=K;function Z({scope:e,children:t,className:n}){return(0,l.createElement)(m.Fill,{name:`ComplementaryArea/${e}`},(0,l.createElement)("div",{className:n},t))}const ee=$((function({children:e,className:t,closeLabel:n=(0,v.__)("Close plugin"),identifier:a,header:r,headerClassName:o,icon:i,isPinnable:s=!0,panelClassName:c,scope:u,name:d,smallScreenTitle:p,title:g,toggleShortcut:f,isActiveByDefault:y,showIconLabels:I=!1}){const{isActive:w,isPinned:M,activeArea:C,isSmall:k,isLarge:T}=(0,_.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(z),r=t(u);return{isActive:r===a,isPinned:n(u,a),activeArea:r,isSmall:e(N.store).isViewportMatch("< medium"),isLarge:e(N.store).isViewportMatch("large")}}),[a,u]);!function(e,t,n,a,r){const o=(0,l.useRef)(!1),i=(0,l.useRef)(!1),{enableComplementaryArea:s,disableComplementaryArea:c}=(0,_.useDispatch)(z);(0,l.useEffect)((()=>{a&&r&&!o.current?(c(e),i.current=!0):i.current&&!r&&o.current?(i.current=!1,s(e,t)):i.current&&n&&n!==t&&(i.current=!1),r!==o.current&&(o.current=r)}),[a,r,e,t,n])}(u,a,C,w,k);const{enableComplementaryArea:P,disableComplementaryArea:A,pinItem:R,unpinItem:D}=(0,_.useDispatch)(z);return(0,l.useEffect)((()=>{y&&void 0===C&&!k&&P(u,a)}),[C,y,u,a,k]),(0,l.createElement)(l.Fragment,null,s&&(0,l.createElement)(X,{scope:u},M&&(0,l.createElement)(H,{scope:u,identifier:a,isPressed:w&&(!I||T),"aria-expanded":w,label:g,icon:I?h:i,showTooltip:!I,variant:I?"tertiary":void 0})),d&&s&&(0,l.createElement)(W,{target:d,scope:u,icon:i},g),w&&(0,l.createElement)(Z,{className:E()("interface-complementary-area",t),scope:u},(0,l.createElement)(q,{className:o,closeLabel:n,onClose:()=>A(u),smallScreenTitle:p,toggleButtonProps:{label:n,shortcut:f,scope:u,identifier:a}},r||(0,l.createElement)(l.Fragment,null,(0,l.createElement)("strong",null,g),s&&(0,l.createElement)(m.Button,{className:"interface-complementary-area__pin-unpin-item",icon:M?b:S,label:M?(0,v.__)("Unpin from toolbar"):(0,v.__)("Pin to toolbar"),onClick:()=>(M?D:R)(u,a),isPressed:M,"aria-expanded":M}))),(0,l.createElement)(m.Panel,{className:c},e)))}));ee.Slot=function({scope:e,...t}){return(0,l.createElement)(m.Slot,g({name:`ComplementaryArea/${e}`},t))};var te=ee,ne=(0,l.forwardRef)((function({footer:e,header:t,sidebar:n,secondarySidebar:a,notices:r,content:o,drawer:i,actions:s,labels:c,className:u,shortcuts:p},_){const g=(0,l.useRef)(),f=(0,m.__unstableUseNavigateRegions)(g,p);!function(e){(0,l.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const y={
/* translators: accessibility text for the nav bar landmark region. */
drawer:(0,v.__)("Drawer"),
/* translators: accessibility text for the top bar landmark region. */
header:(0,v.__)("Header"),
/* translators: accessibility text for the content landmark region. */
body:(0,v.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,v.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,v.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,v.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,v.__)("Footer"),...c};return(0,l.createElement)("div",{ref:(0,d.useMergeRefs)([_,g]),className:E()(u,"interface-interface-skeleton",f,!!e&&"has-footer")},!!i&&(0,l.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":y.drawer},i),(0,l.createElement)("div",{className:"interface-interface-skeleton__editor"},!!t&&(0,l.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":y.header,tabIndex:"-1"},t),(0,l.createElement)("div",{className:"interface-interface-skeleton__body"},!!a&&(0,l.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":y.secondarySidebar,tabIndex:"-1"},a),!!r&&(0,l.createElement)("div",{className:"interface-interface-skeleton__notices"},r),(0,l.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":y.body,tabIndex:"-1"},o),!!n&&(0,l.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":y.sidebar,tabIndex:"-1"},n),!!s&&(0,l.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":y.actions,tabIndex:"-1"},s))),!!e&&(0,l.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":y.footer,tabIndex:"-1"},e))}));const ae="root",re="menu",oe="root",ie="postType",le="core/edit-navigation",se="edit-navigation/menu",ce="edit-navigation/block-inspector";function ue(e){const{editEntityRecord:t}=(0,_.useDispatch)(c.store),n=[ae,re,e],{editedMenu:a,hasLoadedEditedMenu:r}=(0,_.useSelect)((t=>({editedMenu:e&&t(c.store).getEditedEntityRecord(...n),hasLoadedEditedMenu:t(c.store).hasFinishedResolution("getEditedEntityRecord",[...n])})),[e]);return{editedMenu:a,menuEntityData:n,editMenuEntityRecord:t,hasLoadedEditedMenu:r}}function de(e,t){return(0,c.useEntityProp)(ae,re,e,t)}var me=window.wp.notices,pe=(0,_.combineReducers)({mapping:function(e,t){const{type:n,postId:a,...r}=t;return"SET_MENU_ITEM_TO_CLIENT_ID_MAPPING"===n?{...e,[a]:r.mapping}:e||{}},processingQueue:function(e,t){var n;const{type:a,postId:r,...o}=t;switch(a){case"START_PROCESSING_POST":return{...e,[r]:{...e[r],inProgress:!0}};case"FINISH_PROCESSING_POST":return{...e,[r]:{...e[r],inProgress:!1}};case"POP_PENDING_ACTION":const t={...e[r]};var i;return"pendingActions"in t&&(t.pendingActions=null===(i=t.pendingActions)||void 0===i?void 0:i.filter((e=>e!==o.action))),{...e,[r]:t};case"ENQUEUE_AFTER_PROCESSING":const a=(null===(n=e[r])||void 0===n?void 0:n.pendingActions)||[];if(!a.includes(o.action))return{...e,[r]:{...e[r],pendingActions:[...a,o.action]}}}return e||{}},selectedMenuId:function(e=null,t){switch(t.type){case"SET_SELECTED_MENU_ID":return t.menuId}return e}}),_e=window.wp.blocks,ge=window.wp.apiFetch,fe=n.n(ge);const Ee=e=>`navigation-post-${e}`;function ve(e){return{menus:e,per_page:-1}}function ye(e){return function*(t){const n=t.id;if(yield function(e){return{type:"IS_PROCESSING_POST",postId:e}}(n))return yield{type:"ENQUEUE_AFTER_PROCESSING",postId:n,action:e},{status:"pending"};yield{type:"POP_PENDING_ACTION",postId:n,action:e},yield{type:"START_PROCESSING_POST",postId:n};try{yield*e(yield(a=t.meta.menuId,{type:"SELECT",registryName:be,selectorName:"getNavigationPostForMenu",args:[a]}))}finally{yield{type:"FINISH_PROCESSING_POST",postId:n,action:e};const a=yield function(e){return{type:"GET_PENDING_ACTIONS",postId:e}}(n);if(a.length){const e=ye(a[0]);yield*e(t)}}var a}}const he=({label:e="",url:t="",description:n,rel:a,className:r,title:o,type:i,id:l,kind:s,opensInNewTab:c})=>{var u;return i&&"tag"===i&&(i="post_tag"),{title:e,url:t,...(null==n?void 0:n.length)&&{description:n},...(null==a?void 0:a.length)&&{xfn:null==a?void 0:a.trim().split(" ")},...(null==r?void 0:r.length)&&{classes:null==r?void 0:r.trim().split(" ")},...(null==o?void 0:o.length)&&{attr_title:o},...(null===(u=i)||void 0===u?void 0:u.length)&&{object:i},...(null==s?void 0:s.length)&&{type:null==s?void 0:s.replace("-","_")},...l&&"custom"!==i&&{object_id:l},target:c?"_blank":""}},be="core/edit-navigation";function Se(e){return{type:"API_FETCH",request:e}}function Ne(e){return{type:"GET_MENU_ITEM_TO_CLIENT_ID_MAPPING",postId:e}}function Ie(e){return{type:"RESOLVE_MENU_ITEMS",query:ve(e)}}function we(e,t,...n){return{type:"DISPATCH",registryName:e,actionName:t,args:n}}const Me={API_FETCH:({request:e})=>fe()(e),SELECT:(0,_.createRegistryControl)((e=>({registryName:t,selectorName:n,args:a})=>e.select(t)[n](...a))),GET_PENDING_ACTIONS:(0,_.createRegistryControl)((e=>({postId:t})=>{var n;return(null===(n=Ce(e).processingQueue[t])||void 0===n?void 0:n.pendingActions)||[]})),IS_PROCESSING_POST:(0,_.createRegistryControl)((e=>({postId:t})=>{var n;return!(null===(n=Ce(e).processingQueue[t])||void 0===n||!n.inProgress)})),GET_MENU_ITEM_TO_CLIENT_ID_MAPPING:(0,_.createRegistryControl)((e=>({postId:t})=>Ce(e).mapping[t]||{})),DISPATCH:(0,_.createRegistryControl)((e=>({registryName:t,actionName:n,args:a})=>e.dispatch(t)[n](...a))),RESOLVE_MENU_ITEMS:(0,_.createRegistryControl)((e=>({query:t})=>e.resolveSelect("core").getMenuItems(t)))},Ce=e=>e.stores[be].store.getState();var ke=Me;function Te(e){return e?Pe(function(e,t="id",n="parent"){const a=Object.create(null),r=[];for(const n of e)a[n[t]]={...n,children:[]};for(const o of e)o[n]?a[o[n]].children.push(a[o[t]]):r.push(a[o[t]]);return r}(e)):null}function Pe(e){let t={};return{innerBlocks:(0,w.sortBy)(e,"menu_order").map((e=>{var n;if("block"===e.type){const[t]=(0,_e.parse)(e.content.raw);return t||(0,_e.createBlock)("core/freeform",{content:e.content})}const a=function({title:e,xfn:t,classes:n,attr_title:a,object:r,object_id:o,description:i,url:l,type:s,target:c}){var u;return r&&"post_tag"===r&&(r="tag"),{label:(null==e?void 0:e.rendered)||"",...(null===(u=r)||void 0===u?void 0:u.length)&&{type:r},kind:(null==s?void 0:s.replace("_","-"))||"custom",url:l||"",...(null==t?void 0:t.length)&&t.join(" ").trim()&&{rel:t.join(" ").trim()},...(null==n?void 0:n.length)&&n.join(" ").trim()&&{className:n.join(" ").trim()},...(null==a?void 0:a.length)&&{title:a},...o&&"custom"!==r&&{id:o},...(null==i?void 0:i.length)&&{description:i},..."_blank"===c&&{opensInNewTab:!0}}}(e),{innerBlocks:r=[],mapping:o={}}=null!==(n=e.children)&&void 0!==n&&n.length?Pe(e.children):{};t={...t,...o};const i=(0,_e.createBlock)("core/navigation-link",a,r);return t[e.id]=i.clientId,i})),mapping:t}}function*Ae(e){if(!e)return;const t=Re(e);yield De(t);const n=[oe,ie,t.id];yield we("core","startResolution","getEntityRecord",n);const a=yield Ie(e),[r,o]=function(e){const{innerBlocks:t,mapping:n}=Te(e);return[(0,_e.createBlock)("core/navigation",{orientation:"vertical"},t),n]}(a);yield{type:"SET_MENU_ITEM_TO_CLIENT_ID_MAPPING",postId:t.id,mapping:o},yield De(Re(e,r)),yield we("core","finishResolution","getEntityRecord",n)}const Re=(e,t=null)=>{const n=Ee(e);return{id:n,slug:n,status:"draft",type:"page",blocks:t?[t]:[],meta:{menuId:e}}},De=e=>we("core","receiveEntityRecords",oe,ie,e,{id:e.id},!1);function Be(e){var t;return null!==(t=e.selectedMenuId)&&void 0!==t?t:null}const Le=(0,_.createRegistrySelector)((e=>(t,n)=>xe(t,n)?e(c.store).getEditedEntityRecord(oe,ie,Ee(n)):null)),xe=(0,_.createRegistrySelector)((e=>(t,n)=>e(c.store).hasFinishedResolution("getEntityRecord",[oe,ie,Ee(n)]))),Fe=(0,_.createRegistrySelector)((e=>(t,n,a)=>{const r=(0,w.invert)(t.mapping[n]);return e(c.store).getMenuItem(r[a])}));var Oe="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Ge=new Uint8Array(16);function Ue(){if(!Oe)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oe(Ge)}for(var je=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ve=function(e){return"string"==typeof e&&je.test(e)},ze=[],$e=0;$e<256;++$e)ze.push(($e+256).toString(16).substr(1));var He=function(e,t,n){var a=(e=e||{}).random||(e.rng||Ue)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ze[e[t+0]]+ze[e[t+1]]+ze[e[t+2]]+ze[e[t+3]]+"-"+ze[e[t+4]]+ze[e[t+5]]+"-"+ze[e[t+6]]+ze[e[t+7]]+"-"+ze[e[t+8]]+ze[e[t+9]]+"-"+ze[e[t+10]]+ze[e[t+11]]+ze[e[t+12]]+ze[e[t+13]]+ze[e[t+14]]+ze[e[t+15]]).toLowerCase();if(!Ve(n))throw TypeError("Stringified UUID is invalid");return n}(a)};const{ajaxurl:qe}=window;function Qe(e){return{type:"SET_SELECTED_MENU_ID",menuId:e}}const Ye=ye((function*(e){const t=e.meta.menuId,n=yield Ne(e.id),a=(0,w.invert)(n),r=[e.blocks[0]];for(;r.length;){const e=r.pop();if(!(e.clientId in a)){const a=yield Se({path:"/__experimental/menu-items",method:"POST",data:{title:"Placeholder",url:"Placeholder",menu_order:0}});n[a.id]=e.clientId;const r=yield Ie(t);yield we("core","receiveEntityRecords","root","menuItem",[...r,a],ve(t),!1)}r.push(...e.innerBlocks)}yield{type:"SET_MENU_ITEM_TO_CLIENT_ID_MAPPING",postId:e.id,mapping:n}})),Je=ye((function*(e){const t=e.meta.menuId,n=function(e,t){const n={};if(!e||!t)return n;for(const a of e){const e=t[a.id];e&&(n[e]=a)}return n}(yield Ie(t),yield Ne(e.id));try{yield we("core","saveEditedEntityRecord","root","menu",t);const a=yield function(e,t,...n){return{type:"SELECT",registryName:"core",selectorName:"getLastEntitySaveError",args:n}}(0,0,"root","menu",t);if(a)throw new Error(a.message);const r=yield*function*(e,t,n){const{nonce:a,stylesheet:r}=yield Se({path:"/__experimental/customizer-nonces/get-save-nonce"});if(!a)throw new Error;const o=new FormData;return o.append("wp_customize","on"),o.append("customize_theme",r),o.append("nonce",a),o.append("customize_changeset_uuid",He()),o.append("customize_autosaved","on"),o.append("customize_changeset_status","publish"),o.append("action","customize_save"),o.append("customized",function(e,t,n){const a=function e(t,n=0){return t.flatMap(((t,a)=>{var r;return[{block:t,parentId:n,position:a+1}].concat(e(t.innerBlocks,null===(r=i(t))||void 0===r?void 0:r.id))}))}(e).map((({block:e,parentId:n,position:a})=>function(e,n,a){const r=(0,w.omit)(i(e),"menus","meta");let o;return o="core/navigation-link"===e.name?he(e.attributes):{type:"block",content:(0,_e.serialize)(e)},{...r,...o,position:a,nav_menu_term_id:t,menu_item_parent:n,status:"publish",_invalid:!1}}(e,n,a))),r=e=>`nav_menu_item[${e.id}]`,o=(0,w.keyBy)(a,r);for(const e in n){const t=r(n[e]);t in o||(o[t]=!1)}return JSON.stringify(o);function i(e){return(0,w.omit)(n[e.clientId]||{},"_links")}}(n.innerBlocks,e,t)),yield Se({url:qe||"/wp-admin/admin-ajax.php",method:"POST",body:o})}(t,n,e.blocks[0]);if(!r.success)throw new Error(r.data.message);yield we("core","receiveEntityRecords",oe,ie,[e],void 0),yield we(me.store,"createSuccessNotice",(0,v.__)("Navigation saved."),{type:"snackbar"})}catch(e){const t=e?(0,v.sprintf)(
/* translators: %s: The text of an error message (potentially untranslated). */
(0,v.__)("Unable to save: '%s'"),e.message):(0,v.__)("Unable to save: An error ocurred.");yield we(me.store,"createErrorNotice",t,{type:"snackbar"})}})),We={reducer:pe,controls:ke,selectors:o,resolvers:r,actions:i,persist:["selectedMenuId"]},Ke=(0,_.createReduxStore)(be,We);(0,_.registerStore)(be,We);const Xe=e=>{const t=e("core"),n={per_page:-1};return{menus:t.getMenus(n),hasLoadedMenus:t.hasFinishedResolution("getMenus",[n])}};function Ze(){const e=(0,_.useSelect)((e=>e(Ke).getSelectedMenuId()),[]),{setSelectedMenuId:t}=(0,_.useDispatch)(Ke);return[e,t]}const et=(e,t)=>Object.values(e).filter((({menu:e})=>e===t)).map((({name:e})=>e)),tt=(0,v.__)("(untitled menu)"),nt=(0,l.createContext)();function at(){const{enableComplementaryArea:e}=(0,_.useDispatch)(z),[t]=Ze(),[n]=de("name",t),[,a]=(0,l.useContext)(nt),r=null!=n?n:tt;return(0,l.createElement)(p.BlockControls,null,(0,l.createElement)(m.ToolbarGroup,null,(0,l.createElement)(m.ToolbarButton,{"aria-label":(0,v.sprintf)(// translators: %s: the name of a menu.
(0,v.__)("Edit menu name: %s"),r),onClick:()=>{e(le,se),a(!0)}},r)))}const rt=(0,d.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,l.createElement)(e,t):(0,l.createElement)(l.Fragment,null,(0,l.createElement)(at,null),(0,l.createElement)(e,t))),"withMenuName");function ot(e,t){return["core/navigation","core/navigation-link"].includes(t)||(0,w.set)(e,["supports","inserter"],!1),e}const it=(0,d.createHigherOrderComponent)((e=>t=>"core/navigation"!==t.name?(0,l.createElement)(e,t):(0,l.createElement)(e,g({},t,{hasSubmenuIndicatorSetting:!1,hasItemJustificationControls:!1,hasColorSettings:!1}))),"removeNavigationBlockEditUnsupportedFeatures");function lt(e,t){return"core/navigation"!==t?e:{...e,supports:{customClassName:!1,html:!1,inserter:!0},variations:void 0}}function st({className:e,menus:t,onCreate:n,titleText:a,helpText:r,focusInputOnMount:o=!1}){const[i,s]=(0,l.useState)(""),{createErrorNotice:u,createInfoNotice:p,removeNotice:g}=(0,_.useDispatch)(me.store),[f,y]=(0,l.useState)(!1),{saveMenu:h}=(0,_.useDispatch)(c.store),b=(0,d.useFocusOnMount)(o);return(0,l.createElement)("form",{className:E()("edit-navigation-add-menu",e),onSubmit:async e=>{if(e.preventDefault(),!i.length)return;if(g("edit-navigation-error"),(0,w.some)(t,(e=>t=>t.name.toLowerCase()===e.toLowerCase())(i))){const e=(0,v.sprintf)(// translators: %s: the name of a menu.
(0,v.__)("The menu name %s conflicts with another menu name. Please try another."),i);return void u(e,{id:"edit-navigation-error"})}y(!0);const a=await h({name:i});y(!1),a&&(p((0,v.__)("Menu created"),{type:"snackbar",isDismissible:!0}),n&&n(a.id))}},a&&(0,l.createElement)("h3",{className:"edit-navigation-add-menu__title"},a),(0,l.createElement)(m.TextControl,{ref:b,label:(0,v.__)("Menu name"),value:i,onChange:s,help:r}),(0,l.createElement)(m.Button,{className:"edit-navigation-add-menu__create-menu-button",type:"submit",variant:"primary",disabled:!i.length,isBusy:f},(0,v.__)("Create menu")))}function ct({menus:e,selectedMenuId:t,onSelectMenu:n=w.noop}){const[a,r]=(0,l.useState)(!1),o=()=>r(!1);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(m.MenuGroup,null,(0,l.createElement)(m.MenuItemsChoice,{value:t,onSelect:n,choices:e.map((({id:e,name:t})=>({value:e,label:t,"aria-label":(0,v.sprintf)(
/* translators: %s: The name of a menu. */
(0,v.__)("Switch to '%s'"),t)})))})),(0,l.createElement)(m.MenuGroup,{hideSeparator:!0},(0,l.createElement)(m.MenuItem,{variant:"primary",onClick:()=>r(!0)},(0,v.__)("Create a new menu")),a&&(0,l.createElement)(m.Modal,{title:(0,v.__)("Create a new menu"),onRequestClose:o},(0,l.createElement)(st,{className:"edit-navigation-menu-switcher__add-menu",menus:e,onCreate:e=>{o(),n(e)},helpText:(0,v.__)("A short descriptive name for your menu.")}))))}function ut({onCreate:e,onSelectMenu:t,menus:n}){const a=(null==n?void 0:n.length)>0;return(0,l.createElement)("div",{className:"edit-navigation-empty-state"},a&&(0,l.createElement)("h4",null,(0,v.__)("Choose a menu to edit:")),(0,l.createElement)(m.Card,null,(0,l.createElement)(m.CardBody,null,a?(0,l.createElement)(m.NavigableMenu,null,(0,l.createElement)(ct,{onSelectMenu:t,menus:n})):(0,l.createElement)(st,{onCreate:e,titleText:(0,v.__)("Create your first menu"),helpText:(0,v.__)("A short descriptive name for your menu."),focusInputOnMount:!0}))))}class dt extends l.Component{constructor(){super(...arguments),this.reboot=this.reboot.bind(this),this.state={error:null}}componentDidCatch(e){this.setState({error:e})}reboot(){this.props.onError&&this.props.onError()}render(){const{error:e}=this.state;return e?(0,l.createElement)(p.Warning,{className:"navigation-editor-error-boundary",actions:[(0,l.createElement)(m.Button,{key:"recovery",onClick:this.reboot,variant:"secondary"},(0,v.__)("Attempt Recovery"))]},(0,v.__)("The navigation editor has encountered an unexpected error.")):this.props.children}}var mt=dt,pt=window.wp.keyboardShortcuts;function _t({saveBlocks:e}){(0,pt.useShortcut)("core/edit-navigation/save-menu",(0,l.useCallback)((t=>{t.preventDefault(),e()})),{bindGlobal:!0});const{redo:t,undo:n}=(0,_.useDispatch)(c.store);return(0,pt.useShortcut)("core/edit-navigation/undo",(e=>{n(),e.preventDefault()}),{bindGlobal:!0}),(0,pt.useShortcut)("core/edit-navigation/redo",(e=>{t(),e.preventDefault()}),{bindGlobal:!0}),null}_t.Register=function(){const{registerShortcut:e}=(0,_.useDispatch)(pt.store);return(0,l.useEffect)((()=>{e({name:"core/edit-navigation/save-menu",category:"global",description:(0,v.__)("Save the navigation currently being edited."),keyCombination:{modifier:"primary",character:"s"}}),e({name:"core/edit-navigation/undo",category:"global",description:(0,v.__)("Undo your last changes."),keyCombination:{modifier:"primary",character:"z"}}),e({name:"core/edit-navigation/redo",category:"global",description:(0,v.__)("Redo your last undo."),keyCombination:{modifier:"primaryShift",character:"z"}})}),[e]),null};var gt=_t,ft=(0,l.createElement)(y.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,l.createElement)(y.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function Et({sidebarName:e}){const{enableComplementaryArea:t}=(0,_.useDispatch)(z),[n,a]=e===se?// translators: ARIA label for the Menu sidebar tab, selected.
[(0,v.__)("Menu (selected)"),"is-active"]:// translators: ARIA label for the Menu Settings Sidebar tab, not selected.
[(0,v.__)("Menu"),""],[r,o]=e===ce?// translators: ARIA label for the Block Settings Sidebar tab, selected.
[(0,v.__)("Block (selected)"),"is-active"]:// translators: ARIA label for the Block Settings Sidebar tab, not selected.
[(0,v.__)("Block"),""];return(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)(m.Button,{onClick:()=>t(le,se),className:`edit-navigation-sidebar__panel-tab ${a}`,"aria-label":n,"data-label":(0,v.__)("Menu")},// translators: Text label for the Menu Settings Sidebar tab.
(0,v.__)("Menu"))),(0,l.createElement)("li",null,(0,l.createElement)(m.Button,{onClick:()=>t(le,ce),className:`edit-navigation-sidebar__panel-tab ${o}`,"aria-label":r,"data-label":(0,v.__)("Block")},// translators: Text label for the Block Settings Sidebar tab.
(0,v.__)("Block"))))}function vt(){const[e,t]=(0,l.useContext)(nt),[n]=Ze(),[a,r]=de("name",n),o=(0,l.useRef)();return(0,l.useEffect)((()=>{e&&o.current.focus()}),[e]),(0,l.createElement)(m.TextControl,{ref:o,help:(0,v.__)("A short, descriptive name used to refer to this menu elsewhere."),label:(0,v.__)("Name"),onBlur:()=>t(!1),className:"edit-navigation-name-editor__text-control",value:a||"",onChange:r})}function yt({menuId:e}){const[t,n]=de("auto_add",e);return(0,l.createElement)(m.ToggleControl,{label:(0,v.__)("Add new pages"),help:(0,v.__)("Automatically add published top-level pages to this menu."),checked:null!=t&&t,onChange:n})}function ht({menuId:e}){return(0,l.createElement)(m.PanelBody,{title:(0,v.__)("Menu settings")},(0,l.createElement)(vt,null),(0,l.createElement)(yt,{menuId:e}))}function bt({menus:e,selectedMenuId:t,onSelectMenu:n}){const{menuLocations:a,assignMenuToLocation:r,toggleMenuLocationAssignment:o}=function(){const[e,t]=(0,l.useState)(null),[n]=Ze(),{editMenuEntityRecord:a,menuEntityData:r}=ue(n);(0,l.useEffect)((()=>{let e=!0;return(async()=>{const n=await fe()({method:"GET",path:"/__experimental/menu-locations/"});e&&t(n)})(),()=>e=!1}),[]);const o=(0,l.useCallback)((async(n,o)=>{const i=e[n].menu,l=(0,w.merge)(e,{[n]:{menu:o}});t(l),a(...r,{locations:et(l,o||i)})}),[e]);return{menuLocations:(0,l.useMemo)((()=>Object.values(e||{})),[e]),assignMenuToLocation:o,toggleMenuLocationAssignment:(t,n)=>{const a=e[t].menu===n?0:n;o(t,a)}}}(),[i,s]=(0,l.useState)(!1),c=()=>s(!1);if(!a||null==e||!e.length)return(0,l.createElement)(m.Spinner,null);if(!a.length)return(0,l.createElement)(m.PanelBody,{title:(0,v.__)("Theme locations")},(0,l.createElement)("p",null,(0,v.__)("There are no available menu locations.")));const u=(0,v.sprintf)(// translators: Number of available theme locations.
(0,v.__)("Your current theme provides %d different locations to place menu."),a.length),d=(0,v.sprintf)(// translators: Number of available theme locations.
(0,v.__)("Your current theme supports %d different locations. Select which menu appears in each location."),a.length),p=a.map((({name:n,description:a,menu:r})=>{const i=e.filter((({id:e})=>![0,t].includes(e))).find((({id:e})=>e===r));return(0,l.createElement)("li",{key:n,className:"edit-navigation-manage-locations__checklist-item"},(0,l.createElement)(m.CheckboxControl,{className:"edit-navigation-manage-locations__menu-location-checkbox",checked:r===t,onChange:()=>o(n,t),label:a,help:i&&(0,v.sprintf)(// translators: menu name.
(0,v.__)("Currently using %s"),i.name)}))})),_=a.map((t=>(0,l.createElement)("div",{key:t.name,className:"edit-navigation-manage-locations__menu-entry"},(0,l.createElement)(m.SelectControl,{key:t.name,className:"edit-navigation-manage-locations__select-menu",label:t.description,labelPosition:"top",value:t.menu,options:[{value:0,label:(0,v.__)("Select a Menu"),key:0},...e.map((({id:e,name:t})=>({key:e,value:e,label:t})))],onChange:e=>{r(t.name,Number(e))}}),(0,l.createElement)(m.Button,{variant:"secondary",style:{visibility:t.menu?"visible":"hidden"},className:"edit-navigation-manage-locations__edit-button",onClick:()=>(c(),n(t.menu))},(0,v.__)("Edit")))));return(0,l.createElement)(m.PanelBody,{title:(0,v.__)("Theme locations")},(0,l.createElement)("div",{className:"edit-navigation-manage-locations__theme-location-text-main"},u),(0,l.createElement)("ul",{className:"edit-navigation-manage-locations__checklist"},p),(0,l.createElement)(m.Button,{variant:"secondary",className:"edit-navigation-manage-locations__open-menu-locations-modal-button","aria-expanded":i,onClick:()=>s(!0)},(0,v.__)("Manage locations")),i&&(0,l.createElement)(m.Modal,{className:"edit-navigation-manage-locations__modal",title:(0,v.__)("Manage locations"),onRequestClose:c},(0,l.createElement)("div",{className:"edit-navigation-manage-locations__theme-location-text-modal"},d),_))}function St({onDeleteMenu:e,isMenuBeingDeleted:t}){return(0,l.createElement)(m.PanelBody,null,(0,l.createElement)(m.Button,{className:"edit-navigation-inspector-additions__delete-menu-button",variant:"secondary",isDestructive:!0,isBusy:t,onClick:()=>{window.confirm((0,v.__)("Are you sure you want to delete this navigation? This action cannot be undone."))&&e()}},(0,v.__)("Delete menu")))}function Nt({menuId:e,menus:t,isMenuBeingDeleted:n,onDeleteMenu:a,onSelectMenu:r}){const o=(0,d.useViewportMatch)("medium"),{sidebar:i,hasBlockSelection:s,hasSidebarEnabled:c}=(0,_.useSelect)((e=>{const t=e(z).getActiveComplementaryArea(le),n=[se,ce].includes(t);return{sidebar:t,hasBlockSelection:!!e(p.store).getBlockSelectionStart(),hasSidebarEnabled:n}}),[]),{enableComplementaryArea:u}=(0,_.useDispatch)(z);(0,l.useEffect)((()=>{c&&u(le,s?ce:se)}),[s,c]);let m=i;return c||(m=s?ce:se),(0,l.createElement)(te,{className:"edit-navigation-sidebar"
/* translators: button label text should, if possible, be under 16 characters. */,title:(0,v.__)("Settings"),closeLabel:(0,v.__)("Close settings"),scope:le,identifier:m,icon:ft,isActiveByDefault:o,header:(0,l.createElement)(Et,{sidebarName:m}),headerClassName:"edit-navigation-sidebar__panel-tabs",isPinnable:!0},m===se&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(ht,{menuId:e}),(0,l.createElement)(bt,{menus:t,selectedMenuId:e,onSelectMenu:r}),(0,l.createElement)(St,{onDeleteMenu:a,isMenuBeingDeleted:n})),m===ce&&(0,l.createElement)(p.BlockInspector,null))}function It({navigationPost:e}){const{isDirty:t}=(0,_.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e(c.store);return{isDirty:t().length>0}}),[]),{saveNavigationPost:n}=(0,_.useDispatch)(Ke),a=!t||!e;return(0,l.createElement)(m.Button,{className:"edit-navigation-toolbar__save-button",variant:"primary",onClick:()=>{n(e)},disabled:a},(0,v.__)("Save"))}function wt({isMenuSelected:e,menus:t,selectedMenuId:n,onSelectMenu:a,isPending:r,navigationPost:o}){const[i]=de("name",n);let s;return s=i?(0,v.sprintf)(// translators: Name of the menu being edited, e.g. 'Main Menu'.
(0,v.__)("Editing: %s"),i):r?(0,v.__)("Loading â€¦"):(0,v.__)("No menus available"),(0,l.createElement)("div",{className:"edit-navigation-header"},(0,l.createElement)("h1",{className:"edit-navigation-header__title"},(0,v.__)("Navigation")),(0,l.createElement)("h2",{className:"edit-navigation-header__subtitle"},e&&s),e&&(0,l.createElement)("div",{className:"edit-navigation-header__actions"},(0,l.createElement)(m.DropdownMenu,{icon:null,toggleProps:{children:(0,v.__)("Switch menu"),"aria-label":(0,v.__)("Switch menu, or create a new menu"),showTooltip:!1,variant:"tertiary",disabled:!(null!=t&&t.length),__experimentalIsFocusable:!0},popoverProps:{className:"edit-navigation-header__menu-switcher-dropdown",position:"bottom center"}},(({onClose:e})=>(0,l.createElement)(ct,{menus:t,selectedMenuId:n,onSelectMenu:t=>{a(t),e()}}))),(0,l.createElement)(It,{navigationPost:o}),(0,l.createElement)(X.Slot,{scope:"core/edit-navigation"})))}function Mt(){const{removeNotice:e}=(0,_.useDispatch)(me.store),t=(0,_.useSelect)((e=>e(me.store).getNotices()),[]),n=(0,w.filter)(t,{isDismissible:!0,type:"default"}),a=(0,w.filter)(t,{isDismissible:!1,type:"default"}),r=(0,w.filter)(t,{type:"snackbar"});return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(m.NoticeList,{notices:a,className:"edit-navigation-notices__notice-list"}),(0,l.createElement)(m.NoticeList,{notices:n,className:"edit-navigation-notices__notice-list",onRemove:e}),(0,l.createElement)(m.SnackbarList,{notices:r,className:"edit-navigation-notices__snackbar-list",onRemove:e}))}function Ct({isPending:e}){return(0,l.createElement)("div",{className:"edit-navigation-editor"},e?(0,l.createElement)(m.Spinner,null):(0,l.createElement)("div",{className:"editor-styles-wrapper"},(0,l.createElement)(p.WritingFlow,null,(0,l.createElement)(p.ObserveTyping,null,(0,l.createElement)(p.BlockList,null)))))}function kt(){const e=(0,_.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e(c.store);return t().length>0}),[]);return(0,l.useEffect)((()=>{const t=t=>{if(e)return t.returnValue=(0,v.__)("You have unsaved changes. If you proceed, they will be lost."),t.returnValue};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e]),null}const Tt={
/* translators: accessibility text for the navigation screen top bar landmark region. */
header:(0,v.__)("Navigation top bar"),
/* translators: accessibility text for the navigation screen content landmark region. */
body:(0,v.__)("Navigation menu blocks"),
/* translators: accessibility text for the navigation screen settings landmark region. */
sidebar:(0,v.__)("Navigation settings")};function Pt({blockEditorSettings:e}){const t=(0,p.__unstableUseBlockSelectionClearer)(),[n,a]=(0,l.useState)(!1),{saveNavigationPost:r}=(0,_.useDispatch)(Ke),{menus:o,hasLoadedMenus:i,hasFinishedInitialLoad:s,selectedMenuId:u,navigationPost:d,isMenuBeingDeleted:g,selectMenu:f,deleteMenu:E,isMenuSelected:y}=function(){var e;const{deleteMenu:t}=(0,_.useDispatch)(c.store),[n,a]=Ze(),[r,o]=(0,l.useState)(!1),{editedMenu:i,hasLoadedEditedMenu:s}=ue(n),{menus:u,hasLoadedMenus:d}=(0,_.useSelect)(Xe,[]);(0,l.useEffect)((()=>{var e;!s||null!==(e=Object.keys(i))&&void 0!==e&&e.length||a(null)}),[s,i]);const{createErrorNotice:m,createInfoNotice:p}=(0,_.useDispatch)(me.store),g=(0,_.useSelect)((e=>e(c.store).isDeletingEntityRecord("root","menu",n)),[n]),f=(null==u||null===(e=u.find((({id:e})=>e===n)))||void 0===e?void 0:e.name)||"";(0,l.useEffect)((()=>{d&&o(!0)}),[d]);const E=(0,_.useSelect)((e=>{if(n)return e(Ke).getNavigationPostForMenu(n)}),[n]);return{menus:u,hasLoadedMenus:d,hasFinishedInitialLoad:r,selectedMenuId:n,navigationPost:E,isMenuBeingDeleted:g,selectMenu:a,deleteMenu:async()=>{await t(n,{force:!0})?(a(null),p((0,v.sprintf)(// translators: %s: the name of a menu.
(0,v.__)('"%s" menu has been deleted'),f),{type:"snackbar",isDismissible:!0})):m((0,v.__)("Menu deletion unsuccessful"))},isMenuSelected:!!n}}(),[h,b,S]=function(e){const{createMissingMenuItems:t}=(0,_.useDispatch)(Ke),[n,a,r]=(0,c.useEntityBlockEditor)(oe,ie,{id:null==e?void 0:e.id});return[n,a,(0,l.useCallback)((async(...n)=>{await r(...n),t(e)}),[r,e])]}(d),{hasSidebarEnabled:N}=(0,_.useSelect)((e=>({hasSidebarEnabled:!!e(z).getActiveComplementaryArea("core/edit-navigation")})),[]);(0,l.useEffect)((()=>{!u&&null!=o&&o.length&&f(o[0].id)}),[u,o]),function(e){const{lastSaveError:t,lastDeleteError:n}=(0,_.useSelect)((t=>({lastSaveError:t(c.store).getLastEntitySaveError(ae,re),lastDeleteError:t(c.store).getLastEntityDeleteError(ae,re,e)})),[e]),{createErrorNotice:a}=(0,_.useDispatch)(me.store),r=e=>{const t=(new window.DOMParser).parseFromString(e.message,"text/html").body.textContent||"";a(t,{id:"edit-navigation-error"})};(0,l.useEffect)((()=>{t&&r(t)}),[t]),(0,l.useEffect)((()=>{n&&r(n)}),[n])}(u);const I=!!(null!=o&&o.length&&d&&y);return(0,l.createElement)(mt,null,(0,l.createElement)("div",{hidden:!g,className:"edit-navigation-layout__overlay"}),(0,l.createElement)(m.SlotFillProvider,null,(0,l.createElement)(p.BlockEditorKeyboardShortcuts.Register,null),(0,l.createElement)(gt.Register,null),(0,l.createElement)(gt,{saveBlocks:()=>r(d)}),(0,l.createElement)(Mt,null),(0,l.createElement)(p.BlockEditorProvider,{value:h,onInput:b,onChange:S,settings:{...e,templateLock:"all"},useSubRegistry:!1},(0,l.createElement)(nt.Provider,{value:(0,l.useMemo)((()=>[n,a]),[n])},(0,l.createElement)(ne,{className:"edit-navigation-layout",labels:Tt,header:(0,l.createElement)(wt,{isMenuSelected:y,isPending:!i,menus:o,selectedMenuId:u,onSelectMenu:f,navigationPost:d}),content:(0,l.createElement)(l.Fragment,null,!s&&(0,l.createElement)(m.Spinner,null),!y&&s&&(0,l.createElement)(ut,{onSelectMenu:f,onCreate:f,menus:o}),I&&(0,l.createElement)("div",{className:"edit-navigation-layout__content-area",ref:t},(0,l.createElement)(p.BlockTools,null,(0,l.createElement)(Ct,{isPending:!i,blocks:h})))),sidebar:N&&(0,l.createElement)(te.Slot,{scope:"core/edit-navigation"})}),y&&(0,l.createElement)(Nt,{menus:o,menuId:u,onSelectMenu:f,onDeleteMenu:E,isMenuBeingDeleted:g})),(0,l.createElement)(kt,null)),(0,l.createElement)(m.Popover.Slot,null)))}function At(e,t){var n;n=!t.blockNavMenus,(0,u.addFilter)("editor.BlockEdit","core/edit-navigation/with-menu-name",rt),n&&(0,u.addFilter)("blocks.registerBlockType","core/edit-navigation/disable-inserting-non-navigation-blocks",ot),(0,u.addFilter)("editor.BlockEdit","core/edit-navigation/remove-navigation-block-edit-unsupported-features",it),(0,u.addFilter)("blocks.registerBlockType","core/edit-navigation/remove-navigation-block-settings-unsupported-features",lt),(0,s.registerCoreBlocks)(),(0,s.__experimentalRegisterExperimentalCoreBlocks)(),t.__experimentalFetchLinkSuggestions=(e,n)=>(0,c.__experimentalFetchLinkSuggestions)(e,n,t),(0,l.render)((0,l.createElement)(Pt,{blockEditorSettings:t}),document.getElementById(e))}}(),(window.wp=window.wp||{}).editNavigation=a}();