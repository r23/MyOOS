{"version":3,"file":"./build/core-data/index.min.js","mappings":"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","sources":["webpack://wp/./node_modules/equivalent-key-map/equivalent-key-map.js","webpack://wp/./node_modules/memize/index.js","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/external window \"lodash\"","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/if-matching-action.js","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/replace-action.js","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/conservative-map-item.js","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/on-sub-key.js","webpack://wp/external window [\"wp\",\"apiFetch\"]","webpack://wp/external window [\"wp\",\"i18n\"]","webpack://wp/./node_modules/uuid/dist/esm-browser/rng.js","webpack://wp/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://wp/./node_modules/uuid/dist/esm-browser/regex.js","webpack://wp/./node_modules/uuid/dist/esm-browser/validate.js","webpack://wp/./node_modules/uuid/dist/esm-browser/v4.js","webpack://wp/external window [\"wp\",\"url\"]","webpack://wp/external window [\"wp\",\"deprecated\"]","webpack://wp/./packages/core-data/build-module/queried-data/@wordpress/core-data/src/queried-data/actions.js","webpack://wp/./packages/core-data/build-module/batch/@wordpress/core-data/src/batch/default-processor.js","webpack://wp/./packages/core-data/build-module/batch/@wordpress/core-data/src/batch/create-batch.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/name.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/actions.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/entities.ts","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/get-normalized-comma-separable.js","webpack://wp/./packages/core-data/build-module/queried-data/@wordpress/core-data/src/queried-data/get-query-parts.js","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/with-weak-map-cache.js","webpack://wp/./packages/core-data/build-module/queried-data/@wordpress/core-data/src/queried-data/reducer.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/reducer.js","webpack://wp/./node_modules/rememo/es/rememo.js","webpack://wp/./packages/core-data/build-module/queried-data/@wordpress/core-data/src/queried-data/selectors.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/selectors.ts","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/is-raw-attribute.js","webpack://wp/./packages/core-data/build-module/utils/@wordpress/core-data/src/utils/forward-resolver.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/resolvers.js","webpack://wp/./packages/core-data/build-module/locks/@wordpress/core-data/src/locks/utils.js","webpack://wp/./packages/core-data/build-module/locks/@wordpress/core-data/src/locks/reducer.js","webpack://wp/./packages/core-data/build-module/locks/@wordpress/core-data/src/locks/selectors.js","webpack://wp/./packages/core-data/build-module/locks/@wordpress/core-data/src/locks/engine.js","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/entity-provider.js","webpack://wp/./packages/core-data/build-module/hooks/@wordpress/core-data/src/hooks/memoize.js","webpack://wp/./packages/core-data/build-module/hooks/@wordpress/core-data/src/hooks/constants.ts","webpack://wp/./packages/core-data/build-module/hooks/@wordpress/core-data/src/hooks/use-query-select.ts","webpack://wp/./packages/core-data/build-module/hooks/@wordpress/core-data/src/hooks/use-entity-record.ts","webpack://wp/./packages/core-data/build-module/hooks/@wordpress/core-data/src/hooks/use-entity-records.ts","webpack://wp/external window [\"wp\",\"htmlEntities\"]","webpack://wp/./packages/core-data/build-module/fetch/@wordpress/core-data/src/fetch/__experimental-fetch-link-suggestions.js","webpack://wp/./packages/core-data/build-module/fetch/@wordpress/core-data/src/fetch/__experimental-fetch-url-data.js","webpack://wp/./packages/core-data/build-module/@wordpress/core-data/src/index.js","webpack://wp/./packages/core-data/build-module/locks/@wordpress/core-data/src/locks/actions.js"],"sourcesContent":["'use strict';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\n/**\n * Given an instance of EquivalentKeyMap, returns its internal value pair tuple\n * for a key, if one exists. The tuple members consist of the last reference\n * value for the key (used in efficient subsequent lookups) and the value\n * assigned for the key at the leaf node.\n *\n * @param {EquivalentKeyMap} instance EquivalentKeyMap instance.\n * @param {*} key                     The key for which to return value pair.\n *\n * @return {?Array} Value pair, if exists.\n */\nfunction getValuePair(instance, key) {\n  var _map = instance._map,\n      _arrayTreeMap = instance._arrayTreeMap,\n      _objectTreeMap = instance._objectTreeMap; // Map keeps a reference to the last object-like key used to set the\n  // value, which can be used to shortcut immediately to the value.\n\n  if (_map.has(key)) {\n    return _map.get(key);\n  } // Sort keys to ensure stable retrieval from tree.\n\n\n  var properties = Object.keys(key).sort(); // Tree by type to avoid conflicts on numeric object keys, empty value.\n\n  var map = Array.isArray(key) ? _arrayTreeMap : _objectTreeMap;\n\n  for (var i = 0; i < properties.length; i++) {\n    var property = properties[i];\n    map = map.get(property);\n\n    if (map === undefined) {\n      return;\n    }\n\n    var propertyValue = key[property];\n    map = map.get(propertyValue);\n\n    if (map === undefined) {\n      return;\n    }\n  }\n\n  var valuePair = map.get('_ekm_value');\n\n  if (!valuePair) {\n    return;\n  } // If reached, it implies that an object-like key was set with another\n  // reference, so delete the reference and replace with the current.\n\n\n  _map.delete(valuePair[0]);\n\n  valuePair[0] = key;\n  map.set('_ekm_value', valuePair);\n\n  _map.set(key, valuePair);\n\n  return valuePair;\n}\n/**\n * Variant of a Map object which enables lookup by equivalent (deeply equal)\n * object and array keys.\n */\n\n\nvar EquivalentKeyMap =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructs a new instance of EquivalentKeyMap.\n   *\n   * @param {Iterable.<*>} iterable Initial pair of key, value for map.\n   */\n  function EquivalentKeyMap(iterable) {\n    _classCallCheck(this, EquivalentKeyMap);\n\n    this.clear();\n\n    if (iterable instanceof EquivalentKeyMap) {\n      // Map#forEach is only means of iterating with support for IE11.\n      var iterablePairs = [];\n      iterable.forEach(function (value, key) {\n        iterablePairs.push([key, value]);\n      });\n      iterable = iterablePairs;\n    }\n\n    if (iterable != null) {\n      for (var i = 0; i < iterable.length; i++) {\n        this.set(iterable[i][0], iterable[i][1]);\n      }\n    }\n  }\n  /**\n   * Accessor property returning the number of elements.\n   *\n   * @return {number} Number of elements.\n   */\n\n\n  _createClass(EquivalentKeyMap, [{\n    key: \"set\",\n\n    /**\n     * Add or update an element with a specified key and value.\n     *\n     * @param {*} key   The key of the element to add.\n     * @param {*} value The value of the element to add.\n     *\n     * @return {EquivalentKeyMap} Map instance.\n     */\n    value: function set(key, value) {\n      // Shortcut non-object-like to set on internal Map.\n      if (key === null || _typeof(key) !== 'object') {\n        this._map.set(key, value);\n\n        return this;\n      } // Sort keys to ensure stable assignment into tree.\n\n\n      var properties = Object.keys(key).sort();\n      var valuePair = [key, value]; // Tree by type to avoid conflicts on numeric object keys, empty value.\n\n      var map = Array.isArray(key) ? this._arrayTreeMap : this._objectTreeMap;\n\n      for (var i = 0; i < properties.length; i++) {\n        var property = properties[i];\n\n        if (!map.has(property)) {\n          map.set(property, new EquivalentKeyMap());\n        }\n\n        map = map.get(property);\n        var propertyValue = key[property];\n\n        if (!map.has(propertyValue)) {\n          map.set(propertyValue, new EquivalentKeyMap());\n        }\n\n        map = map.get(propertyValue);\n      } // If an _ekm_value exists, there was already an equivalent key. Before\n      // overriding, ensure that the old key reference is removed from map to\n      // avoid memory leak of accumulating equivalent keys. This is, in a\n      // sense, a poor man's WeakMap, while still enabling iterability.\n\n\n      var previousValuePair = map.get('_ekm_value');\n\n      if (previousValuePair) {\n        this._map.delete(previousValuePair[0]);\n      }\n\n      map.set('_ekm_value', valuePair);\n\n      this._map.set(key, valuePair);\n\n      return this;\n    }\n    /**\n     * Returns a specified element.\n     *\n     * @param {*} key The key of the element to return.\n     *\n     * @return {?*} The element associated with the specified key or undefined\n     *              if the key can't be found.\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      // Shortcut non-object-like to get from internal Map.\n      if (key === null || _typeof(key) !== 'object') {\n        return this._map.get(key);\n      }\n\n      var valuePair = getValuePair(this, key);\n\n      if (valuePair) {\n        return valuePair[1];\n      }\n    }\n    /**\n     * Returns a boolean indicating whether an element with the specified key\n     * exists or not.\n     *\n     * @param {*} key The key of the element to test for presence.\n     *\n     * @return {boolean} Whether an element with the specified key exists.\n     */\n\n  }, {\n    key: \"has\",\n    value: function has(key) {\n      if (key === null || _typeof(key) !== 'object') {\n        return this._map.has(key);\n      } // Test on the _presence_ of the pair, not its value, as even undefined\n      // can be a valid member value for a key.\n\n\n      return getValuePair(this, key) !== undefined;\n    }\n    /**\n     * Removes the specified element.\n     *\n     * @param {*} key The key of the element to remove.\n     *\n     * @return {boolean} Returns true if an element existed and has been\n     *                   removed, or false if the element does not exist.\n     */\n\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      if (!this.has(key)) {\n        return false;\n      } // This naive implementation will leave orphaned child trees. A better\n      // implementation should traverse and remove orphans.\n\n\n      this.set(key, undefined);\n      return true;\n    }\n    /**\n     * Executes a provided function once per each key/value pair, in insertion\n     * order.\n     *\n     * @param {Function} callback Function to execute for each element.\n     * @param {*}        thisArg  Value to use as `this` when executing\n     *                            `callback`.\n     */\n\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback) {\n      var _this = this;\n\n      var thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this;\n\n      this._map.forEach(function (value, key) {\n        // Unwrap value from object-like value pair.\n        if (key !== null && _typeof(key) === 'object') {\n          value = value[1];\n        }\n\n        callback.call(thisArg, value, key, _this);\n      });\n    }\n    /**\n     * Removes all elements.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this._map = new Map();\n      this._arrayTreeMap = new Map();\n      this._objectTreeMap = new Map();\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this._map.size;\n    }\n  }]);\n\n  return EquivalentKeyMap;\n}();\n\nmodule.exports = EquivalentKeyMap;\n","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {Function} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {F & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize( fn, options ) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized( /* ...args */ ) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs, i;\n\n\t\tsearchCache: while ( node ) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif ( node.args.length !== arguments.length ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( node.args[ i ] !== arguments[ i ] ) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== head ) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif ( node === tail ) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ ( node.prev ).next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ ( head ).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply( null, args ),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( head ) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif ( size === /** @type {MemizeOptions} */ ( options ).maxSize ) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ ( tail ).prev;\n\t\t\t/** @type {MemizeCacheNode} */ ( tail ).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function() {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\tif ( process.env.NODE_ENV === 'test' ) {\n\t\t// Cache is not exposed in the public API, but used in tests to ensure\n\t\t// expected list progression\n\t\tmemoized.getCache = function() {\n\t\t\treturn [ head, tail, size ];\n\t\t};\n\t}\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nmodule.exports = memize;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"lodash\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","/** @typedef {import('../types').AnyFunction} AnyFunction */\n\n/**\n * A higher-order reducer creator which invokes the original reducer only if\n * the dispatching action matches the given predicate, **OR** if state is\n * initializing (undefined).\n *\n * @param {AnyFunction} isMatch Function predicate for allowing reducer call.\n *\n * @return {AnyFunction} Higher-order reducer.\n */\nconst ifMatchingAction = ( isMatch ) => ( reducer ) => ( state, action ) => {\n\tif ( state === undefined || isMatch( action ) ) {\n\t\treturn reducer( state, action );\n\t}\n\n\treturn state;\n};\n\nexport default ifMatchingAction;\n","/** @typedef {import('../types').AnyFunction} AnyFunction */\n\n/**\n * Higher-order reducer creator which substitutes the action object before\n * passing to the original reducer.\n *\n * @param {AnyFunction} replacer Function mapping original action to replacement.\n *\n * @return {AnyFunction} Higher-order reducer.\n */\nconst replaceAction = ( replacer ) => ( reducer ) => ( state, action ) => {\n\treturn reducer( state, replacer( action ) );\n};\n\nexport default replaceAction;\n","/**\n * External dependencies\n */\nimport { isEqual } from 'lodash';\n\n/**\n * Given the current and next item entity record, returns the minimally \"modified\"\n * result of the next item, preferring value references from the original item\n * if equal. If all values match, the original item is returned.\n *\n * @param {Object} item     Original item.\n * @param {Object} nextItem Next item.\n *\n * @return {Object} Minimally modified merged item.\n */\nexport default function conservativeMapItem( item, nextItem ) {\n\t// Return next item in its entirety if there is no original item.\n\tif ( ! item ) {\n\t\treturn nextItem;\n\t}\n\n\tlet hasChanges = false;\n\tconst result = {};\n\tfor ( const key in nextItem ) {\n\t\tif ( isEqual( item[ key ], nextItem[ key ] ) ) {\n\t\t\tresult[ key ] = item[ key ];\n\t\t} else {\n\t\t\thasChanges = true;\n\t\t\tresult[ key ] = nextItem[ key ];\n\t\t}\n\t}\n\n\tif ( ! hasChanges ) {\n\t\treturn item;\n\t}\n\n\t// Only at this point, backfill properties from the original item which\n\t// weren't explicitly set into the result above. This is an optimization\n\t// to allow `hasChanges` to return early.\n\tfor ( const key in item ) {\n\t\tif ( ! result.hasOwnProperty( key ) ) {\n\t\t\tresult[ key ] = item[ key ];\n\t\t}\n\t}\n\n\treturn result;\n}\n","/** @typedef {import('../types').AnyFunction} AnyFunction */\n\n/**\n * Higher-order reducer creator which creates a combined reducer object, keyed\n * by a property on the action object.\n *\n * @param {string} actionProperty Action property by which to key object.\n *\n * @return {AnyFunction} Higher-order reducer.\n */\nexport const onSubKey = ( actionProperty ) => ( reducer ) => (\n\tstate = {},\n\taction\n) => {\n\t// Retrieve subkey from action. Do not track if undefined; useful for cases\n\t// where reducer is scoped by action shape.\n\tconst key = action[ actionProperty ];\n\tif ( key === undefined ) {\n\t\treturn state;\n\t}\n\n\t// Avoid updating state if unchanged. Note that this also accounts for a\n\t// reducer which returns undefined on a key which is not yet tracked.\n\tconst nextKeyState = reducer( state[ key ], action );\n\tif ( nextKeyState === state[ key ] ) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\t...state,\n\t\t[ key ]: nextKeyState,\n\t};\n};\n\nexport default onSubKey;\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"deprecated\"];","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\n\n/**\n * Returns an action object used in signalling that items have been received.\n *\n * @param {Array}   items Items received.\n * @param {?Object} edits Optional edits to reset.\n *\n * @return {Object} Action object.\n */\nexport function receiveItems( items, edits ) {\n\treturn {\n\t\ttype: 'RECEIVE_ITEMS',\n\t\titems: castArray( items ),\n\t\tpersistedEdits: edits,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that entity records have been\n * deleted and they need to be removed from entities state.\n *\n * @param {string}              kind            Kind of the removed entities.\n * @param {string}              name            Name of the removed entities.\n * @param {Array|number|string} records         Record IDs of the removed entities.\n * @param {boolean}             invalidateCache Controls whether we want to invalidate the cache.\n * @return {Object} Action object.\n */\nexport function removeItems( kind, name, records, invalidateCache = false ) {\n\treturn {\n\t\ttype: 'REMOVE_ITEMS',\n\t\titemIds: castArray( records ),\n\t\tkind,\n\t\tname,\n\t\tinvalidateCache,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that queried data has been\n * received.\n *\n * @param {Array}   items Queried items received.\n * @param {?Object} query Optional query object.\n * @param {?Object} edits Optional edits to reset.\n *\n * @return {Object} Action object.\n */\nexport function receiveQueriedItems( items, query = {}, edits ) {\n\treturn {\n\t\t...receiveItems( items, edits ),\n\t\tquery,\n\t};\n}\n","/**\n * External dependencies\n */\nimport { chunk } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Maximum number of requests to place in a single batch request. Obtained by\n * sending a preflight OPTIONS request to /batch/v1/.\n *\n * @type {number?}\n */\nlet maxItems = null;\n\n/**\n * Default batch processor. Sends its input requests to /batch/v1.\n *\n * @param {Array} requests List of API requests to perform at once.\n *\n * @return {Promise} Promise that resolves to a list of objects containing\n *                   either `output` (if that request was succesful) or `error`\n *                   (if not ).\n */\nexport default async function defaultProcessor( requests ) {\n\tif ( maxItems === null ) {\n\t\tconst preflightResponse = await apiFetch( {\n\t\t\tpath: '/batch/v1',\n\t\t\tmethod: 'OPTIONS',\n\t\t} );\n\t\tmaxItems = preflightResponse.endpoints[ 0 ].args.requests.maxItems;\n\t}\n\n\tconst results = [];\n\n\t// @ts-ignore We would have crashed or never gotten to this point if we hadn't received the maxItems count.\n\tfor ( const batchRequests of chunk( requests, maxItems ) ) {\n\t\tconst batchResponse = await apiFetch( {\n\t\t\tpath: '/batch/v1',\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tvalidation: 'require-all-validate',\n\t\t\t\trequests: batchRequests.map( ( request ) => ( {\n\t\t\t\t\tpath: request.path,\n\t\t\t\t\tbody: request.data, // Rename 'data' to 'body'.\n\t\t\t\t\tmethod: request.method,\n\t\t\t\t\theaders: request.headers,\n\t\t\t\t} ) ),\n\t\t\t},\n\t\t} );\n\n\t\tlet batchResults;\n\n\t\tif ( batchResponse.failed ) {\n\t\t\tbatchResults = batchResponse.responses.map( ( response ) => ( {\n\t\t\t\terror: response?.body,\n\t\t\t} ) );\n\t\t} else {\n\t\t\tbatchResults = batchResponse.responses.map( ( response ) => {\n\t\t\t\tconst result = {};\n\t\t\t\tif ( response.status >= 200 && response.status < 300 ) {\n\t\t\t\t\tresult.output = response.body;\n\t\t\t\t} else {\n\t\t\t\t\tresult.error = response.body;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} );\n\t\t}\n\n\t\tresults.push( ...batchResults );\n\t}\n\n\treturn results;\n}\n","/**\n * External dependencies\n */\nimport { isFunction, zip } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport defaultProcessor from './default-processor';\n\n/**\n * Creates a batch, which can be used to combine multiple API requests into one\n * API request using the WordPress batch processing API (/v1/batch).\n *\n * ```\n * const batch = createBatch();\n * const dunePromise = batch.add( {\n *   path: '/v1/books',\n *   method: 'POST',\n *   data: { title: 'Dune' }\n * } );\n * const lotrPromise = batch.add( {\n *   path: '/v1/books',\n *   method: 'POST',\n *   data: { title: 'Lord of the Rings' }\n * } );\n * const isSuccess = await batch.run(); // Sends one POST to /v1/batch.\n * if ( isSuccess ) {\n *   console.log(\n *     'Saved two books:',\n *     await dunePromise,\n *     await lotrPromise\n *   );\n * }\n * ```\n *\n * @param {Function} [processor] Processor function. Can be used to replace the\n *                               default functionality which is to send an API\n *                               request to /v1/batch. Is given an array of\n *                               inputs and must return a promise that\n *                               resolves to an array of objects containing\n *                               either `output` or `error`.\n */\nexport default function createBatch( processor = defaultProcessor ) {\n\tlet lastId = 0;\n\t/** @type {Array<{ input: any; resolve: ( value: any ) => void; reject: ( error: any ) => void }>} */\n\tlet queue = [];\n\tconst pending = new ObservableSet();\n\n\treturn {\n\t\t/**\n\t\t * Adds an input to the batch and returns a promise that is resolved or\n\t\t * rejected when the input is processed by `batch.run()`.\n\t\t *\n\t\t * You may also pass a thunk which allows inputs to be added\n\t\t * asychronously.\n\t\t *\n\t\t * ```\n\t\t * // Both are allowed:\n\t\t * batch.add( { path: '/v1/books', ... } );\n\t\t * batch.add( ( add ) => add( { path: '/v1/books', ... } ) );\n\t\t * ```\n\t\t *\n\t\t * If a thunk is passed, `batch.run()` will pause until either:\n\t\t *\n\t\t * - The thunk calls its `add` argument, or;\n\t\t * - The thunk returns a promise and that promise resolves, or;\n\t\t * - The thunk returns a non-promise.\n\t\t *\n\t\t * @param {any|Function} inputOrThunk Input to add or thunk to execute.\n\t\t *\n\t\t * @return {Promise|any} If given an input, returns a promise that\n\t\t *                       is resolved or rejected when the batch is\n\t\t *                       processed. If given a thunk, returns the return\n\t\t *                       value of that thunk.\n\t\t */\n\t\tadd( inputOrThunk ) {\n\t\t\tconst id = ++lastId;\n\t\t\tpending.add( id );\n\n\t\t\tconst add = ( input ) =>\n\t\t\t\tnew Promise( ( resolve, reject ) => {\n\t\t\t\t\tqueue.push( {\n\t\t\t\t\t\tinput,\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t} );\n\t\t\t\t\tpending.delete( id );\n\t\t\t\t} );\n\n\t\t\tif ( isFunction( inputOrThunk ) ) {\n\t\t\t\treturn Promise.resolve( inputOrThunk( add ) ).finally( () => {\n\t\t\t\t\tpending.delete( id );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn add( inputOrThunk );\n\t\t},\n\n\t\t/**\n\t\t * Runs the batch. This calls `batchProcessor` and resolves or rejects\n\t\t * all promises returned by `add()`.\n\t\t *\n\t\t * @return {Promise<boolean>} A promise that resolves to a boolean that is true\n\t\t *                   if the processor returned no errors.\n\t\t */\n\t\tasync run() {\n\t\t\tif ( pending.size ) {\n\t\t\t\tawait new Promise( ( resolve ) => {\n\t\t\t\t\tconst unsubscribe = pending.subscribe( () => {\n\t\t\t\t\t\tif ( ! pending.size ) {\n\t\t\t\t\t\t\tunsubscribe();\n\t\t\t\t\t\t\tresolve( undefined );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tlet results;\n\n\t\t\ttry {\n\t\t\t\tresults = await processor(\n\t\t\t\t\tqueue.map( ( { input } ) => input )\n\t\t\t\t);\n\n\t\t\t\tif ( results.length !== queue.length ) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'run: Array returned by processor must be same size as input array.'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch ( error ) {\n\t\t\t\tfor ( const { reject } of queue ) {\n\t\t\t\t\treject( error );\n\t\t\t\t}\n\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tlet isSuccess = true;\n\n\t\t\tfor ( const pair of zip( results, queue ) ) {\n\t\t\t\t/** @type {{error?: unknown, output?: unknown}} */\n\t\t\t\tconst result = pair[ 0 ];\n\n\t\t\t\t/** @type {{resolve: (value: any) => void; reject: (error: any) => void} | undefined} */\n\t\t\t\tconst queueItem = pair[ 1 ];\n\n\t\t\t\tif ( result?.error ) {\n\t\t\t\t\tqueueItem?.reject( result.error );\n\t\t\t\t\tisSuccess = false;\n\t\t\t\t} else {\n\t\t\t\t\tqueueItem?.resolve( result?.output ?? result );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tqueue = [];\n\n\t\t\treturn isSuccess;\n\t\t},\n\t};\n}\n\nclass ObservableSet {\n\tconstructor( ...args ) {\n\t\tthis.set = new Set( ...args );\n\t\tthis.subscribers = new Set();\n\t}\n\n\tget size() {\n\t\treturn this.set.size;\n\t}\n\n\tadd( value ) {\n\t\tthis.set.add( value );\n\t\tthis.subscribers.forEach( ( subscriber ) => subscriber() );\n\t\treturn this;\n\t}\n\n\tdelete( value ) {\n\t\tconst isSuccess = this.set.delete( value );\n\t\tthis.subscribers.forEach( ( subscriber ) => subscriber() );\n\t\treturn isSuccess;\n\t}\n\n\tsubscribe( subscriber ) {\n\t\tthis.subscribers.add( subscriber );\n\t\treturn () => {\n\t\t\tthis.subscribers.delete( subscriber );\n\t\t};\n\t}\n}\n","/**\n * The reducer key used by core data in store registration.\n * This is defined in a separate file to avoid cycle-dependency\n *\n * @type {string}\n */\nexport const STORE_NAME = 'core';\n","/**\n * External dependencies\n */\nimport { castArray, isEqual, find } from 'lodash';\nimport { v4 as uuid } from 'uuid';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { receiveItems, removeItems, receiveQueriedItems } from './queried-data';\nimport { getOrLoadEntitiesConfig, DEFAULT_ENTITY_KEY } from './entities';\nimport { createBatch } from './batch';\nimport { STORE_NAME } from './name';\n\n/**\n * Returns an action object used in signalling that authors have been received.\n *\n * @param {string}       queryID Query ID.\n * @param {Array|Object} users   Users received.\n *\n * @return {Object} Action object.\n */\nexport function receiveUserQuery( queryID, users ) {\n\treturn {\n\t\ttype: 'RECEIVE_USER_QUERY',\n\t\tusers: castArray( users ),\n\t\tqueryID,\n\t};\n}\n\n/**\n * Returns an action used in signalling that the current user has been received.\n *\n * @param {Object} currentUser Current user object.\n *\n * @return {Object} Action object.\n */\nexport function receiveCurrentUser( currentUser ) {\n\treturn {\n\t\ttype: 'RECEIVE_CURRENT_USER',\n\t\tcurrentUser,\n\t};\n}\n\n/**\n * Returns an action object used in adding new entities.\n *\n * @param {Array} entities Entities received.\n *\n * @return {Object} Action object.\n */\nexport function addEntities( entities ) {\n\treturn {\n\t\ttype: 'ADD_ENTITIES',\n\t\tentities,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that entity records have been received.\n *\n * @param {string}       kind            Kind of the received entity record.\n * @param {string}       name            Name of the received entity record.\n * @param {Array|Object} records         Records received.\n * @param {?Object}      query           Query Object.\n * @param {?boolean}     invalidateCache Should invalidate query caches.\n * @param {?Object}      edits           Edits to reset.\n * @return {Object} Action object.\n */\nexport function receiveEntityRecords(\n\tkind,\n\tname,\n\trecords,\n\tquery,\n\tinvalidateCache = false,\n\tedits\n) {\n\t// Auto drafts should not have titles, but some plugins rely on them so we can't filter this\n\t// on the server.\n\tif ( kind === 'postType' ) {\n\t\trecords = castArray( records ).map( ( record ) =>\n\t\t\trecord.status === 'auto-draft' ? { ...record, title: '' } : record\n\t\t);\n\t}\n\tlet action;\n\tif ( query ) {\n\t\taction = receiveQueriedItems( records, query, edits );\n\t} else {\n\t\taction = receiveItems( records, edits );\n\t}\n\n\treturn {\n\t\t...action,\n\t\tkind,\n\t\tname,\n\t\tinvalidateCache,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the current theme has been received.\n *\n * @param {Object} currentTheme The current theme.\n *\n * @return {Object} Action object.\n */\nexport function receiveCurrentTheme( currentTheme ) {\n\treturn {\n\t\ttype: 'RECEIVE_CURRENT_THEME',\n\t\tcurrentTheme,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the current global styles id has been received.\n *\n * @param {string} currentGlobalStylesId The current global styles id.\n *\n * @return {Object} Action object.\n */\nexport function __experimentalReceiveCurrentGlobalStylesId(\n\tcurrentGlobalStylesId\n) {\n\treturn {\n\t\ttype: 'RECEIVE_CURRENT_GLOBAL_STYLES_ID',\n\t\tid: currentGlobalStylesId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the theme base global styles have been received\n *\n * @param {string} stylesheet   The theme's identifier\n * @param {Object} globalStyles The global styles object.\n *\n * @return {Object} Action object.\n */\nexport function __experimentalReceiveThemeBaseGlobalStyles(\n\tstylesheet,\n\tglobalStyles\n) {\n\treturn {\n\t\ttype: 'RECEIVE_THEME_GLOBAL_STYLES',\n\t\tstylesheet,\n\t\tglobalStyles,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the theme global styles variations have been received.\n *\n * @param {string} stylesheet The theme's identifier\n * @param {Array}  variations The global styles variations.\n *\n * @return {Object} Action object.\n */\nexport function __experimentalReceiveThemeGlobalStyleVariations(\n\tstylesheet,\n\tvariations\n) {\n\treturn {\n\t\ttype: 'RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS',\n\t\tstylesheet,\n\t\tvariations,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the index has been received.\n *\n * @deprecated since WP 5.9, this is not useful anymore, use the selector direclty.\n *\n * @return {Object} Action object.\n */\nexport function receiveThemeSupports() {\n\tdeprecated( \"wp.data.dispatch( 'core' ).receiveThemeSupports\", {\n\t\tsince: '5.9',\n\t} );\n\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the preview data for\n * a given URl has been received.\n *\n * @param {string} url     URL to preview the embed for.\n * @param {*}      preview Preview data.\n *\n * @return {Object} Action object.\n */\nexport function receiveEmbedPreview( url, preview ) {\n\treturn {\n\t\ttype: 'RECEIVE_EMBED_PREVIEW',\n\t\turl,\n\t\tpreview,\n\t};\n}\n\n/**\n * Action triggered to delete an entity record.\n *\n * @param {string}   kind                         Kind of the deleted entity.\n * @param {string}   name                         Name of the deleted entity.\n * @param {string}   recordId                     Record ID of the deleted entity.\n * @param {?Object}  query                        Special query parameters for the\n *                                                DELETE API call.\n * @param {Object}   [options]                    Delete options.\n * @param {Function} [options.__unstableFetch]    Internal use only. Function to\n *                                                call instead of `apiFetch()`.\n *                                                Must return a promise.\n * @param {boolean}  [options.throwOnError=false] If false, this action suppresses all\n *                                                the exceptions. Defaults to false.\n */\nexport const deleteEntityRecord = (\n\tkind,\n\tname,\n\trecordId,\n\tquery,\n\t{ __unstableFetch = apiFetch, throwOnError = false } = {}\n) => async ( { dispatch } ) => {\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tlet error;\n\tlet deletedRecord = false;\n\tif ( ! entityConfig || entityConfig?.__experimentalNoFetch ) {\n\t\treturn;\n\t}\n\n\tconst lock = await dispatch.__unstableAcquireStoreLock(\n\t\tSTORE_NAME,\n\t\t[ 'entities', 'records', kind, name, recordId ],\n\t\t{ exclusive: true }\n\t);\n\n\ttry {\n\t\tdispatch( {\n\t\t\ttype: 'DELETE_ENTITY_RECORD_START',\n\t\t\tkind,\n\t\t\tname,\n\t\t\trecordId,\n\t\t} );\n\n\t\tlet hasError = false;\n\t\ttry {\n\t\t\tlet path = `${ entityConfig.baseURL }/${ recordId }`;\n\n\t\t\tif ( query ) {\n\t\t\t\tpath = addQueryArgs( path, query );\n\t\t\t}\n\n\t\t\tdeletedRecord = await __unstableFetch( {\n\t\t\t\tpath,\n\t\t\t\tmethod: 'DELETE',\n\t\t\t} );\n\n\t\t\tawait dispatch( removeItems( kind, name, recordId, true ) );\n\t\t} catch ( _error ) {\n\t\t\thasError = true;\n\t\t\terror = _error;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'DELETE_ENTITY_RECORD_FINISH',\n\t\t\tkind,\n\t\t\tname,\n\t\t\trecordId,\n\t\t\terror,\n\t\t} );\n\n\t\tif ( hasError && throwOnError ) {\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn deletedRecord;\n\t} finally {\n\t\tdispatch.__unstableReleaseStoreLock( lock );\n\t}\n};\n\n/**\n * Returns an action object that triggers an\n * edit to an entity record.\n *\n * @param {string}  kind                 Kind of the edited entity record.\n * @param {string}  name                 Name of the edited entity record.\n * @param {number}  recordId             Record ID of the edited entity record.\n * @param {Object}  edits                The edits.\n * @param {Object}  options              Options for the edit.\n * @param {boolean} [options.undoIgnore] Whether to ignore the edit in undo history or not.\n *\n * @return {Object} Action object.\n */\nexport const editEntityRecord = (\n\tkind,\n\tname,\n\trecordId,\n\tedits,\n\toptions = {}\n) => ( { select, dispatch } ) => {\n\tconst entityConfig = select.getEntityConfig( kind, name );\n\tif ( ! entityConfig ) {\n\t\tthrow new Error(\n\t\t\t`The entity being edited (${ kind }, ${ name }) does not have a loaded config.`\n\t\t);\n\t}\n\tconst { transientEdits = {}, mergedEdits = {} } = entityConfig;\n\tconst record = select.getRawEntityRecord( kind, name, recordId );\n\tconst editedRecord = select.getEditedEntityRecord( kind, name, recordId );\n\n\tconst edit = {\n\t\tkind,\n\t\tname,\n\t\trecordId,\n\t\t// Clear edits when they are equal to their persisted counterparts\n\t\t// so that the property is not considered dirty.\n\t\tedits: Object.keys( edits ).reduce( ( acc, key ) => {\n\t\t\tconst recordValue = record[ key ];\n\t\t\tconst editedRecordValue = editedRecord[ key ];\n\t\t\tconst value = mergedEdits[ key ]\n\t\t\t\t? { ...editedRecordValue, ...edits[ key ] }\n\t\t\t\t: edits[ key ];\n\t\t\tacc[ key ] = isEqual( recordValue, value ) ? undefined : value;\n\t\t\treturn acc;\n\t\t}, {} ),\n\t\ttransientEdits,\n\t};\n\tdispatch( {\n\t\ttype: 'EDIT_ENTITY_RECORD',\n\t\t...edit,\n\t\tmeta: {\n\t\t\tundo: ! options.undoIgnore && {\n\t\t\t\t...edit,\n\t\t\t\t// Send the current values for things like the first undo stack entry.\n\t\t\t\tedits: Object.keys( edits ).reduce( ( acc, key ) => {\n\t\t\t\t\tacc[ key ] = editedRecord[ key ];\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {} ),\n\t\t\t},\n\t\t},\n\t} );\n};\n\n/**\n * Action triggered to undo the last edit to\n * an entity record, if any.\n */\nexport const undo = () => ( { select, dispatch } ) => {\n\tconst undoEdit = select.getUndoEdit();\n\tif ( ! undoEdit ) {\n\t\treturn;\n\t}\n\tdispatch( {\n\t\ttype: 'EDIT_ENTITY_RECORD',\n\t\t...undoEdit,\n\t\tmeta: { isUndo: true },\n\t} );\n};\n\n/**\n * Action triggered to redo the last undoed\n * edit to an entity record, if any.\n */\nexport const redo = () => ( { select, dispatch } ) => {\n\tconst redoEdit = select.getRedoEdit();\n\tif ( ! redoEdit ) {\n\t\treturn;\n\t}\n\tdispatch( {\n\t\ttype: 'EDIT_ENTITY_RECORD',\n\t\t...redoEdit,\n\t\tmeta: { isRedo: true },\n\t} );\n};\n\n/**\n * Forces the creation of a new undo level.\n *\n * @return {Object} Action object.\n */\nexport function __unstableCreateUndoLevel() {\n\treturn { type: 'CREATE_UNDO_LEVEL' };\n}\n\n/**\n * Action triggered to save an entity record.\n *\n * @param {string}   kind                         Kind of the received entity.\n * @param {string}   name                         Name of the received entity.\n * @param {Object}   record                       Record to be saved.\n * @param {Object}   options                      Saving options.\n * @param {boolean}  [options.isAutosave=false]   Whether this is an autosave.\n * @param {Function} [options.__unstableFetch]    Internal use only. Function to\n *                                                call instead of `apiFetch()`.\n *                                                Must return a promise.\n * @param {boolean}  [options.throwOnError=false] If false, this action suppresses all\n *                                                the exceptions. Defaults to false.\n */\nexport const saveEntityRecord = (\n\tkind,\n\tname,\n\trecord,\n\t{\n\t\tisAutosave = false,\n\t\t__unstableFetch = apiFetch,\n\t\tthrowOnError = false,\n\t} = {}\n) => async ( { select, resolveSelect, dispatch } ) => {\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tif ( ! entityConfig || entityConfig?.__experimentalNoFetch ) {\n\t\treturn;\n\t}\n\tconst entityIdKey = entityConfig.key || DEFAULT_ENTITY_KEY;\n\tconst recordId = record[ entityIdKey ];\n\n\tconst lock = await dispatch.__unstableAcquireStoreLock(\n\t\tSTORE_NAME,\n\t\t[ 'entities', 'records', kind, name, recordId || uuid() ],\n\t\t{ exclusive: true }\n\t);\n\n\ttry {\n\t\t// Evaluate optimized edits.\n\t\t// (Function edits that should be evaluated on save to avoid expensive computations on every edit.)\n\t\tfor ( const [ key, value ] of Object.entries( record ) ) {\n\t\t\tif ( typeof value === 'function' ) {\n\t\t\t\tconst evaluatedValue = value(\n\t\t\t\t\tselect.getEditedEntityRecord( kind, name, recordId )\n\t\t\t\t);\n\t\t\t\tdispatch.editEntityRecord(\n\t\t\t\t\tkind,\n\t\t\t\t\tname,\n\t\t\t\t\trecordId,\n\t\t\t\t\t{\n\t\t\t\t\t\t[ key ]: evaluatedValue,\n\t\t\t\t\t},\n\t\t\t\t\t{ undoIgnore: true }\n\t\t\t\t);\n\t\t\t\trecord[ key ] = evaluatedValue;\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'SAVE_ENTITY_RECORD_START',\n\t\t\tkind,\n\t\t\tname,\n\t\t\trecordId,\n\t\t\tisAutosave,\n\t\t} );\n\t\tlet updatedRecord;\n\t\tlet error;\n\t\tlet hasError = false;\n\t\ttry {\n\t\t\tconst path = `${ entityConfig.baseURL }${\n\t\t\t\trecordId ? '/' + recordId : ''\n\t\t\t}`;\n\t\t\tconst persistedRecord = select.getRawEntityRecord(\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\trecordId\n\t\t\t);\n\n\t\t\tif ( isAutosave ) {\n\t\t\t\t// Most of this autosave logic is very specific to posts.\n\t\t\t\t// This is fine for now as it is the only supported autosave,\n\t\t\t\t// but ideally this should all be handled in the back end,\n\t\t\t\t// so the client just sends and receives objects.\n\t\t\t\tconst currentUser = select.getCurrentUser();\n\t\t\t\tconst currentUserId = currentUser ? currentUser.id : undefined;\n\t\t\t\tconst autosavePost = await resolveSelect.getAutosave(\n\t\t\t\t\tpersistedRecord.type,\n\t\t\t\t\tpersistedRecord.id,\n\t\t\t\t\tcurrentUserId\n\t\t\t\t);\n\t\t\t\t// Autosaves need all expected fields to be present.\n\t\t\t\t// So we fallback to the previous autosave and then\n\t\t\t\t// to the actual persisted entity if the edits don't\n\t\t\t\t// have a value.\n\t\t\t\tlet data = { ...persistedRecord, ...autosavePost, ...record };\n\t\t\t\tdata = Object.keys( data ).reduce(\n\t\t\t\t\t( acc, key ) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t[ 'title', 'excerpt', 'content' ].includes( key )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tacc[ key ] = data[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus:\n\t\t\t\t\t\t\tdata.status === 'auto-draft'\n\t\t\t\t\t\t\t\t? 'draft'\n\t\t\t\t\t\t\t\t: data.status,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tupdatedRecord = await __unstableFetch( {\n\t\t\t\t\tpath: `${ path }/autosaves`,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata,\n\t\t\t\t} );\n\n\t\t\t\t// An autosave may be processed by the server as a regular save\n\t\t\t\t// when its update is requested by the author and the post had\n\t\t\t\t// draft or auto-draft status.\n\t\t\t\tif ( persistedRecord.id === updatedRecord.id ) {\n\t\t\t\t\tlet newRecord = {\n\t\t\t\t\t\t...persistedRecord,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\t...updatedRecord,\n\t\t\t\t\t};\n\t\t\t\t\tnewRecord = Object.keys( newRecord ).reduce(\n\t\t\t\t\t\t( acc, key ) => {\n\t\t\t\t\t\t\t// These properties are persisted in autosaves.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[ 'title', 'excerpt', 'content' ].includes(\n\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tacc[ key ] = newRecord[ key ];\n\t\t\t\t\t\t\t} else if ( key === 'status' ) {\n\t\t\t\t\t\t\t\t// Status is only persisted in autosaves when going from\n\t\t\t\t\t\t\t\t// \"auto-draft\" to \"draft\".\n\t\t\t\t\t\t\t\tacc[ key ] =\n\t\t\t\t\t\t\t\t\tpersistedRecord.status === 'auto-draft' &&\n\t\t\t\t\t\t\t\t\tnewRecord.status === 'draft'\n\t\t\t\t\t\t\t\t\t\t? newRecord.status\n\t\t\t\t\t\t\t\t\t\t: persistedRecord.status;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// These properties are not persisted in autosaves.\n\t\t\t\t\t\t\t\tacc[ key ] = persistedRecord[ key ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{}\n\t\t\t\t\t);\n\t\t\t\t\tdispatch.receiveEntityRecords(\n\t\t\t\t\t\tkind,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tnewRecord,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tdispatch.receiveAutosaves(\n\t\t\t\t\t\tpersistedRecord.id,\n\t\t\t\t\t\tupdatedRecord\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet edits = record;\n\t\t\t\tif ( entityConfig.__unstablePrePersist ) {\n\t\t\t\t\tedits = {\n\t\t\t\t\t\t...edits,\n\t\t\t\t\t\t...entityConfig.__unstablePrePersist(\n\t\t\t\t\t\t\tpersistedRecord,\n\t\t\t\t\t\t\tedits\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tupdatedRecord = await __unstableFetch( {\n\t\t\t\t\tpath,\n\t\t\t\t\tmethod: recordId ? 'PUT' : 'POST',\n\t\t\t\t\tdata: edits,\n\t\t\t\t} );\n\t\t\t\tdispatch.receiveEntityRecords(\n\t\t\t\t\tkind,\n\t\t\t\t\tname,\n\t\t\t\t\tupdatedRecord,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t\tedits\n\t\t\t\t);\n\t\t\t}\n\t\t} catch ( _error ) {\n\t\t\thasError = true;\n\t\t\terror = _error;\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'SAVE_ENTITY_RECORD_FINISH',\n\t\t\tkind,\n\t\t\tname,\n\t\t\trecordId,\n\t\t\terror,\n\t\t\tisAutosave,\n\t\t} );\n\n\t\tif ( hasError && throwOnError ) {\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn updatedRecord;\n\t} finally {\n\t\tdispatch.__unstableReleaseStoreLock( lock );\n\t}\n};\n\n/**\n * Runs multiple core-data actions at the same time using one API request.\n *\n * Example:\n *\n * ```\n * const [ savedRecord, updatedRecord, deletedRecord ] =\n *   await dispatch( 'core' ).__experimentalBatch( [\n *     ( { saveEntityRecord } ) => saveEntityRecord( 'root', 'widget', widget ),\n *     ( { saveEditedEntityRecord } ) => saveEntityRecord( 'root', 'widget', 123 ),\n *     ( { deleteEntityRecord } ) => deleteEntityRecord( 'root', 'widget', 123, null ),\n *   ] );\n * ```\n *\n * @param {Array} requests Array of functions which are invoked simultaneously.\n *                         Each function is passed an object containing\n *                         `saveEntityRecord`, `saveEditedEntityRecord`, and\n *                         `deleteEntityRecord`.\n *\n * @return {(thunkArgs: Object) => Promise} A promise that resolves to an array containing the return\n *                                          values of each function given in `requests`.\n */\nexport const __experimentalBatch = ( requests ) => async ( { dispatch } ) => {\n\tconst batch = createBatch();\n\tconst api = {\n\t\tsaveEntityRecord( kind, name, record, options ) {\n\t\t\treturn batch.add( ( add ) =>\n\t\t\t\tdispatch.saveEntityRecord( kind, name, record, {\n\t\t\t\t\t...options,\n\t\t\t\t\t__unstableFetch: add,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t\tsaveEditedEntityRecord( kind, name, recordId, options ) {\n\t\t\treturn batch.add( ( add ) =>\n\t\t\t\tdispatch.saveEditedEntityRecord( kind, name, recordId, {\n\t\t\t\t\t...options,\n\t\t\t\t\t__unstableFetch: add,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t\tdeleteEntityRecord( kind, name, recordId, query, options ) {\n\t\t\treturn batch.add( ( add ) =>\n\t\t\t\tdispatch.deleteEntityRecord( kind, name, recordId, query, {\n\t\t\t\t\t...options,\n\t\t\t\t\t__unstableFetch: add,\n\t\t\t\t} )\n\t\t\t);\n\t\t},\n\t};\n\tconst resultPromises = requests.map( ( request ) => request( api ) );\n\tconst [ , ...results ] = await Promise.all( [\n\t\tbatch.run(),\n\t\t...resultPromises,\n\t] );\n\treturn results;\n};\n\n/**\n * Action triggered to save an entity record's edits.\n *\n * @param {string} kind     Kind of the entity.\n * @param {string} name     Name of the entity.\n * @param {Object} recordId ID of the record.\n * @param {Object} options  Saving options.\n */\nexport const saveEditedEntityRecord = (\n\tkind,\n\tname,\n\trecordId,\n\toptions\n) => async ( { select, dispatch } ) => {\n\tif ( ! select.hasEditsForEntityRecord( kind, name, recordId ) ) {\n\t\treturn;\n\t}\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tif ( ! entityConfig ) {\n\t\treturn;\n\t}\n\tconst entityIdKey = entityConfig.key || DEFAULT_ENTITY_KEY;\n\n\tconst edits = select.getEntityRecordNonTransientEdits(\n\t\tkind,\n\t\tname,\n\t\trecordId\n\t);\n\tconst record = { [ entityIdKey ]: recordId, ...edits };\n\treturn await dispatch.saveEntityRecord( kind, name, record, options );\n};\n\n/**\n * Action triggered to save only specified properties for the entity.\n *\n * @param {string} kind        Kind of the entity.\n * @param {string} name        Name of the entity.\n * @param {Object} recordId    ID of the record.\n * @param {Array}  itemsToSave List of entity properties to save.\n * @param {Object} options     Saving options.\n */\nexport const __experimentalSaveSpecifiedEntityEdits = (\n\tkind,\n\tname,\n\trecordId,\n\titemsToSave,\n\toptions\n) => async ( { select, dispatch } ) => {\n\tif ( ! select.hasEditsForEntityRecord( kind, name, recordId ) ) {\n\t\treturn;\n\t}\n\tconst edits = select.getEntityRecordNonTransientEdits(\n\t\tkind,\n\t\tname,\n\t\trecordId\n\t);\n\tconst editsToSave = {};\n\tfor ( const edit in edits ) {\n\t\tif ( itemsToSave.some( ( item ) => item === edit ) ) {\n\t\t\teditsToSave[ edit ] = edits[ edit ];\n\t\t}\n\t}\n\treturn await dispatch.saveEntityRecord( kind, name, editsToSave, options );\n};\n\n/**\n * Returns an action object used in signalling that Upload permissions have been received.\n *\n * @deprecated since WP 5.9, use receiveUserPermission instead.\n *\n * @param {boolean} hasUploadPermissions Does the user have permission to upload files?\n *\n * @return {Object} Action object.\n */\nexport function receiveUploadPermissions( hasUploadPermissions ) {\n\tdeprecated( \"wp.data.dispatch( 'core' ).receiveUploadPermissions\", {\n\t\tsince: '5.9',\n\t\talternative: 'receiveUserPermission',\n\t} );\n\n\treturn receiveUserPermission( 'create/media', hasUploadPermissions );\n}\n\n/**\n * Returns an action object used in signalling that the current user has\n * permission to perform an action on a REST resource.\n *\n * @param {string}  key       A key that represents the action and REST resource.\n * @param {boolean} isAllowed Whether or not the user can perform the action.\n *\n * @return {Object} Action object.\n */\nexport function receiveUserPermission( key, isAllowed ) {\n\treturn {\n\t\ttype: 'RECEIVE_USER_PERMISSION',\n\t\tkey,\n\t\tisAllowed,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the autosaves for a\n * post have been received.\n *\n * @param {number}       postId    The id of the post that is parent to the autosave.\n * @param {Array|Object} autosaves An array of autosaves or singular autosave object.\n *\n * @return {Object} Action object.\n */\nexport function receiveAutosaves( postId, autosaves ) {\n\treturn {\n\t\ttype: 'RECEIVE_AUTOSAVES',\n\t\tpostId,\n\t\tautosaves: castArray( autosaves ),\n\t};\n}\n","/**\n * External dependencies\n */\nimport { upperFirst, camelCase, map, find, get, startCase } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { addEntities } from './actions';\nimport type { Post, Taxonomy, Type, Updatable } from './entity-types';\n\nexport const DEFAULT_ENTITY_KEY = 'id';\n\nconst POST_RAW_ATTRIBUTES = [ 'title', 'excerpt', 'content' ];\n\nexport const rootEntitiesConfig = [\n\t{\n\t\tlabel: __( 'Base' ),\n\t\tname: '__unstableBase',\n\t\tkind: 'root',\n\t\tbaseURL: '/',\n\t\tbaseURLParams: {\n\t\t\t_fields: [\n\t\t\t\t'description',\n\t\t\t\t'gmt_offset',\n\t\t\t\t'home',\n\t\t\t\t'name',\n\t\t\t\t'site_icon',\n\t\t\t\t'site_icon_url',\n\t\t\t\t'site_logo',\n\t\t\t\t'timezone_string',\n\t\t\t\t'url',\n\t\t\t].join( ',' ),\n\t\t},\n\t},\n\t{\n\t\tlabel: __( 'Site' ),\n\t\tname: 'site',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/settings',\n\t\tgetTitle: ( record ) => {\n\t\t\treturn get( record, [ 'title' ], __( 'Site Title' ) );\n\t\t},\n\t},\n\t{\n\t\tlabel: __( 'Post Type' ),\n\t\tname: 'postType',\n\t\tkind: 'root',\n\t\tkey: 'slug',\n\t\tbaseURL: '/wp/v2/types',\n\t\tbaseURLParams: { context: 'edit' },\n\t\trawAttributes: POST_RAW_ATTRIBUTES,\n\t},\n\t{\n\t\tname: 'media',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/media',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'mediaItems',\n\t\tlabel: __( 'Media' ),\n\t\trawAttributes: [ 'caption', 'title', 'description' ],\n\t},\n\t{\n\t\tname: 'taxonomy',\n\t\tkind: 'root',\n\t\tkey: 'slug',\n\t\tbaseURL: '/wp/v2/taxonomies',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'taxonomies',\n\t\tlabel: __( 'Taxonomy' ),\n\t},\n\t{\n\t\tname: 'sidebar',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/sidebars',\n\t\tplural: 'sidebars',\n\t\ttransientEdits: { blocks: true },\n\t\tlabel: __( 'Widget areas' ),\n\t},\n\t{\n\t\tname: 'widget',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/widgets',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'widgets',\n\t\ttransientEdits: { blocks: true },\n\t\tlabel: __( 'Widgets' ),\n\t},\n\t{\n\t\tname: 'widgetType',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/widget-types',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'widgetTypes',\n\t\tlabel: __( 'Widget types' ),\n\t},\n\t{\n\t\tlabel: __( 'User' ),\n\t\tname: 'user',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/users',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'users',\n\t},\n\t{\n\t\tname: 'comment',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/comments',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'comments',\n\t\tlabel: __( 'Comment' ),\n\t},\n\t{\n\t\tname: 'menu',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/menus',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'menus',\n\t\tlabel: __( 'Menu' ),\n\t},\n\t{\n\t\tname: 'menuItem',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/menu-items',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'menuItems',\n\t\tlabel: __( 'Menu Item' ),\n\t\trawAttributes: [ 'title', 'content' ],\n\t},\n\t{\n\t\tname: 'menuLocation',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/menu-locations',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'menuLocations',\n\t\tlabel: __( 'Menu Location' ),\n\t\tkey: 'name',\n\t},\n\t{\n\t\tname: 'navigationArea',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/block-navigation-areas',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'navigationAreas',\n\t\tlabel: __( 'Navigation Area' ),\n\t\tkey: 'name',\n\t\tgetTitle: ( record ) => record?.description,\n\t},\n\t{\n\t\tlabel: __( 'Global Styles' ),\n\t\tname: 'globalStyles',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/global-styles',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tplural: 'globalStylesVariations', // Should be different than name.\n\t\tgetTitle: ( record ) => record?.title?.rendered || record?.title,\n\t},\n\t{\n\t\tlabel: __( 'Themes' ),\n\t\tname: 'theme',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/themes',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tkey: 'stylesheet',\n\t},\n\t{\n\t\tlabel: __( 'Plugins' ),\n\t\tname: 'plugin',\n\t\tkind: 'root',\n\t\tbaseURL: '/wp/v2/plugins',\n\t\tbaseURLParams: { context: 'edit' },\n\t\tkey: 'plugin',\n\t},\n];\n\nexport const additionalEntityConfigLoaders = [\n\t{ kind: 'postType', loadEntities: loadPostTypeEntities },\n\t{ kind: 'taxonomy', loadEntities: loadTaxonomyEntities },\n];\n\n/**\n * Returns a function to be used to retrieve extra edits to apply before persisting a post type.\n *\n * @param {Object} persistedRecord Already persisted Post\n * @param {Object} edits           Edits.\n * @return {Object} Updated edits.\n */\nexport const prePersistPostType = ( persistedRecord, edits ) => {\n\tconst newEdits = {} as Partial< Updatable< Post< 'edit' > > >;\n\n\tif ( persistedRecord?.status === 'auto-draft' ) {\n\t\t// Saving an auto-draft should create a draft by default.\n\t\tif ( ! edits.status && ! newEdits.status ) {\n\t\t\tnewEdits.status = 'draft';\n\t\t}\n\n\t\t// Fix the auto-draft default title.\n\t\tif (\n\t\t\t( ! edits.title || edits.title === 'Auto Draft' ) &&\n\t\t\t! newEdits.title &&\n\t\t\t( ! persistedRecord?.title ||\n\t\t\t\tpersistedRecord?.title === 'Auto Draft' )\n\t\t) {\n\t\t\tnewEdits.title = '';\n\t\t}\n\t}\n\n\treturn newEdits;\n};\n\n/**\n * Returns the list of post type entities.\n *\n * @return {Promise} Entities promise\n */\nasync function loadPostTypeEntities() {\n\tconst postTypes = ( await apiFetch( {\n\t\tpath: '/wp/v2/types?context=view',\n\t} ) ) as Record< string, Type< 'view' > >;\n\treturn map( postTypes, ( postType, name ) => {\n\t\tconst isTemplate = [ 'wp_template', 'wp_template_part' ].includes(\n\t\t\tname\n\t\t);\n\t\tconst namespace = postType?.rest_namespace ?? 'wp/v2';\n\t\treturn {\n\t\t\tkind: 'postType',\n\t\t\tbaseURL: `/${ namespace }/${ postType.rest_base }`,\n\t\t\tbaseURLParams: { context: 'edit' },\n\t\t\tname,\n\t\t\tlabel: postType.name,\n\t\t\ttransientEdits: {\n\t\t\t\tblocks: true,\n\t\t\t\tselection: true,\n\t\t\t},\n\t\t\tmergedEdits: { meta: true },\n\t\t\trawAttributes: POST_RAW_ATTRIBUTES,\n\t\t\tgetTitle: ( record ) =>\n\t\t\t\trecord?.title?.rendered ||\n\t\t\t\trecord?.title ||\n\t\t\t\t( isTemplate ? startCase( record.slug ) : String( record.id ) ),\n\t\t\t__unstablePrePersist: isTemplate ? undefined : prePersistPostType,\n\t\t\t__unstable_rest_base: postType.rest_base,\n\t\t};\n\t} );\n}\n\n/**\n * Returns the list of the taxonomies entities.\n *\n * @return {Promise} Entities promise\n */\nasync function loadTaxonomyEntities() {\n\tconst taxonomies = ( await apiFetch( {\n\t\tpath: '/wp/v2/taxonomies?context=view',\n\t} ) ) as Record< string, Taxonomy< 'view' > >;\n\treturn map( taxonomies, ( taxonomy, name ) => {\n\t\tconst namespace = taxonomy?.rest_namespace ?? 'wp/v2';\n\t\treturn {\n\t\t\tkind: 'taxonomy',\n\t\t\tbaseURL: `/${ namespace }/${ taxonomy.rest_base }`,\n\t\t\tbaseURLParams: { context: 'edit' },\n\t\t\tname,\n\t\t\tlabel: taxonomy.name,\n\t\t};\n\t} );\n}\n\n/**\n * Returns the entity's getter method name given its kind and name.\n *\n * @example\n * ```js\n * const nameSingular = getMethodName( 'root', 'theme', 'get' );\n * // nameSingular is getRootTheme\n *\n * const namePlural = getMethodName( 'root', 'theme', 'set' );\n * // namePlural is setRootThemes\n * ```\n *\n * @param {string}  kind      Entity kind.\n * @param {string}  name      Entity name.\n * @param {string}  prefix    Function prefix.\n * @param {boolean} usePlural Whether to use the plural form or not.\n *\n * @return {string} Method name\n */\nexport const getMethodName = (\n\tkind,\n\tname,\n\tprefix = 'get',\n\tusePlural = false\n) => {\n\tconst entityConfig = find( rootEntitiesConfig, { kind, name } );\n\tconst kindPrefix = kind === 'root' ? '' : upperFirst( camelCase( kind ) );\n\tconst nameSuffix =\n\t\tupperFirst( camelCase( name ) ) + ( usePlural ? 's' : '' );\n\tconst suffix =\n\t\tusePlural && entityConfig?.plural\n\t\t\t? upperFirst( camelCase( entityConfig.plural ) )\n\t\t\t: nameSuffix;\n\treturn `${ prefix }${ kindPrefix }${ suffix }`;\n};\n\n/**\n * Loads the kind entities into the store.\n *\n * @param {string} kind Kind\n *\n * @return {(thunkArgs: object) => Promise<Array>} Entities\n */\nexport const getOrLoadEntitiesConfig = ( kind ) => async ( {\n\tselect,\n\tdispatch,\n} ) => {\n\tlet configs = select.getEntitiesConfig( kind );\n\tif ( configs && configs.length !== 0 ) {\n\t\treturn configs;\n\t}\n\n\tconst loader = find( additionalEntityConfigLoaders, { kind } );\n\tif ( ! loader ) {\n\t\treturn [];\n\t}\n\n\tconfigs = await loader.loadEntities();\n\tdispatch( addEntities( configs ) );\n\n\treturn configs;\n};\n","/**\n * Given a value which can be specified as one or the other of a comma-separated\n * string or an array, returns a value normalized to an array of strings, or\n * null if the value cannot be interpreted as either.\n *\n * @param {string|string[]|*} value\n *\n * @return {?(string[])} Normalized field value.\n */\nfunction getNormalizedCommaSeparable( value ) {\n\tif ( typeof value === 'string' ) {\n\t\treturn value.split( ',' );\n\t} else if ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\n\treturn null;\n}\n\nexport default getNormalizedCommaSeparable;\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { withWeakMapCache, getNormalizedCommaSeparable } from '../utils';\n\n/**\n * An object of properties describing a specific query.\n *\n * @typedef {Object} WPQueriedDataQueryParts\n *\n * @property {number}      page      The query page (1-based index, default 1).\n * @property {number}      perPage   Items per page for query (default 10).\n * @property {string}      stableKey An encoded stable string of all non-\n *                                   pagination, non-fields query parameters.\n * @property {?(string[])} fields    Target subset of fields to derive from\n *                                   item objects.\n * @property {?(number[])} include   Specific item IDs to include.\n * @property {string}      context   Scope under which the request is made;\n *                                   determines returned fields in response.\n */\n\n/**\n * Given a query object, returns an object of parts, including pagination\n * details (`page` and `perPage`, or default values). All other properties are\n * encoded into a stable (idempotent) `stableKey` value.\n *\n * @param {Object} query Optional query object.\n *\n * @return {WPQueriedDataQueryParts} Query parts.\n */\nexport function getQueryParts( query ) {\n\t/**\n\t * @type {WPQueriedDataQueryParts}\n\t */\n\tconst parts = {\n\t\tstableKey: '',\n\t\tpage: 1,\n\t\tperPage: 10,\n\t\tfields: null,\n\t\tinclude: null,\n\t\tcontext: 'default',\n\t};\n\n\t// Ensure stable key by sorting keys. Also more efficient for iterating.\n\tconst keys = Object.keys( query ).sort();\n\n\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\tconst key = keys[ i ];\n\t\tlet value = query[ key ];\n\n\t\tswitch ( key ) {\n\t\t\tcase 'page':\n\t\t\t\tparts[ key ] = Number( value );\n\t\t\t\tbreak;\n\n\t\t\tcase 'per_page':\n\t\t\t\tparts.perPage = Number( value );\n\t\t\t\tbreak;\n\n\t\t\tcase 'context':\n\t\t\t\tparts.context = value;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// While in theory, we could exclude \"_fields\" from the stableKey\n\t\t\t\t// because two request with different fields have the same results\n\t\t\t\t// We're not able to ensure that because the server can decide to omit\n\t\t\t\t// fields from the response even if we explicitly asked for it.\n\t\t\t\t// Example: Asking for titles in posts without title support.\n\t\t\t\tif ( key === '_fields' ) {\n\t\t\t\t\tparts.fields = getNormalizedCommaSeparable( value ) ?? [];\n\t\t\t\t\t// Make sure to normalize value for `stableKey`\n\t\t\t\t\tvalue = parts.fields.join();\n\t\t\t\t}\n\n\t\t\t\t// Two requests with different include values cannot have same results.\n\t\t\t\tif ( key === 'include' ) {\n\t\t\t\t\tparts.include = (\n\t\t\t\t\t\tgetNormalizedCommaSeparable( value ) ?? []\n\t\t\t\t\t).map( Number );\n\t\t\t\t\t// Normalize value for `stableKey`.\n\t\t\t\t\tvalue = parts.include.join();\n\t\t\t\t}\n\n\t\t\t\t// While it could be any deterministic string, for simplicity's\n\t\t\t\t// sake mimic querystring encoding for stable key.\n\t\t\t\t//\n\t\t\t\t// TODO: For consistency with PHP implementation, addQueryArgs\n\t\t\t\t// should accept a key value pair, which may optimize its\n\t\t\t\t// implementation for our use here, vs. iterating an object\n\t\t\t\t// with only a single key.\n\t\t\t\tparts.stableKey +=\n\t\t\t\t\t( parts.stableKey ? '&' : '' ) +\n\t\t\t\t\taddQueryArgs( '', { [ key ]: value } ).slice( 1 );\n\t\t}\n\t}\n\n\treturn parts;\n}\n\nexport default withWeakMapCache( getQueryParts );\n","/**\n * External dependencies\n */\nimport { isObjectLike } from 'lodash';\n\n/**\n * Given a function, returns an enhanced function which caches the result and\n * tracks in WeakMap. The result is only cached if the original function is\n * passed a valid object-like argument (requirement for WeakMap key).\n *\n * @param {Function} fn Original function.\n *\n * @return {Function} Enhanced caching function.\n */\nfunction withWeakMapCache( fn ) {\n\tconst cache = new WeakMap();\n\n\treturn ( key ) => {\n\t\tlet value;\n\t\tif ( cache.has( key ) ) {\n\t\t\tvalue = cache.get( key );\n\t\t} else {\n\t\t\tvalue = fn( key );\n\n\t\t\t// Can reach here if key is not valid for WeakMap, since `has`\n\t\t\t// will return false for invalid key. Since `set` will throw,\n\t\t\t// ensure that key is valid before setting into cache.\n\t\t\tif ( isObjectLike( key ) ) {\n\t\t\t\tcache.set( key, value );\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t};\n}\n\nexport default withWeakMapCache;\n","/**\n * External dependencies\n */\nimport { map, flowRight, omit, filter, mapValues } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tconservativeMapItem,\n\tifMatchingAction,\n\treplaceAction,\n\tonSubKey,\n} from '../utils';\nimport { DEFAULT_ENTITY_KEY } from '../entities';\nimport getQueryParts from './get-query-parts';\n\nfunction getContextFromAction( action ) {\n\tconst { query } = action;\n\tif ( ! query ) {\n\t\treturn 'default';\n\t}\n\n\tconst queryParts = getQueryParts( query );\n\treturn queryParts.context;\n}\n\n/**\n * Returns a merged array of item IDs, given details of the received paginated\n * items. The array is sparse-like with `undefined` entries where holes exist.\n *\n * @param {?Array<number>} itemIds     Original item IDs (default empty array).\n * @param {number[]}       nextItemIds Item IDs to merge.\n * @param {number}         page        Page of items merged.\n * @param {number}         perPage     Number of items per page.\n *\n * @return {number[]} Merged array of item IDs.\n */\nexport function getMergedItemIds( itemIds, nextItemIds, page, perPage ) {\n\tconst receivedAllIds = page === 1 && perPage === -1;\n\tif ( receivedAllIds ) {\n\t\treturn nextItemIds;\n\t}\n\tconst nextItemIdsStartIndex = ( page - 1 ) * perPage;\n\n\t// If later page has already been received, default to the larger known\n\t// size of the existing array, else calculate as extending the existing.\n\tconst size = Math.max(\n\t\titemIds?.length ?? 0,\n\t\tnextItemIdsStartIndex + nextItemIds.length\n\t);\n\n\t// Preallocate array since size is known.\n\tconst mergedItemIds = new Array( size );\n\n\tfor ( let i = 0; i < size; i++ ) {\n\t\t// Preserve existing item ID except for subset of range of next items.\n\t\tconst isInNextItemsRange =\n\t\t\ti >= nextItemIdsStartIndex &&\n\t\t\ti < nextItemIdsStartIndex + nextItemIds.length;\n\n\t\tmergedItemIds[ i ] = isInNextItemsRange\n\t\t\t? nextItemIds[ i - nextItemIdsStartIndex ]\n\t\t\t: itemIds?.[ i ];\n\t}\n\n\treturn mergedItemIds;\n}\n\n/**\n * Reducer tracking items state, keyed by ID. Items are assumed to be normal,\n * where identifiers are common across all queries.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Next state.\n */\nexport function items( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_ITEMS': {\n\t\t\tconst context = getContextFromAction( action );\n\t\t\tconst key = action.key || DEFAULT_ENTITY_KEY;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ context ]: {\n\t\t\t\t\t...state[ context ],\n\t\t\t\t\t...action.items.reduce( ( accumulator, value ) => {\n\t\t\t\t\t\tconst itemId = value[ key ];\n\t\t\t\t\t\taccumulator[ itemId ] = conservativeMapItem(\n\t\t\t\t\t\t\tstate?.[ context ]?.[ itemId ],\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t}, {} ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tcase 'REMOVE_ITEMS':\n\t\t\treturn mapValues( state, ( contextState ) =>\n\t\t\t\tomit( contextState, action.itemIds )\n\t\t\t);\n\t}\n\treturn state;\n}\n\n/**\n * Reducer tracking item completeness, keyed by ID. A complete item is one for\n * which all fields are known. This is used in supporting `_fields` queries,\n * where not all properties associated with an entity are necessarily returned.\n * In such cases, completeness is used as an indication of whether it would be\n * safe to use queried data for a non-`_fields`-limited request.\n *\n * @param {Object<string,Object<string,boolean>>} state  Current state.\n * @param {Object}                                action Dispatched action.\n *\n * @return {Object<string,Object<string,boolean>>} Next state.\n */\nexport function itemIsComplete( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_ITEMS': {\n\t\t\tconst context = getContextFromAction( action );\n\t\t\tconst { query, key = DEFAULT_ENTITY_KEY } = action;\n\n\t\t\t// An item is considered complete if it is received without an associated\n\t\t\t// fields query. Ideally, this would be implemented in such a way where the\n\t\t\t// complete aggregate of all fields would satisfy completeness. Since the\n\t\t\t// fields are not consistent across all entities, this would require\n\t\t\t// introspection on the REST schema for each entity to know which fields\n\t\t\t// compose a complete item for that entity.\n\t\t\tconst queryParts = query ? getQueryParts( query ) : {};\n\t\t\tconst isCompleteQuery =\n\t\t\t\t! query || ! Array.isArray( queryParts.fields );\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ context ]: {\n\t\t\t\t\t...state[ context ],\n\t\t\t\t\t...action.items.reduce( ( result, item ) => {\n\t\t\t\t\t\tconst itemId = item[ key ];\n\n\t\t\t\t\t\t// Defer to completeness if already assigned. Technically the\n\t\t\t\t\t\t// data may be outdated if receiving items for a field subset.\n\t\t\t\t\t\tresult[ itemId ] =\n\t\t\t\t\t\t\tstate?.[ context ]?.[ itemId ] || isCompleteQuery;\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}, {} ),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\tcase 'REMOVE_ITEMS':\n\t\t\treturn mapValues( state, ( contextState ) =>\n\t\t\t\tomit( contextState, action.itemIds )\n\t\t\t);\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer tracking queries state, keyed by stable query key. Each reducer\n * query object includes `itemIds` and `requestingPageByPerPage`.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Next state.\n */\nconst receiveQueries = flowRight( [\n\t// Limit to matching action type so we don't attempt to replace action on\n\t// an unhandled action.\n\tifMatchingAction( ( action ) => 'query' in action ),\n\n\t// Inject query parts into action for use both in `onSubKey` and reducer.\n\treplaceAction( ( action ) => {\n\t\t// `ifMatchingAction` still passes on initialization, where state is\n\t\t// undefined and a query is not assigned. Avoid attempting to parse\n\t\t// parts. `onSubKey` will omit by lack of `stableKey`.\n\t\tif ( action.query ) {\n\t\t\treturn {\n\t\t\t\t...action,\n\t\t\t\t...getQueryParts( action.query ),\n\t\t\t};\n\t\t}\n\n\t\treturn action;\n\t} ),\n\n\tonSubKey( 'context' ),\n\n\t// Queries shape is shared, but keyed by query `stableKey` part. Original\n\t// reducer tracks only a single query object.\n\tonSubKey( 'stableKey' ),\n] )( ( state = null, action ) => {\n\tconst { type, page, perPage, key = DEFAULT_ENTITY_KEY } = action;\n\n\tif ( type !== 'RECEIVE_ITEMS' ) {\n\t\treturn state;\n\t}\n\n\treturn getMergedItemIds(\n\t\tstate || [],\n\t\tmap( action.items, key ),\n\t\tpage,\n\t\tperPage\n\t);\n} );\n\n/**\n * Reducer tracking queries state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Next state.\n */\nconst queries = ( state = {}, action ) => {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_ITEMS':\n\t\t\treturn receiveQueries( state, action );\n\t\tcase 'REMOVE_ITEMS':\n\t\t\tconst removedItems = action.itemIds.reduce( ( result, itemId ) => {\n\t\t\t\tresult[ itemId ] = true;\n\t\t\t\treturn result;\n\t\t\t}, {} );\n\n\t\t\treturn mapValues( state, ( contextQueries ) => {\n\t\t\t\treturn mapValues( contextQueries, ( queryItems ) => {\n\t\t\t\t\treturn filter( queryItems, ( queryId ) => {\n\t\t\t\t\t\treturn ! removedItems[ queryId ];\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default combineReducers( {\n\titems,\n\titemIsComplete,\n\tqueries,\n} );\n","/**\n * External dependencies\n */\nimport { keyBy, map, groupBy, flowRight, isEqual, get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport { ifMatchingAction, replaceAction } from './utils';\nimport { reducer as queriedDataReducer } from './queried-data';\nimport { rootEntitiesConfig, DEFAULT_ENTITY_KEY } from './entities';\n\n/** @typedef {import('./types').AnyFunction} AnyFunction */\n\n/**\n * Reducer managing terms state. Keyed by taxonomy slug, the value is either\n * undefined (if no request has been made for given taxonomy), null (if a\n * request is in-flight for given taxonomy), or the array of terms for the\n * taxonomy.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function terms( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_TERMS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.taxonomy ]: action.terms,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing authors state. Keyed by id.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function users( state = { byId: {}, queries: {} }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_USER_QUERY':\n\t\t\treturn {\n\t\t\t\tbyId: {\n\t\t\t\t\t...state.byId,\n\t\t\t\t\t...keyBy( action.users, 'id' ),\n\t\t\t\t},\n\t\t\t\tqueries: {\n\t\t\t\t\t...state.queries,\n\t\t\t\t\t[ action.queryID ]: map(\n\t\t\t\t\t\taction.users,\n\t\t\t\t\t\t( user ) => user.id\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing current user state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function currentUser( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_CURRENT_USER':\n\t\t\treturn action.currentUser;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing taxonomies.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function taxonomies( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_TAXONOMIES':\n\t\t\treturn action.taxonomies;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the current theme.\n *\n * @param {string|undefined} state  Current state.\n * @param {Object}           action Dispatched action.\n *\n * @return {string|undefined} Updated state.\n */\nexport function currentTheme( state = undefined, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_CURRENT_THEME':\n\t\t\treturn action.currentTheme.stylesheet;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the current global styles id.\n *\n * @param {string|undefined} state  Current state.\n * @param {Object}           action Dispatched action.\n *\n * @return {string|undefined} Updated state.\n */\nexport function currentGlobalStylesId( state = undefined, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_CURRENT_GLOBAL_STYLES_ID':\n\t\t\treturn action.id;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the theme base global styles.\n *\n * @param {Record<string, object>} state  Current state.\n * @param {Object}                 action Dispatched action.\n *\n * @return {Record<string, object>} Updated state.\n */\nexport function themeBaseGlobalStyles( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_THEME_GLOBAL_STYLES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.stylesheet ]: action.globalStyles,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the theme global styles variations.\n *\n * @param {Record<string, object>} state  Current state.\n * @param {Object}                 action Dispatched action.\n *\n * @return {Record<string, object>} Updated state.\n */\nexport function themeGlobalStyleVariations( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.stylesheet ]: action.variations,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Higher Order Reducer for a given entity config. It supports:\n *\n *  - Fetching\n *  - Editing\n *  - Saving\n *\n * @param {Object} entityConfig Entity config.\n *\n * @return {AnyFunction} Reducer.\n */\nfunction entity( entityConfig ) {\n\treturn flowRight( [\n\t\t// Limit to matching action type so we don't attempt to replace action on\n\t\t// an unhandled action.\n\t\tifMatchingAction(\n\t\t\t( action ) =>\n\t\t\t\taction.name &&\n\t\t\t\taction.kind &&\n\t\t\t\taction.name === entityConfig.name &&\n\t\t\t\taction.kind === entityConfig.kind\n\t\t),\n\n\t\t// Inject the entity config into the action.\n\t\treplaceAction( ( action ) => {\n\t\t\treturn {\n\t\t\t\t...action,\n\t\t\t\tkey: entityConfig.key || DEFAULT_ENTITY_KEY,\n\t\t\t};\n\t\t} ),\n\t] )(\n\t\tcombineReducers( {\n\t\t\tqueriedData: queriedDataReducer,\n\n\t\t\tedits: ( state = {}, action ) => {\n\t\t\t\tswitch ( action.type ) {\n\t\t\t\t\tcase 'RECEIVE_ITEMS':\n\t\t\t\t\t\tconst context = action?.query?.context ?? 'default';\n\t\t\t\t\t\tif ( context !== 'default' ) {\n\t\t\t\t\t\t\treturn state;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst nextState = { ...state };\n\n\t\t\t\t\t\tfor ( const record of action.items ) {\n\t\t\t\t\t\t\tconst recordId = record[ action.key ];\n\t\t\t\t\t\t\tconst edits = nextState[ recordId ];\n\t\t\t\t\t\t\tif ( ! edits ) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst nextEdits = Object.keys( edits ).reduce(\n\t\t\t\t\t\t\t\t( acc, key ) => {\n\t\t\t\t\t\t\t\t\t// If the edited value is still different to the persisted value,\n\t\t\t\t\t\t\t\t\t// keep the edited value in edits.\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t// Edits are the \"raw\" attribute values, but records may have\n\t\t\t\t\t\t\t\t\t\t// objects with more properties, so we use `get` here for the\n\t\t\t\t\t\t\t\t\t\t// comparison.\n\t\t\t\t\t\t\t\t\t\t! isEqual(\n\t\t\t\t\t\t\t\t\t\t\tedits[ key ],\n\t\t\t\t\t\t\t\t\t\t\tget(\n\t\t\t\t\t\t\t\t\t\t\t\trecord[ key ],\n\t\t\t\t\t\t\t\t\t\t\t\t'raw',\n\t\t\t\t\t\t\t\t\t\t\t\trecord[ key ]\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t// Sometimes the server alters the sent value which means\n\t\t\t\t\t\t\t\t\t\t// we need to also remove the edits before the api request.\n\t\t\t\t\t\t\t\t\t\t( ! action.persistedEdits ||\n\t\t\t\t\t\t\t\t\t\t\t! isEqual(\n\t\t\t\t\t\t\t\t\t\t\t\tedits[ key ],\n\t\t\t\t\t\t\t\t\t\t\t\taction.persistedEdits[ key ]\n\t\t\t\t\t\t\t\t\t\t\t) )\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tacc[ key ] = edits[ key ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( Object.keys( nextEdits ).length ) {\n\t\t\t\t\t\t\t\tnextState[ recordId ] = nextEdits;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdelete nextState[ recordId ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn nextState;\n\n\t\t\t\t\tcase 'EDIT_ENTITY_RECORD':\n\t\t\t\t\t\tconst nextEdits = {\n\t\t\t\t\t\t\t...state[ action.recordId ],\n\t\t\t\t\t\t\t...action.edits,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tObject.keys( nextEdits ).forEach( ( key ) => {\n\t\t\t\t\t\t\t// Delete cleared edits so that the properties\n\t\t\t\t\t\t\t// are not considered dirty.\n\t\t\t\t\t\t\tif ( nextEdits[ key ] === undefined ) {\n\t\t\t\t\t\t\t\tdelete nextEdits[ key ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t[ action.recordId ]: nextEdits,\n\t\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t},\n\n\t\t\tsaving: ( state = {}, action ) => {\n\t\t\t\tswitch ( action.type ) {\n\t\t\t\t\tcase 'SAVE_ENTITY_RECORD_START':\n\t\t\t\t\tcase 'SAVE_ENTITY_RECORD_FINISH':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t[ action.recordId ]: {\n\t\t\t\t\t\t\t\tpending:\n\t\t\t\t\t\t\t\t\taction.type === 'SAVE_ENTITY_RECORD_START',\n\t\t\t\t\t\t\t\terror: action.error,\n\t\t\t\t\t\t\t\tisAutosave: action.isAutosave,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t},\n\n\t\t\tdeleting: ( state = {}, action ) => {\n\t\t\t\tswitch ( action.type ) {\n\t\t\t\t\tcase 'DELETE_ENTITY_RECORD_START':\n\t\t\t\t\tcase 'DELETE_ENTITY_RECORD_FINISH':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...state,\n\t\t\t\t\t\t\t[ action.recordId ]: {\n\t\t\t\t\t\t\t\tpending:\n\t\t\t\t\t\t\t\t\taction.type ===\n\t\t\t\t\t\t\t\t\t'DELETE_ENTITY_RECORD_START',\n\t\t\t\t\t\t\t\terror: action.error,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t},\n\t\t} )\n\t);\n}\n\n/**\n * Reducer keeping track of the registered entities.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function entitiesConfig( state = rootEntitiesConfig, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_ENTITIES':\n\t\t\treturn [ ...state, ...action.entities ];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer keeping track of the registered entities config and data.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const entities = ( state = {}, action ) => {\n\tconst newConfig = entitiesConfig( state.config, action );\n\n\t// Generates a dynamic reducer for the entities.\n\tlet entitiesDataReducer = state.reducer;\n\tif ( ! entitiesDataReducer || newConfig !== state.config ) {\n\t\tconst entitiesByKind = groupBy( newConfig, 'kind' );\n\t\tentitiesDataReducer = combineReducers(\n\t\t\tObject.entries( entitiesByKind ).reduce(\n\t\t\t\t( memo, [ kind, subEntities ] ) => {\n\t\t\t\t\tconst kindReducer = combineReducers(\n\t\t\t\t\t\tsubEntities.reduce(\n\t\t\t\t\t\t\t( kindMemo, entityConfig ) => ( {\n\t\t\t\t\t\t\t\t...kindMemo,\n\t\t\t\t\t\t\t\t[ entityConfig.name ]: entity( entityConfig ),\n\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tmemo[ kind ] = kindReducer;\n\t\t\t\t\treturn memo;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t)\n\t\t);\n\t}\n\n\tconst newData = entitiesDataReducer( state.records, action );\n\n\tif (\n\t\tnewData === state.records &&\n\t\tnewConfig === state.config &&\n\t\tentitiesDataReducer === state.reducer\n\t) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\treducer: entitiesDataReducer,\n\t\trecords: newData,\n\t\tconfig: newConfig,\n\t};\n};\n\n/**\n * @typedef {Object} UndoStateMeta\n *\n * @property {number} offset          Where in the undo stack we are.\n * @property {Object} [flattenedUndo] Flattened form of undo stack.\n */\n\n/** @typedef {Array<Object> & UndoStateMeta} UndoState */\n\n/**\n * @type {UndoState}\n *\n * @todo Given how we use this we might want to make a custom class for it.\n */\nconst UNDO_INITIAL_STATE = Object.assign( [], { offset: 0 } );\n\n/** @type {Object} */\nlet lastEditAction;\n\n/**\n * Reducer keeping track of entity edit undo history.\n *\n * @param {UndoState} state  Current state.\n * @param {Object}    action Dispatched action.\n *\n * @return {UndoState} Updated state.\n */\nexport function undo( state = UNDO_INITIAL_STATE, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'EDIT_ENTITY_RECORD':\n\t\tcase 'CREATE_UNDO_LEVEL':\n\t\t\tlet isCreateUndoLevel = action.type === 'CREATE_UNDO_LEVEL';\n\t\t\tconst isUndoOrRedo =\n\t\t\t\t! isCreateUndoLevel &&\n\t\t\t\t( action.meta.isUndo || action.meta.isRedo );\n\t\t\tif ( isCreateUndoLevel ) {\n\t\t\t\taction = lastEditAction;\n\t\t\t} else if ( ! isUndoOrRedo ) {\n\t\t\t\t// Don't lose the last edit cache if the new one only has transient edits.\n\t\t\t\t// Transient edits don't create new levels so updating the cache would make\n\t\t\t\t// us skip an edit later when creating levels explicitly.\n\t\t\t\tif (\n\t\t\t\t\tObject.keys( action.edits ).some(\n\t\t\t\t\t\t( key ) => ! action.transientEdits[ key ]\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tlastEditAction = action;\n\t\t\t\t} else {\n\t\t\t\t\tlastEditAction = {\n\t\t\t\t\t\t...action,\n\t\t\t\t\t\tedits: {\n\t\t\t\t\t\t\t...( lastEditAction && lastEditAction.edits ),\n\t\t\t\t\t\t\t...action.edits,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/** @type {UndoState} */\n\t\t\tlet nextState;\n\n\t\t\tif ( isUndoOrRedo ) {\n\t\t\t\t// @ts-ignore we might consider using Object.assign({}, state)\n\t\t\t\tnextState = [ ...state ];\n\t\t\t\tnextState.offset =\n\t\t\t\t\tstate.offset + ( action.meta.isUndo ? -1 : 1 );\n\n\t\t\t\tif ( state.flattenedUndo ) {\n\t\t\t\t\t// The first undo in a sequence of undos might happen while we have\n\t\t\t\t\t// flattened undos in state. If this is the case, we want execution\n\t\t\t\t\t// to continue as if we were creating an explicit undo level. This\n\t\t\t\t\t// will result in an extra undo level being appended with the flattened\n\t\t\t\t\t// undo values.\n\t\t\t\t\t// We also have to take into account if the `lastEditAction` had opted out\n\t\t\t\t\t// of being tracked in undo history, like the action that persists the latest\n\t\t\t\t\t// content right before saving. In that case we have to update the `lastEditAction`\n\t\t\t\t\t// to avoid returning early before applying the existing flattened undos.\n\t\t\t\t\tisCreateUndoLevel = true;\n\t\t\t\t\tif ( ! lastEditAction.meta.undo ) {\n\t\t\t\t\t\tlastEditAction.meta.undo = {\n\t\t\t\t\t\t\tedits: {},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\taction = lastEditAction;\n\t\t\t\t} else {\n\t\t\t\t\treturn nextState;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! action.meta.undo ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\t// Transient edits don't create an undo level, but are\n\t\t\t// reachable in the next meaningful edit to which they\n\t\t\t// are merged. They are defined in the entity's config.\n\t\t\tif (\n\t\t\t\t! isCreateUndoLevel &&\n\t\t\t\t! Object.keys( action.edits ).some(\n\t\t\t\t\t( key ) => ! action.transientEdits[ key ]\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// @ts-ignore we might consider using Object.assign({}, state)\n\t\t\t\tnextState = [ ...state ];\n\t\t\t\tnextState.flattenedUndo = {\n\t\t\t\t\t...state.flattenedUndo,\n\t\t\t\t\t...action.edits,\n\t\t\t\t};\n\t\t\t\tnextState.offset = state.offset;\n\t\t\t\treturn nextState;\n\t\t\t}\n\n\t\t\t// Clear potential redos, because this only supports linear history.\n\t\t\tnextState =\n\t\t\t\t// @ts-ignore this needs additional cleanup, probably involving code-level changes\n\t\t\t\tnextState || state.slice( 0, state.offset || undefined );\n\t\t\tnextState.offset = nextState.offset || 0;\n\t\t\tnextState.pop();\n\t\t\tif ( ! isCreateUndoLevel ) {\n\t\t\t\tnextState.push( {\n\t\t\t\t\tkind: action.meta.undo.kind,\n\t\t\t\t\tname: action.meta.undo.name,\n\t\t\t\t\trecordId: action.meta.undo.recordId,\n\t\t\t\t\tedits: {\n\t\t\t\t\t\t...state.flattenedUndo,\n\t\t\t\t\t\t...action.meta.undo.edits,\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t\t// When an edit is a function it's an optimization to avoid running some expensive operation.\n\t\t\t// We can't rely on the function references being the same so we opt out of comparing them here.\n\t\t\tconst comparisonUndoEdits = Object.values(\n\t\t\t\taction.meta.undo.edits\n\t\t\t).filter( ( edit ) => typeof edit !== 'function' );\n\t\t\tconst comparisonEdits = Object.values( action.edits ).filter(\n\t\t\t\t( edit ) => typeof edit !== 'function'\n\t\t\t);\n\t\t\tif ( ! isShallowEqual( comparisonUndoEdits, comparisonEdits ) ) {\n\t\t\t\tnextState.push( {\n\t\t\t\t\tkind: action.kind,\n\t\t\t\t\tname: action.name,\n\t\t\t\t\trecordId: action.recordId,\n\t\t\t\t\tedits: isCreateUndoLevel\n\t\t\t\t\t\t? { ...state.flattenedUndo, ...action.edits }\n\t\t\t\t\t\t: action.edits,\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn nextState;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing embed preview data.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function embedPreviews( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_EMBED_PREVIEW':\n\t\t\tconst { url, preview } = action;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ url ]: preview,\n\t\t\t};\n\t}\n\treturn state;\n}\n\n/**\n * State which tracks whether the user can perform an action on a REST\n * resource.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function userPermissions( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_USER_PERMISSION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.key ]: action.isAllowed,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning autosaves keyed by their parent's post id.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function autosaves( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_AUTOSAVES':\n\t\t\tconst { postId, autosaves: autosavesData } = action;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ postId ]: autosavesData,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\nexport function blockPatterns( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_BLOCK_PATTERNS':\n\t\t\treturn action.patterns;\n\t}\n\n\treturn state;\n}\n\nexport function blockPatternCategories( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RECEIVE_BLOCK_PATTERN_CATEGORIES':\n\t\t\treturn action.categories;\n\t}\n\n\treturn state;\n}\n\nexport default combineReducers( {\n\tterms,\n\tusers,\n\tcurrentTheme,\n\tcurrentGlobalStylesId,\n\tcurrentUser,\n\tthemeGlobalStyleVariations,\n\tthemeBaseGlobalStyles,\n\ttaxonomies,\n\tentities,\n\tundo,\n\tembedPreviews,\n\tuserPermissions,\n\tautosaves,\n\tblockPatterns,\n\tblockPatternCategories,\n} );\n","'use strict';\n\nvar LEAF_KEY, hasWeakMap;\n\n/**\n * Arbitrary value used as key for referencing cache object in WeakMap tree.\n *\n * @type {Object}\n */\nLEAF_KEY = {};\n\n/**\n * Whether environment supports WeakMap.\n *\n * @type {boolean}\n */\nhasWeakMap = typeof WeakMap !== 'undefined';\n\n/**\n * Returns the first argument as the sole entry in an array.\n *\n * @param {*} value Value to return.\n *\n * @return {Array} Value returned as entry in array.\n */\nfunction arrayOf( value ) {\n\treturn [ value ];\n}\n\n/**\n * Returns true if the value passed is object-like, or false otherwise. A value\n * is object-like if it can support property assignment, e.g. object or array.\n *\n * @param {*} value Value to test.\n *\n * @return {boolean} Whether value is object-like.\n */\nfunction isObjectLike( value ) {\n\treturn !! value && 'object' === typeof value;\n}\n\n/**\n * Creates and returns a new cache object.\n *\n * @return {Object} Cache object.\n */\nfunction createCache() {\n\tvar cache = {\n\t\tclear: function() {\n\t\t\tcache.head = null;\n\t\t},\n\t};\n\n\treturn cache;\n}\n\n/**\n * Returns true if entries within the two arrays are strictly equal by\n * reference from a starting index.\n *\n * @param {Array}  a         First array.\n * @param {Array}  b         Second array.\n * @param {number} fromIndex Index from which to start comparison.\n *\n * @return {boolean} Whether arrays are shallowly equal.\n */\nfunction isShallowEqual( a, b, fromIndex ) {\n\tvar i;\n\n\tif ( a.length !== b.length ) {\n\t\treturn false;\n\t}\n\n\tfor ( i = fromIndex; i < a.length; i++ ) {\n\t\tif ( a[ i ] !== b[ i ] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns a memoized selector function. The getDependants function argument is\n * called before the memoized selector and is expected to return an immutable\n * reference or array of references on which the selector depends for computing\n * its own return value. The memoize cache is preserved only as long as those\n * dependant references remain the same. If getDependants returns a different\n * reference(s), the cache is cleared and the selector value regenerated.\n *\n * @param {Function} selector      Selector function.\n * @param {Function} getDependants Dependant getter returning an immutable\n *                                 reference or array of reference used in\n *                                 cache bust consideration.\n *\n * @return {Function} Memoized selector.\n */\nexport default function( selector, getDependants ) {\n\tvar rootCache, getCache;\n\n\t// Use object source as dependant if getter not provided\n\tif ( ! getDependants ) {\n\t\tgetDependants = arrayOf;\n\t}\n\n\t/**\n\t * Returns the root cache. If WeakMap is supported, this is assigned to the\n\t * root WeakMap cache set, otherwise it is a shared instance of the default\n\t * cache object.\n\t *\n\t * @return {(WeakMap|Object)} Root cache object.\n\t */\n\tfunction getRootCache() {\n\t\treturn rootCache;\n\t}\n\n\t/**\n\t * Returns the cache for a given dependants array. When possible, a WeakMap\n\t * will be used to create a unique cache for each set of dependants. This\n\t * is feasible due to the nature of WeakMap in allowing garbage collection\n\t * to occur on entries where the key object is no longer referenced. Since\n\t * WeakMap requires the key to be an object, this is only possible when the\n\t * dependant is object-like. The root cache is created as a hierarchy where\n\t * each top-level key is the first entry in a dependants set, the value a\n\t * WeakMap where each key is the next dependant, and so on. This continues\n\t * so long as the dependants are object-like. If no dependants are object-\n\t * like, then the cache is shared across all invocations.\n\t *\n\t * @see isObjectLike\n\t *\n\t * @param {Array} dependants Selector dependants.\n\t *\n\t * @return {Object} Cache object.\n\t */\n\tfunction getWeakMapCache( dependants ) {\n\t\tvar caches = rootCache,\n\t\t\tisUniqueByDependants = true,\n\t\t\ti, dependant, map, cache;\n\n\t\tfor ( i = 0; i < dependants.length; i++ ) {\n\t\t\tdependant = dependants[ i ];\n\n\t\t\t// Can only compose WeakMap from object-like key.\n\t\t\tif ( ! isObjectLike( dependant ) ) {\n\t\t\t\tisUniqueByDependants = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Does current segment of cache already have a WeakMap?\n\t\t\tif ( caches.has( dependant ) ) {\n\t\t\t\t// Traverse into nested WeakMap.\n\t\t\t\tcaches = caches.get( dependant );\n\t\t\t} else {\n\t\t\t\t// Create, set, and traverse into a new one.\n\t\t\t\tmap = new WeakMap();\n\t\t\t\tcaches.set( dependant, map );\n\t\t\t\tcaches = map;\n\t\t\t}\n\t\t}\n\n\t\t// We use an arbitrary (but consistent) object as key for the last item\n\t\t// in the WeakMap to serve as our running cache.\n\t\tif ( ! caches.has( LEAF_KEY ) ) {\n\t\t\tcache = createCache();\n\t\t\tcache.isUniqueByDependants = isUniqueByDependants;\n\t\t\tcaches.set( LEAF_KEY, cache );\n\t\t}\n\n\t\treturn caches.get( LEAF_KEY );\n\t}\n\n\t// Assign cache handler by availability of WeakMap\n\tgetCache = hasWeakMap ? getWeakMapCache : getRootCache;\n\n\t/**\n\t * Resets root memoization cache.\n\t */\n\tfunction clear() {\n\t\trootCache = hasWeakMap ? new WeakMap() : createCache();\n\t}\n\n\t// eslint-disable-next-line jsdoc/check-param-names\n\t/**\n\t * The augmented selector call, considering first whether dependants have\n\t * changed before passing it to underlying memoize function.\n\t *\n\t * @param {Object} source    Source object for derivation.\n\t * @param {...*}   extraArgs Additional arguments to pass to selector.\n\t *\n\t * @return {*} Selector result.\n\t */\n\tfunction callSelector( /* source, ...extraArgs */ ) {\n\t\tvar len = arguments.length,\n\t\t\tcache, node, i, args, dependants;\n\n\t\t// Create copy of arguments (avoid leaking deoptimization).\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tdependants = getDependants.apply( null, args );\n\t\tcache = getCache( dependants );\n\n\t\t// If not guaranteed uniqueness by dependants (primitive type or lack\n\t\t// of WeakMap support), shallow compare against last dependants and, if\n\t\t// references have changed, destroy cache to recalculate result.\n\t\tif ( ! cache.isUniqueByDependants ) {\n\t\t\tif ( cache.lastDependants && ! isShallowEqual( dependants, cache.lastDependants, 0 ) ) {\n\t\t\t\tcache.clear();\n\t\t\t}\n\n\t\t\tcache.lastDependants = dependants;\n\t\t}\n\n\t\tnode = cache.head;\n\t\twhile ( node ) {\n\t\t\t// Check whether node arguments match arguments\n\t\t\tif ( ! isShallowEqual( node.args, args, 1 ) ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== cache.head ) {\n\t\t\t\t// Adjust siblings to point to each other.\n\t\t\t\tnode.prev.next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = cache.head;\n\t\t\t\tnode.prev = null;\n\t\t\t\tcache.head.prev = node;\n\t\t\t\tcache.head = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\tnode = {\n\t\t\t// Generate the result from original function\n\t\t\tval: selector.apply( null, args ),\n\t\t};\n\n\t\t// Avoid including the source object in the cache.\n\t\targs[ 0 ] = null;\n\t\tnode.args = args;\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( cache.head ) {\n\t\t\tcache.head.prev = node;\n\t\t\tnode.next = cache.head;\n\t\t}\n\n\t\tcache.head = node;\n\n\t\treturn node.val;\n\t}\n\n\tcallSelector.getDependants = getDependants;\n\tcallSelector.clear = clear;\n\tclear();\n\n\treturn callSelector;\n}\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\nimport EquivalentKeyMap from 'equivalent-key-map';\nimport { get, set } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport getQueryParts from './get-query-parts';\n\n/**\n * Cache of state keys to EquivalentKeyMap where the inner map tracks queries\n * to their resulting items set. WeakMap allows garbage collection on expired\n * state references.\n *\n * @type {WeakMap<Object,EquivalentKeyMap>}\n */\nconst queriedItemsCacheByState = new WeakMap();\n\n/**\n * Returns items for a given query, or null if the items are not known.\n *\n * @param {Object}  state State object.\n * @param {?Object} query Optional query.\n *\n * @return {?Array} Query items.\n */\nfunction getQueriedItemsUncached( state, query ) {\n\tconst {\n\t\tstableKey,\n\t\tpage,\n\t\tperPage,\n\t\tinclude,\n\t\tfields,\n\t\tcontext,\n\t} = getQueryParts( query );\n\tlet itemIds;\n\n\tif ( state.queries?.[ context ]?.[ stableKey ] ) {\n\t\titemIds = state.queries[ context ][ stableKey ];\n\t}\n\n\tif ( ! itemIds ) {\n\t\treturn null;\n\t}\n\n\tconst startOffset = perPage === -1 ? 0 : ( page - 1 ) * perPage;\n\tconst endOffset =\n\t\tperPage === -1\n\t\t\t? itemIds.length\n\t\t\t: Math.min( startOffset + perPage, itemIds.length );\n\n\tconst items = [];\n\tfor ( let i = startOffset; i < endOffset; i++ ) {\n\t\tconst itemId = itemIds[ i ];\n\t\tif ( Array.isArray( include ) && ! include.includes( itemId ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Having a target item ID doesn't guarantee that this object has been queried.\n\t\tif ( ! state.items[ context ]?.hasOwnProperty( itemId ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = state.items[ context ][ itemId ];\n\n\t\tlet filteredItem;\n\t\tif ( Array.isArray( fields ) ) {\n\t\t\tfilteredItem = {};\n\n\t\t\tfor ( let f = 0; f < fields.length; f++ ) {\n\t\t\t\tconst field = fields[ f ].split( '.' );\n\t\t\t\tconst value = get( item, field );\n\t\t\t\tset( filteredItem, field, value );\n\t\t\t}\n\t\t} else {\n\t\t\t// If expecting a complete item, validate that completeness, or\n\t\t\t// otherwise abort.\n\t\t\tif ( ! state.itemIsComplete[ context ]?.[ itemId ] ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfilteredItem = item;\n\t\t}\n\n\t\titems.push( filteredItem );\n\t}\n\n\treturn items;\n}\n\n/**\n * Returns items for a given query, or null if the items are not known. Caches\n * result both per state (by reference) and per query (by deep equality).\n * The caching approach is intended to be durable to query objects which are\n * deeply but not referentially equal, since otherwise:\n *\n * `getQueriedItems( state, {} ) !== getQueriedItems( state, {} )`\n *\n * @param {Object}  state State object.\n * @param {?Object} query Optional query.\n *\n * @return {?Array} Query items.\n */\nexport const getQueriedItems = createSelector( ( state, query = {} ) => {\n\tlet queriedItemsCache = queriedItemsCacheByState.get( state );\n\tif ( queriedItemsCache ) {\n\t\tconst queriedItems = queriedItemsCache.get( query );\n\t\tif ( queriedItems !== undefined ) {\n\t\t\treturn queriedItems;\n\t\t}\n\t} else {\n\t\tqueriedItemsCache = new EquivalentKeyMap();\n\t\tqueriedItemsCacheByState.set( state, queriedItemsCache );\n\t}\n\n\tconst items = getQueriedItemsUncached( state, query );\n\tqueriedItemsCache.set( query, items );\n\treturn items;\n} );\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\nimport { set, map, find, get, filter, compact } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createRegistrySelector } from '@wordpress/data';\nimport { addQueryArgs } from '@wordpress/url';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME } from './name';\nimport { getQueriedItems } from './queried-data';\nimport { DEFAULT_ENTITY_KEY } from './entities';\nimport { getNormalizedCommaSeparable, isRawAttribute } from './utils';\n\n/**\n * Shared reference to an empty object for cases where it is important to avoid\n * returning a new object reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n */\nconst EMPTY_OBJECT = {};\n\n/**\n * Returns true if a request is in progress for embed preview data, or false\n * otherwise.\n *\n * @param {Object} state Data state.\n * @param {string} url   URL the preview would be for.\n *\n * @return {boolean} Whether a request is in progress for an embed preview.\n */\nexport const isRequestingEmbedPreview = createRegistrySelector(\n\t( select ) => ( state, url ) => {\n\t\treturn select( STORE_NAME ).isResolving( 'getEmbedPreview', [ url ] );\n\t}\n);\n\n/**\n * Returns all available authors.\n *\n * @deprecated since 11.3. Callers should use `select( 'core' ).getUsers({ who: 'authors' })` instead.\n *\n * @param {Object}           state Data state.\n * @param {Object|undefined} query Optional object of query parameters to\n *                                 include with request.\n * @return {Array} Authors list.\n */\nexport function getAuthors( state, query ) {\n\tdeprecated( \"select( 'core' ).getAuthors()\", {\n\t\tsince: '5.9',\n\t\talternative: \"select( 'core' ).getUsers({ who: 'authors' })\",\n\t} );\n\n\tconst path = addQueryArgs(\n\t\t'/wp/v2/users/?who=authors&per_page=100',\n\t\tquery\n\t);\n\treturn getUserQueryResults( state, path );\n}\n\n/**\n * Returns the current user.\n *\n * @param {Object} state Data state.\n *\n * @return {Object} Current user object.\n */\nexport function getCurrentUser( state ) {\n\treturn state.currentUser;\n}\n\n/**\n * Returns all the users returned by a query ID.\n *\n * @param {Object} state   Data state.\n * @param {string} queryID Query ID.\n *\n * @return {Array} Users list.\n */\nexport const getUserQueryResults = createSelector(\n\t( state, queryID ) => {\n\t\tconst queryResults = state.users.queries[ queryID ];\n\n\t\treturn map( queryResults, ( id ) => state.users.byId[ id ] );\n\t},\n\t( state, queryID ) => [ state.users.queries[ queryID ], state.users.byId ]\n);\n\n/**\n * Returns the loaded entities for the given kind.\n *\n * @deprecated since WordPress 6.0. Use getEntitiesConfig instead\n * @param {Object} state Data state.\n * @param {string} kind  Entity kind.\n *\n * @return {Array<Object>} Array of entities with config matching kind.\n */\nexport function getEntitiesByKind( state, kind ) {\n\tdeprecated( \"wp.data.select( 'core' ).getEntitiesByKind()\", {\n\t\tsince: '6.0',\n\t\talternative: \"wp.data.select( 'core' ).getEntitiesConfig()\",\n\t} );\n\treturn getEntitiesConfig( state, kind );\n}\n\n/**\n * Returns the loaded entities for the given kind.\n *\n * @param {Object} state Data state.\n * @param {string} kind  Entity kind.\n *\n * @return {Array<Object>} Array of entities with config matching kind.\n */\nexport function getEntitiesConfig( state, kind ) {\n\treturn filter( state.entities.config, { kind } );\n}\n\n/**\n * Returns the entity config given its kind and name.\n *\n * @deprecated since WordPress 6.0. Use getEntityConfig instead\n * @param {Object} state Data state.\n * @param {string} kind  Entity kind.\n * @param {string} name  Entity name.\n *\n * @return {Object} Entity config\n */\nexport function getEntity( state, kind, name ) {\n\tdeprecated( \"wp.data.select( 'core' ).getEntity()\", {\n\t\tsince: '6.0',\n\t\talternative: \"wp.data.select( 'core' ).getEntityConfig()\",\n\t} );\n\treturn getEntityConfig( state, kind, name );\n}\n\n/**\n * Returns the entity config given its kind and name.\n *\n * @param {Object} state Data state.\n * @param {string} kind  Entity kind.\n * @param {string} name  Entity name.\n *\n * @return {Object} Entity config\n */\nexport function getEntityConfig( state, kind, name ) {\n\treturn find( state.entities.config, { kind, name } );\n}\n\n/**\n * Returns the Entity's record object by key. Returns `null` if the value is not\n * yet received, undefined if the value entity is known to not exist, or the\n * entity object if it exists and is received.\n *\n * @param {Object}  state State tree\n * @param {string}  kind  Entity kind.\n * @param {string}  name  Entity name.\n * @param {number}  key   Record's key\n * @param {?Object} query Optional query.\n *\n * @return {Object|undefined} Record.\n */\nexport const getEntityRecord = createSelector(\n\t( state, kind, name, key, query ) => {\n\t\tconst queriedState = get( state.entities.records, [\n\t\t\tkind,\n\t\t\tname,\n\t\t\t'queriedData',\n\t\t] );\n\t\tif ( ! queriedState ) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst context = query?.context ?? 'default';\n\n\t\tif ( query === undefined ) {\n\t\t\t// If expecting a complete item, validate that completeness.\n\t\t\tif ( ! queriedState.itemIsComplete[ context ]?.[ key ] ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn queriedState.items[ context ][ key ];\n\t\t}\n\n\t\tconst item = queriedState.items[ context ]?.[ key ];\n\t\tif ( item && query._fields ) {\n\t\t\tconst filteredItem = {};\n\t\t\tconst fields = getNormalizedCommaSeparable( query._fields ) ?? [];\n\t\t\tfor ( let f = 0; f < fields.length; f++ ) {\n\t\t\t\tconst field = fields[ f ].split( '.' );\n\t\t\t\tconst value = get( item, field );\n\t\t\t\tset( filteredItem, field, value );\n\t\t\t}\n\t\t\treturn filteredItem;\n\t\t}\n\n\t\treturn item;\n\t},\n\t( state, kind, name, recordId, query ) => {\n\t\tconst context = query?.context ?? 'default';\n\t\treturn [\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'items',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'itemIsComplete',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t];\n\t}\n);\n\n/**\n * Returns the Entity's record object by key. Doesn't trigger a resolver nor requests the entity records from the API if the entity record isn't available in the local state.\n *\n * @param {Object} state State tree\n * @param {string} kind  Entity kind.\n * @param {string} name  Entity name.\n * @param {number} key   Record's key\n *\n * @return {Object|null} Record.\n */\nexport function __experimentalGetEntityRecordNoResolver(\n\tstate,\n\tkind,\n\tname,\n\tkey\n) {\n\treturn getEntityRecord( state, kind, name, key );\n}\n\n/**\n * Returns the entity's record object by key,\n * with its attributes mapped to their raw values.\n *\n * @param {Object} state State tree.\n * @param {string} kind  Entity kind.\n * @param {string} name  Entity name.\n * @param {number} key   Record's key.\n *\n * @return {Object?} Object with the entity's raw attributes.\n */\nexport const getRawEntityRecord = createSelector(\n\t( state, kind, name, key ) => {\n\t\tconst record = getEntityRecord( state, kind, name, key );\n\t\treturn (\n\t\t\trecord &&\n\t\t\tObject.keys( record ).reduce( ( accumulator, _key ) => {\n\t\t\t\tif (\n\t\t\t\t\tisRawAttribute( getEntityConfig( state, kind, name ), _key )\n\t\t\t\t) {\n\t\t\t\t\t// Because edits are the \"raw\" attribute values,\n\t\t\t\t\t// we return those from record selectors to make rendering,\n\t\t\t\t\t// comparisons, and joins with edits easier.\n\t\t\t\t\taccumulator[ _key ] = get(\n\t\t\t\t\t\trecord[ _key ],\n\t\t\t\t\t\t'raw',\n\t\t\t\t\t\trecord[ _key ]\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\taccumulator[ _key ] = record[ _key ];\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, {} )\n\t\t);\n\t},\n\t( state, kind, name, recordId, query ) => {\n\t\tconst context = query?.context ?? 'default';\n\t\treturn [\n\t\t\tstate.entities.config,\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'items',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'itemIsComplete',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t];\n\t}\n);\n\n/**\n * Returns true if records have been received for the given set of parameters,\n * or false otherwise.\n *\n * @param {Object}  state State tree\n * @param {string}  kind  Entity kind.\n * @param {string}  name  Entity name.\n * @param {?Object} query Optional terms query.\n *\n * @return {boolean} Whether entity records have been received.\n */\nexport function hasEntityRecords( state, kind, name, query ) {\n\treturn Array.isArray( getEntityRecords( state, kind, name, query ) );\n}\n\n/**\n * Returns the Entity's records.\n *\n * @param {Object}  state State tree\n * @param {string}  kind  Entity kind.\n * @param {string}  name  Entity name.\n * @param {?Object} query Optional terms query.\n *\n * @return {?Array} Records.\n */\nexport function getEntityRecords( state, kind, name, query ) {\n\t// Queried data state is prepopulated for all known entities. If this is not\n\t// assigned for the given parameters, then it is known to not exist.\n\tconst queriedState = get( state.entities.records, [\n\t\tkind,\n\t\tname,\n\t\t'queriedData',\n\t] );\n\tif ( ! queriedState ) {\n\t\treturn null;\n\t}\n\treturn getQueriedItems( queriedState, query );\n}\n\n/**\n * Returns the  list of dirty entity records.\n *\n * @param {Object} state State tree.\n *\n * @return {[{ title: string, key: string, name: string, kind: string }]} The list of updated records\n */\nexport const __experimentalGetDirtyEntityRecords = createSelector(\n\t( state ) => {\n\t\tconst {\n\t\t\tentities: { records },\n\t\t} = state;\n\t\tconst dirtyRecords = [];\n\t\tObject.keys( records ).forEach( ( kind ) => {\n\t\t\tObject.keys( records[ kind ] ).forEach( ( name ) => {\n\t\t\t\tconst primaryKeys = Object.keys(\n\t\t\t\t\trecords[ kind ][ name ].edits\n\t\t\t\t).filter(\n\t\t\t\t\t( primaryKey ) =>\n\t\t\t\t\t\t// The entity record must exist (not be deleted),\n\t\t\t\t\t\t// and it must have edits.\n\t\t\t\t\t\tgetEntityRecord( state, kind, name, primaryKey ) &&\n\t\t\t\t\t\thasEditsForEntityRecord( state, kind, name, primaryKey )\n\t\t\t\t);\n\n\t\t\t\tif ( primaryKeys.length ) {\n\t\t\t\t\tconst entityConfig = getEntityConfig( state, kind, name );\n\t\t\t\t\tprimaryKeys.forEach( ( primaryKey ) => {\n\t\t\t\t\t\tconst entityRecord = getEditedEntityRecord(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tprimaryKey\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdirtyRecords.push( {\n\t\t\t\t\t\t\t// We avoid using primaryKey because it's transformed into a string\n\t\t\t\t\t\t\t// when it's used as an object key.\n\t\t\t\t\t\t\tkey:\n\t\t\t\t\t\t\t\tentityRecord[\n\t\t\t\t\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\tentityConfig?.getTitle?.( entityRecord ) || '',\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\treturn dirtyRecords;\n\t},\n\t( state ) => [ state.entities.records ]\n);\n\n/**\n * Returns the list of entities currently being saved.\n *\n * @param {Object} state State tree.\n *\n * @return {[{ title: string, key: string, name: string, kind: string }]} The list of records being saved.\n */\nexport const __experimentalGetEntitiesBeingSaved = createSelector(\n\t( state ) => {\n\t\tconst {\n\t\t\tentities: { records },\n\t\t} = state;\n\t\tconst recordsBeingSaved = [];\n\t\tObject.keys( records ).forEach( ( kind ) => {\n\t\t\tObject.keys( records[ kind ] ).forEach( ( name ) => {\n\t\t\t\tconst primaryKeys = Object.keys(\n\t\t\t\t\trecords[ kind ][ name ].saving\n\t\t\t\t).filter( ( primaryKey ) =>\n\t\t\t\t\tisSavingEntityRecord( state, kind, name, primaryKey )\n\t\t\t\t);\n\n\t\t\t\tif ( primaryKeys.length ) {\n\t\t\t\t\tconst entityConfig = getEntityConfig( state, kind, name );\n\t\t\t\t\tprimaryKeys.forEach( ( primaryKey ) => {\n\t\t\t\t\t\tconst entityRecord = getEditedEntityRecord(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tprimaryKey\n\t\t\t\t\t\t);\n\t\t\t\t\t\trecordsBeingSaved.push( {\n\t\t\t\t\t\t\t// We avoid using primaryKey because it's transformed into a string\n\t\t\t\t\t\t\t// when it's used as an object key.\n\t\t\t\t\t\t\tkey:\n\t\t\t\t\t\t\t\tentityRecord[\n\t\t\t\t\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\ttitle:\n\t\t\t\t\t\t\t\tentityConfig?.getTitle?.( entityRecord ) || '',\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tkind,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t\treturn recordsBeingSaved;\n\t},\n\t( state ) => [ state.entities.records ]\n);\n\n/**\n * Returns the specified entity record's edits.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {Object?} The entity record's edits.\n */\nexport function getEntityRecordEdits( state, kind, name, recordId ) {\n\treturn get( state.entities.records, [ kind, name, 'edits', recordId ] );\n}\n\n/**\n * Returns the specified entity record's non transient edits.\n *\n * Transient edits don't create an undo level, and\n * are not considered for change detection.\n * They are defined in the entity's config.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {Object?} The entity record's non transient edits.\n */\nexport const getEntityRecordNonTransientEdits = createSelector(\n\t( state, kind, name, recordId ) => {\n\t\tconst { transientEdits } = getEntityConfig( state, kind, name ) || {};\n\t\tconst edits = getEntityRecordEdits( state, kind, name, recordId ) || {};\n\t\tif ( ! transientEdits ) {\n\t\t\treturn edits;\n\t\t}\n\t\treturn Object.keys( edits ).reduce( ( acc, key ) => {\n\t\t\tif ( ! transientEdits[ key ] ) {\n\t\t\t\tacc[ key ] = edits[ key ];\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, {} );\n\t},\n\t( state, kind, name, recordId ) => [\n\t\tstate.entities.config,\n\t\tget( state.entities.records, [ kind, name, 'edits', recordId ] ),\n\t]\n);\n\n/**\n * Returns true if the specified entity record has edits,\n * and false otherwise.\n *\n * @param {Object}        state    State tree.\n * @param {string}        kind     Entity kind.\n * @param {string}        name     Entity name.\n * @param {number|string} recordId Record ID.\n *\n * @return {boolean} Whether the entity record has edits or not.\n */\nexport function hasEditsForEntityRecord( state, kind, name, recordId ) {\n\treturn (\n\t\tisSavingEntityRecord( state, kind, name, recordId ) ||\n\t\tObject.keys(\n\t\t\tgetEntityRecordNonTransientEdits( state, kind, name, recordId )\n\t\t).length > 0\n\t);\n}\n\n/**\n * Returns the specified entity record, merged with its edits.\n *\n * @param {Object}        state    State tree.\n * @param {string}        kind     Entity kind.\n * @param {string}        name     Entity name.\n * @param {number|string} recordId Record ID.\n *\n * @return {Object?} The entity record, merged with its edits.\n */\nexport const getEditedEntityRecord = createSelector(\n\t( state, kind, name, recordId ) => ( {\n\t\t...getRawEntityRecord( state, kind, name, recordId ),\n\t\t...getEntityRecordEdits( state, kind, name, recordId ),\n\t} ),\n\t( state, kind, name, recordId, query ) => {\n\t\tconst context = query?.context ?? 'default';\n\t\treturn [\n\t\t\tstate.entities.config,\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'items',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t\tget( state.entities.records, [\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\t'queriedData',\n\t\t\t\t'itemIsComplete',\n\t\t\t\tcontext,\n\t\t\t\trecordId,\n\t\t\t] ),\n\t\t\tget( state.entities.records, [ kind, name, 'edits', recordId ] ),\n\t\t];\n\t}\n);\n\n/**\n * Returns true if the specified entity record is autosaving, and false otherwise.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {boolean} Whether the entity record is autosaving or not.\n */\nexport function isAutosavingEntityRecord( state, kind, name, recordId ) {\n\tconst { pending, isAutosave } = get(\n\t\tstate.entities.records,\n\t\t[ kind, name, 'saving', recordId ],\n\t\t{}\n\t);\n\treturn Boolean( pending && isAutosave );\n}\n\n/**\n * Returns true if the specified entity record is saving, and false otherwise.\n *\n * @param {Object}        state    State tree.\n * @param {string}        kind     Entity kind.\n * @param {string}        name     Entity name.\n * @param {number|string} recordId Record ID.\n *\n * @return {boolean} Whether the entity record is saving or not.\n */\nexport function isSavingEntityRecord( state, kind, name, recordId ) {\n\treturn get(\n\t\tstate.entities.records,\n\t\t[ kind, name, 'saving', recordId, 'pending' ],\n\t\tfalse\n\t);\n}\n\n/**\n * Returns true if the specified entity record is deleting, and false otherwise.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {boolean} Whether the entity record is deleting or not.\n */\nexport function isDeletingEntityRecord( state, kind, name, recordId ) {\n\treturn get(\n\t\tstate.entities.records,\n\t\t[ kind, name, 'deleting', recordId, 'pending' ],\n\t\tfalse\n\t);\n}\n\n/**\n * Returns the specified entity record's last save error.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {Object?} The entity record's save error.\n */\nexport function getLastEntitySaveError( state, kind, name, recordId ) {\n\treturn get( state.entities.records, [\n\t\tkind,\n\t\tname,\n\t\t'saving',\n\t\trecordId,\n\t\t'error',\n\t] );\n}\n\n/**\n * Returns the specified entity record's last delete error.\n *\n * @param {Object} state    State tree.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {number} recordId Record ID.\n *\n * @return {Object?} The entity record's save error.\n */\nexport function getLastEntityDeleteError( state, kind, name, recordId ) {\n\treturn get( state.entities.records, [\n\t\tkind,\n\t\tname,\n\t\t'deleting',\n\t\trecordId,\n\t\t'error',\n\t] );\n}\n\n/**\n * Returns the current undo offset for the\n * entity records edits history. The offset\n * represents how many items from the end\n * of the history stack we are at. 0 is the\n * last edit, -1 is the second last, and so on.\n *\n * @param {Object} state State tree.\n *\n * @return {number} The current undo offset.\n */\nfunction getCurrentUndoOffset( state ) {\n\treturn state.undo.offset;\n}\n\n/**\n * Returns the previous edit from the current undo offset\n * for the entity records edits history, if any.\n *\n * @param {Object} state State tree.\n *\n * @return {Object?} The edit.\n */\nexport function getUndoEdit( state ) {\n\treturn state.undo[ state.undo.length - 2 + getCurrentUndoOffset( state ) ];\n}\n\n/**\n * Returns the next edit from the current undo offset\n * for the entity records edits history, if any.\n *\n * @param {Object} state State tree.\n *\n * @return {Object?} The edit.\n */\nexport function getRedoEdit( state ) {\n\treturn state.undo[ state.undo.length + getCurrentUndoOffset( state ) ];\n}\n\n/**\n * Returns true if there is a previous edit from the current undo offset\n * for the entity records edits history, and false otherwise.\n *\n * @param {Object} state State tree.\n *\n * @return {boolean} Whether there is a previous edit or not.\n */\nexport function hasUndo( state ) {\n\treturn Boolean( getUndoEdit( state ) );\n}\n\n/**\n * Returns true if there is a next edit from the current undo offset\n * for the entity records edits history, and false otherwise.\n *\n * @param {Object} state State tree.\n *\n * @return {boolean} Whether there is a next edit or not.\n */\nexport function hasRedo( state ) {\n\treturn Boolean( getRedoEdit( state ) );\n}\n\n/**\n * Return the current theme.\n *\n * @param {Object} state Data state.\n *\n * @return {Object} The current theme.\n */\nexport function getCurrentTheme( state ) {\n\treturn getEntityRecord( state, 'root', 'theme', state.currentTheme );\n}\n\n/**\n * Return the ID of the current global styles object.\n *\n * @param {Object} state Data state.\n *\n * @return {string} The current global styles ID.\n */\nexport function __experimentalGetCurrentGlobalStylesId( state ) {\n\treturn state.currentGlobalStylesId;\n}\n\n/**\n * Return theme supports data in the index.\n *\n * @param {Object} state Data state.\n *\n * @return {*} Index data.\n */\nexport function getThemeSupports( state ) {\n\treturn getCurrentTheme( state )?.theme_supports ?? EMPTY_OBJECT;\n}\n\n/**\n * Returns the embed preview for the given URL.\n *\n * @param {Object} state Data state.\n * @param {string} url   Embedded URL.\n *\n * @return {*} Undefined if the preview has not been fetched, otherwise, the preview fetched from the embed preview API.\n */\nexport function getEmbedPreview( state, url ) {\n\treturn state.embedPreviews[ url ];\n}\n\n/**\n * Determines if the returned preview is an oEmbed link fallback.\n *\n * WordPress can be configured to return a simple link to a URL if it is not embeddable.\n * We need to be able to determine if a URL is embeddable or not, based on what we\n * get back from the oEmbed preview API.\n *\n * @param {Object} state Data state.\n * @param {string} url   Embedded URL.\n *\n * @return {boolean} Is the preview for the URL an oEmbed link fallback.\n */\nexport function isPreviewEmbedFallback( state, url ) {\n\tconst preview = state.embedPreviews[ url ];\n\tconst oEmbedLinkCheck = '<a href=\"' + url + '\">' + url + '</a>';\n\tif ( ! preview ) {\n\t\treturn false;\n\t}\n\treturn preview.html === oEmbedLinkCheck;\n}\n\n/**\n * Returns whether the current user can perform the given action on the given\n * REST resource.\n *\n * Calling this may trigger an OPTIONS request to the REST API via the\n * `canUser()` resolver.\n *\n * https://developer.wordpress.org/rest-api/reference/\n *\n * @param {Object}  state    Data state.\n * @param {string}  action   Action to check. One of: 'create', 'read', 'update', 'delete'.\n * @param {string}  resource REST resource to check, e.g. 'media' or 'posts'.\n * @param {string=} id       Optional ID of the rest resource to check.\n *\n * @return {boolean|undefined} Whether or not the user can perform the action,\n *                             or `undefined` if the OPTIONS request is still being made.\n */\nexport function canUser( state, action, resource, id ) {\n\tconst key = compact( [ action, resource, id ] ).join( '/' );\n\treturn get( state, [ 'userPermissions', key ] );\n}\n\n/**\n * Returns whether the current user can edit the given entity.\n *\n * Calling this may trigger an OPTIONS request to the REST API via the\n * `canUser()` resolver.\n *\n * https://developer.wordpress.org/rest-api/reference/\n *\n * @param {Object} state    Data state.\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {string} recordId Record's id.\n * @return {boolean|undefined} Whether or not the user can edit,\n * or `undefined` if the OPTIONS request is still being made.\n */\nexport function canUserEditEntityRecord( state, kind, name, recordId ) {\n\tconst entityConfig = getEntityConfig( state, kind, name );\n\tif ( ! entityConfig ) {\n\t\treturn false;\n\t}\n\tconst resource = entityConfig.__unstable_rest_base;\n\n\treturn canUser( state, 'update', resource, recordId );\n}\n\n/**\n * Returns the latest autosaves for the post.\n *\n * May return multiple autosaves since the backend stores one autosave per\n * author for each post.\n *\n * @param {Object} state    State tree.\n * @param {string} postType The type of the parent post.\n * @param {number} postId   The id of the parent post.\n *\n * @return {?Array} An array of autosaves for the post, or undefined if there is none.\n */\nexport function getAutosaves( state, postType, postId ) {\n\treturn state.autosaves[ postId ];\n}\n\n/**\n * Returns the autosave for the post and author.\n *\n * @param {Object} state    State tree.\n * @param {string} postType The type of the parent post.\n * @param {number} postId   The id of the parent post.\n * @param {number} authorId The id of the author.\n *\n * @return {?Object} The autosave for the post and author.\n */\nexport function getAutosave( state, postType, postId, authorId ) {\n\tif ( authorId === undefined ) {\n\t\treturn;\n\t}\n\n\tconst autosaves = state.autosaves[ postId ];\n\treturn find( autosaves, { author: authorId } );\n}\n\n/**\n * Returns true if the REST request for autosaves has completed.\n *\n * @param {Object} state    State tree.\n * @param {string} postType The type of the parent post.\n * @param {number} postId   The id of the parent post.\n *\n * @return {boolean} True if the REST request was completed. False otherwise.\n */\nexport const hasFetchedAutosaves = createRegistrySelector(\n\t( select ) => ( state, postType, postId ) => {\n\t\treturn select( STORE_NAME ).hasFinishedResolution( 'getAutosaves', [\n\t\t\tpostType,\n\t\t\tpostId,\n\t\t] );\n\t}\n);\n\n/**\n * Returns a new reference when edited values have changed. This is useful in\n * inferring where an edit has been made between states by comparison of the\n * return values using strict equality.\n *\n * @example\n *\n * ```\n * const hasEditOccurred = (\n *    getReferenceByDistinctEdits( beforeState ) !==\n *    getReferenceByDistinctEdits( afterState )\n * );\n * ```\n *\n * @param {Object} state Editor state.\n *\n * @return {*} A value whose reference will change only when an edit occurs.\n */\nexport const getReferenceByDistinctEdits = createSelector(\n\t() => [],\n\t( state ) => [\n\t\tstate.undo.length,\n\t\tstate.undo.offset,\n\t\tstate.undo.flattenedUndo,\n\t]\n);\n\n/**\n * Retrieve the frontend template used for a given link.\n *\n * @param {Object} state Editor state.\n * @param {string} link  Link.\n *\n * @return {Object?} The template record.\n */\nexport function __experimentalGetTemplateForLink( state, link ) {\n\tconst records = getEntityRecords( state, 'postType', 'wp_template', {\n\t\t'find-template': link,\n\t} );\n\n\tconst template = records?.length ? records[ 0 ] : null;\n\tif ( template ) {\n\t\treturn getEditedEntityRecord(\n\t\t\tstate,\n\t\t\t'postType',\n\t\t\t'wp_template',\n\t\t\ttemplate.id\n\t\t);\n\t}\n\treturn template;\n}\n\n/**\n * Retrieve the current theme's base global styles\n *\n * @param {Object} state Editor state.\n *\n * @return {Object|null} The Global Styles object.\n */\nexport function __experimentalGetCurrentThemeBaseGlobalStyles( state ) {\n\tconst currentTheme = getCurrentTheme( state );\n\tif ( ! currentTheme ) {\n\t\treturn null;\n\t}\n\treturn state.themeBaseGlobalStyles[ currentTheme.stylesheet ];\n}\n\n/**\n * Return the ID of the current global styles object.\n *\n * @param {Object} state Data state.\n *\n * @return {string|null} The current global styles ID.\n */\nexport function __experimentalGetCurrentThemeGlobalStylesVariations( state ) {\n\tconst currentTheme = getCurrentTheme( state );\n\tif ( ! currentTheme ) {\n\t\treturn null;\n\t}\n\treturn state.themeGlobalStyleVariations[ currentTheme.stylesheet ];\n}\n\n/**\n * Retrieve the list of registered block patterns.\n *\n * @param {Object} state Data state.\n *\n * @return {Array} Block pattern list.\n */\nexport function getBlockPatterns( state ) {\n\treturn state.blockPatterns;\n}\n\n/**\n * Retrieve the list of registered block pattern categories.\n *\n * @param {Object} state Data state.\n *\n * @return {Array} Block pattern category list.\n */\nexport function getBlockPatternCategories( state ) {\n\treturn state.blockPatternCategories;\n}\n","/**\n * Checks whether the attribute is a \"raw\" attribute or not.\n *\n * @param {Object} entity    Entity record.\n * @param {string} attribute Attribute name.\n *\n * @return {boolean} Is the attribute raw\n */\nexport default function isRawAttribute( entity, attribute ) {\n\treturn ( entity.rawAttributes || [] ).includes( attribute );\n}\n","/**\n * Higher-order function which forward the resolution to another resolver with the same arguments.\n *\n * @param {string} resolverName forwarded resolver.\n *\n * @return {Function} Enhanced resolver.\n */\nconst forwardResolver = ( resolverName ) => ( ...args ) => async ( {\n\tresolveSelect,\n} ) => {\n\tawait resolveSelect[ resolverName ]( ...args );\n};\n\nexport default forwardResolver;\n","/**\n * External dependencies\n */\nimport { find, includes, get, compact, uniq, map, mapKeys } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME } from './name';\nimport { getOrLoadEntitiesConfig, DEFAULT_ENTITY_KEY } from './entities';\nimport { forwardResolver, getNormalizedCommaSeparable } from './utils';\n\n/**\n * Requests authors from the REST API.\n *\n * @param {Object|undefined} query Optional object of query parameters to\n *                                 include with request.\n */\nexport const getAuthors = ( query ) => async ( { dispatch } ) => {\n\tconst path = addQueryArgs(\n\t\t'/wp/v2/users/?who=authors&per_page=100',\n\t\tquery\n\t);\n\tconst users = await apiFetch( { path } );\n\tdispatch.receiveUserQuery( path, users );\n};\n\n/**\n * Requests the current user from the REST API.\n */\nexport const getCurrentUser = () => async ( { dispatch } ) => {\n\tconst currentUser = await apiFetch( { path: '/wp/v2/users/me' } );\n\tdispatch.receiveCurrentUser( currentUser );\n};\n\n/**\n * Requests an entity's record from the REST API.\n *\n * @param {string}           kind  Entity kind.\n * @param {string}           name  Entity name.\n * @param {number|string}    key   Record's key\n * @param {Object|undefined} query Optional object of query parameters to\n *                                 include with request.\n */\nexport const getEntityRecord = ( kind, name, key = '', query ) => async ( {\n\tselect,\n\tdispatch,\n} ) => {\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tif ( ! entityConfig || entityConfig?.__experimentalNoFetch ) {\n\t\treturn;\n\t}\n\n\tconst lock = await dispatch.__unstableAcquireStoreLock(\n\t\tSTORE_NAME,\n\t\t[ 'entities', 'records', kind, name, key ],\n\t\t{ exclusive: false }\n\t);\n\n\ttry {\n\t\tif ( query !== undefined && query._fields ) {\n\t\t\t// If requesting specific fields, items and query association to said\n\t\t\t// records are stored by ID reference. Thus, fields must always include\n\t\t\t// the ID.\n\t\t\tquery = {\n\t\t\t\t...query,\n\t\t\t\t_fields: uniq( [\n\t\t\t\t\t...( getNormalizedCommaSeparable( query._fields ) || [] ),\n\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY,\n\t\t\t\t] ).join(),\n\t\t\t};\n\t\t}\n\n\t\t// Disable reason: While true that an early return could leave `path`\n\t\t// unused, it's important that path is derived using the query prior to\n\t\t// additional query modifications in the condition below, since those\n\t\t// modifications are relevant to how the data is tracked in state, and not\n\t\t// for how the request is made to the REST API.\n\n\t\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\t\tconst path = addQueryArgs(\n\t\t\tentityConfig.baseURL + ( key ? '/' + key : '' ),\n\t\t\t{\n\t\t\t\t...entityConfig.baseURLParams,\n\t\t\t\t...query,\n\t\t\t}\n\t\t);\n\n\t\tif ( query !== undefined ) {\n\t\t\tquery = { ...query, include: [ key ] };\n\n\t\t\t// The resolution cache won't consider query as reusable based on the\n\t\t\t// fields, so it's tested here, prior to initiating the REST request,\n\t\t\t// and without causing `getEntityRecords` resolution to occur.\n\t\t\tconst hasRecords = select.hasEntityRecords( kind, name, query );\n\t\t\tif ( hasRecords ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst record = await apiFetch( { path } );\n\t\tdispatch.receiveEntityRecords( kind, name, record, query );\n\t} finally {\n\t\tdispatch.__unstableReleaseStoreLock( lock );\n\t}\n};\n\n/**\n * Requests an entity's record from the REST API.\n */\nexport const getRawEntityRecord = forwardResolver( 'getEntityRecord' );\n\n/**\n * Requests an entity's record from the REST API.\n */\nexport const getEditedEntityRecord = forwardResolver( 'getEntityRecord' );\n\n/**\n * Requests the entity's records from the REST API.\n *\n * @param {string}  kind  Entity kind.\n * @param {string}  name  Entity name.\n * @param {Object?} query Query Object.\n */\nexport const getEntityRecords = ( kind, name, query = {} ) => async ( {\n\tdispatch,\n} ) => {\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tif ( ! entityConfig || entityConfig?.__experimentalNoFetch ) {\n\t\treturn;\n\t}\n\n\tconst lock = await dispatch.__unstableAcquireStoreLock(\n\t\tSTORE_NAME,\n\t\t[ 'entities', 'records', kind, name ],\n\t\t{ exclusive: false }\n\t);\n\n\ttry {\n\t\tif ( query._fields ) {\n\t\t\t// If requesting specific fields, items and query association to said\n\t\t\t// records are stored by ID reference. Thus, fields must always include\n\t\t\t// the ID.\n\t\t\tquery = {\n\t\t\t\t...query,\n\t\t\t\t_fields: uniq( [\n\t\t\t\t\t...( getNormalizedCommaSeparable( query._fields ) || [] ),\n\t\t\t\t\tentityConfig.key || DEFAULT_ENTITY_KEY,\n\t\t\t\t] ).join(),\n\t\t\t};\n\t\t}\n\n\t\tconst path = addQueryArgs( entityConfig.baseURL, {\n\t\t\t...entityConfig.baseURLParams,\n\t\t\t...query,\n\t\t} );\n\n\t\tlet records = Object.values( await apiFetch( { path } ) );\n\t\t// If we request fields but the result doesn't contain the fields,\n\t\t// explicitely set these fields as \"undefined\"\n\t\t// that way we consider the query \"fullfilled\".\n\t\tif ( query._fields ) {\n\t\t\trecords = records.map( ( record ) => {\n\t\t\t\tquery._fields.split( ',' ).forEach( ( field ) => {\n\t\t\t\t\tif ( ! record.hasOwnProperty( field ) ) {\n\t\t\t\t\t\trecord[ field ] = undefined;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\treturn record;\n\t\t\t} );\n\t\t}\n\n\t\tdispatch.receiveEntityRecords( kind, name, records, query );\n\n\t\t// When requesting all fields, the list of results can be used to\n\t\t// resolve the `getEntityRecord` selector in addition to `getEntityRecords`.\n\t\t// See https://github.com/WordPress/gutenberg/pull/26575\n\t\tif ( ! query?._fields && ! query.context ) {\n\t\t\tconst key = entityConfig.key || DEFAULT_ENTITY_KEY;\n\t\t\tconst resolutionsArgs = records\n\t\t\t\t.filter( ( record ) => record[ key ] )\n\t\t\t\t.map( ( record ) => [ kind, name, record[ key ] ] );\n\n\t\t\tdispatch( {\n\t\t\t\ttype: 'START_RESOLUTIONS',\n\t\t\t\tselectorName: 'getEntityRecord',\n\t\t\t\targs: resolutionsArgs,\n\t\t\t} );\n\t\t\tdispatch( {\n\t\t\t\ttype: 'FINISH_RESOLUTIONS',\n\t\t\t\tselectorName: 'getEntityRecord',\n\t\t\t\targs: resolutionsArgs,\n\t\t\t} );\n\t\t}\n\t} finally {\n\t\tdispatch.__unstableReleaseStoreLock( lock );\n\t}\n};\n\ngetEntityRecords.shouldInvalidate = ( action, kind, name ) => {\n\treturn (\n\t\t( action.type === 'RECEIVE_ITEMS' || action.type === 'REMOVE_ITEMS' ) &&\n\t\taction.invalidateCache &&\n\t\tkind === action.kind &&\n\t\tname === action.name\n\t);\n};\n\n/**\n * Requests the current theme.\n */\nexport const getCurrentTheme = () => async ( { dispatch, resolveSelect } ) => {\n\tconst activeThemes = await resolveSelect.getEntityRecords(\n\t\t'root',\n\t\t'theme',\n\t\t{ status: 'active' }\n\t);\n\n\tdispatch.receiveCurrentTheme( activeThemes[ 0 ] );\n};\n\n/**\n * Requests theme supports data from the index.\n */\nexport const getThemeSupports = forwardResolver( 'getCurrentTheme' );\n\n/**\n * Requests a preview from the from the Embed API.\n *\n * @param {string} url URL to get the preview for.\n */\nexport const getEmbedPreview = ( url ) => async ( { dispatch } ) => {\n\ttry {\n\t\tconst embedProxyResponse = await apiFetch( {\n\t\t\tpath: addQueryArgs( '/oembed/1.0/proxy', { url } ),\n\t\t} );\n\t\tdispatch.receiveEmbedPreview( url, embedProxyResponse );\n\t} catch ( error ) {\n\t\t// Embed API 404s if the URL cannot be embedded, so we have to catch the error from the apiRequest here.\n\t\tdispatch.receiveEmbedPreview( url, false );\n\t}\n};\n\n/**\n * Checks whether the current user can perform the given action on the given\n * REST resource.\n *\n * @param {string}  action   Action to check. One of: 'create', 'read', 'update',\n *                           'delete'.\n * @param {string}  resource REST resource to check, e.g. 'media' or 'posts'.\n * @param {?string} id       ID of the rest resource to check.\n */\nexport const canUser = ( action, resource, id ) => async ( { dispatch } ) => {\n\tconst methods = {\n\t\tcreate: 'POST',\n\t\tread: 'GET',\n\t\tupdate: 'PUT',\n\t\tdelete: 'DELETE',\n\t};\n\n\tconst method = methods[ action ];\n\tif ( ! method ) {\n\t\tthrow new Error( `'${ action }' is not a valid action.` );\n\t}\n\n\tconst path = id ? `/wp/v2/${ resource }/${ id }` : `/wp/v2/${ resource }`;\n\n\tlet response;\n\ttry {\n\t\tresponse = await apiFetch( {\n\t\t\tpath,\n\t\t\tmethod: 'OPTIONS',\n\t\t\tparse: false,\n\t\t} );\n\t} catch ( error ) {\n\t\t// Do nothing if our OPTIONS request comes back with an API error (4xx or\n\t\t// 5xx). The previously determined isAllowed value will remain in the store.\n\t\treturn;\n\t}\n\n\t// Optional chaining operator is used here because the API requests don't\n\t// return the expected result in the native version. Instead, API requests\n\t// only return the result, without including response properties like the headers.\n\tconst allowHeader = response.headers?.get( 'allow' );\n\tconst key = compact( [ action, resource, id ] ).join( '/' );\n\tconst isAllowed = includes( allowHeader, method );\n\tdispatch.receiveUserPermission( key, isAllowed );\n};\n\n/**\n * Checks whether the current user can perform the given action on the given\n * REST resource.\n *\n * @param {string} kind     Entity kind.\n * @param {string} name     Entity name.\n * @param {string} recordId Record's id.\n */\nexport const canUserEditEntityRecord = ( kind, name, recordId ) => async ( {\n\tdispatch,\n} ) => {\n\tconst configs = await dispatch( getOrLoadEntitiesConfig( kind ) );\n\tconst entityConfig = find( configs, { kind, name } );\n\tif ( ! entityConfig ) {\n\t\treturn;\n\t}\n\n\tconst resource = entityConfig.__unstable_rest_base;\n\tawait dispatch( canUser( 'update', resource, recordId ) );\n};\n\n/**\n * Request autosave data from the REST API.\n *\n * @param {string} postType The type of the parent post.\n * @param {number} postId   The id of the parent post.\n */\nexport const getAutosaves = ( postType, postId ) => async ( {\n\tdispatch,\n\tresolveSelect,\n} ) => {\n\tconst { rest_base: restBase } = await resolveSelect.getPostType( postType );\n\tconst autosaves = await apiFetch( {\n\t\tpath: `/wp/v2/${ restBase }/${ postId }/autosaves?context=edit`,\n\t} );\n\n\tif ( autosaves && autosaves.length ) {\n\t\tdispatch.receiveAutosaves( postId, autosaves );\n\t}\n};\n\n/**\n * Request autosave data from the REST API.\n *\n * This resolver exists to ensure the underlying autosaves are fetched via\n * `getAutosaves` when a call to the `getAutosave` selector is made.\n *\n * @param {string} postType The type of the parent post.\n * @param {number} postId   The id of the parent post.\n */\nexport const getAutosave = ( postType, postId ) => async ( {\n\tresolveSelect,\n} ) => {\n\tawait resolveSelect.getAutosaves( postType, postId );\n};\n\n/**\n * Retrieve the frontend template used for a given link.\n *\n * @param {string} link Link.\n */\nexport const __experimentalGetTemplateForLink = ( link ) => async ( {\n\tdispatch,\n\tresolveSelect,\n} ) => {\n\t// Ideally this should be using an apiFetch call\n\t// We could potentially do so by adding a \"filter\" to the `wp_template` end point.\n\t// Also it seems the returned object is not a regular REST API post type.\n\tlet template;\n\ttry {\n\t\ttemplate = await window\n\t\t\t.fetch( addQueryArgs( link, { '_wp-find-template': true } ) )\n\t\t\t.then( ( res ) => res.json() )\n\t\t\t.then( ( { data } ) => data );\n\t} catch ( e ) {\n\t\t// For non-FSE themes, it is possible that this request returns an error.\n\t}\n\n\tif ( ! template ) {\n\t\treturn;\n\t}\n\n\tconst record = await resolveSelect.getEntityRecord(\n\t\t'postType',\n\t\t'wp_template',\n\t\ttemplate.id\n\t);\n\n\tif ( record ) {\n\t\tdispatch.receiveEntityRecords( 'postType', 'wp_template', [ record ], {\n\t\t\t'find-template': link,\n\t\t} );\n\t}\n};\n\n__experimentalGetTemplateForLink.shouldInvalidate = ( action ) => {\n\treturn (\n\t\t( action.type === 'RECEIVE_ITEMS' || action.type === 'REMOVE_ITEMS' ) &&\n\t\taction.invalidateCache &&\n\t\taction.kind === 'postType' &&\n\t\taction.name === 'wp_template'\n\t);\n};\n\nexport const __experimentalGetCurrentGlobalStylesId = () => async ( {\n\tdispatch,\n\tresolveSelect,\n} ) => {\n\tconst activeThemes = await resolveSelect.getEntityRecords(\n\t\t'root',\n\t\t'theme',\n\t\t{ status: 'active' }\n\t);\n\tconst globalStylesURL = get( activeThemes, [\n\t\t0,\n\t\t'_links',\n\t\t'wp:user-global-styles',\n\t\t0,\n\t\t'href',\n\t] );\n\tif ( globalStylesURL ) {\n\t\tconst globalStylesObject = await apiFetch( {\n\t\t\turl: globalStylesURL,\n\t\t} );\n\t\tdispatch.__experimentalReceiveCurrentGlobalStylesId(\n\t\t\tglobalStylesObject.id\n\t\t);\n\t}\n};\n\nexport const __experimentalGetCurrentThemeBaseGlobalStyles = () => async ( {\n\tresolveSelect,\n\tdispatch,\n} ) => {\n\tconst currentTheme = await resolveSelect.getCurrentTheme();\n\tconst themeGlobalStyles = await apiFetch( {\n\t\tpath: `/wp/v2/global-styles/themes/${ currentTheme.stylesheet }`,\n\t} );\n\tdispatch.__experimentalReceiveThemeBaseGlobalStyles(\n\t\tcurrentTheme.stylesheet,\n\t\tthemeGlobalStyles\n\t);\n};\n\nexport const __experimentalGetCurrentThemeGlobalStylesVariations = () => async ( {\n\tresolveSelect,\n\tdispatch,\n} ) => {\n\tconst currentTheme = await resolveSelect.getCurrentTheme();\n\tconst variations = await apiFetch( {\n\t\tpath: `/wp/v2/global-styles/themes/${ currentTheme.stylesheet }/variations`,\n\t} );\n\tdispatch.__experimentalReceiveThemeGlobalStyleVariations(\n\t\tcurrentTheme.stylesheet,\n\t\tvariations\n\t);\n};\n\nexport const getBlockPatterns = () => async ( { dispatch } ) => {\n\tconst restPatterns = await apiFetch( {\n\t\tpath: '/wp/v2/block-patterns/patterns',\n\t} );\n\tconst patterns = map( restPatterns, ( pattern ) =>\n\t\tmapKeys( pattern, ( value, key ) => {\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'block_types':\n\t\t\t\t\treturn 'blockTypes';\n\t\t\t\tcase 'viewport_width':\n\t\t\t\t\treturn 'viewportWidth';\n\t\t\t\tdefault:\n\t\t\t\t\treturn key;\n\t\t\t}\n\t\t} )\n\t);\n\tdispatch( { type: 'RECEIVE_BLOCK_PATTERNS', patterns } );\n};\n\nexport const getBlockPatternCategories = () => async ( { dispatch } ) => {\n\tconst categories = await apiFetch( {\n\t\tpath: '/wp/v2/block-patterns/categories',\n\t} );\n\tdispatch( { type: 'RECEIVE_BLOCK_PATTERN_CATEGORIES', categories } );\n};\n","export function deepCopyLocksTreePath( tree, path ) {\n\tconst newTree = { ...tree };\n\tlet currentNode = newTree;\n\tfor ( const branchName of path ) {\n\t\tcurrentNode.children = {\n\t\t\t...currentNode.children,\n\t\t\t[ branchName ]: {\n\t\t\t\tlocks: [],\n\t\t\t\tchildren: {},\n\t\t\t\t...currentNode.children[ branchName ],\n\t\t\t},\n\t\t};\n\t\tcurrentNode = currentNode.children[ branchName ];\n\t}\n\treturn newTree;\n}\n\nexport function getNode( tree, path ) {\n\tlet currentNode = tree;\n\tfor ( const branchName of path ) {\n\t\tconst nextNode = currentNode.children[ branchName ];\n\t\tif ( ! nextNode ) {\n\t\t\treturn null;\n\t\t}\n\t\tcurrentNode = nextNode;\n\t}\n\treturn currentNode;\n}\n\nexport function* iteratePath( tree, path ) {\n\tlet currentNode = tree;\n\tyield currentNode;\n\tfor ( const branchName of path ) {\n\t\tconst nextNode = currentNode.children[ branchName ];\n\t\tif ( ! nextNode ) {\n\t\t\tbreak;\n\t\t}\n\t\tyield nextNode;\n\t\tcurrentNode = nextNode;\n\t}\n}\n\nexport function* iterateDescendants( node ) {\n\tconst stack = Object.values( node.children );\n\twhile ( stack.length ) {\n\t\tconst childNode = stack.pop();\n\t\tyield childNode;\n\t\tstack.push( ...Object.values( childNode.children ) );\n\t}\n}\n\nexport function hasConflictingLock( { exclusive }, locks ) {\n\tif ( exclusive && locks.length ) {\n\t\treturn true;\n\t}\n\n\tif ( ! exclusive && locks.filter( ( lock ) => lock.exclusive ).length ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * Internal dependencies\n */\nimport { getNode, deepCopyLocksTreePath } from './utils';\n\nconst DEFAULT_STATE = {\n\trequests: [],\n\ttree: {\n\t\tlocks: [],\n\t\tchildren: {},\n\t},\n};\n\n/**\n * Reducer returning locks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport default function locks( state = DEFAULT_STATE, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ENQUEUE_LOCK_REQUEST': {\n\t\t\tconst { request } = action;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trequests: [ request, ...state.requests ],\n\t\t\t};\n\t\t}\n\t\tcase 'GRANT_LOCK_REQUEST': {\n\t\t\tconst { lock, request } = action;\n\t\t\tconst { store, path } = request;\n\t\t\tconst storePath = [ store, ...path ];\n\n\t\t\tconst newTree = deepCopyLocksTreePath( state.tree, storePath );\n\t\t\tconst node = getNode( newTree, storePath );\n\t\t\tnode.locks = [ ...node.locks, lock ];\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\trequests: state.requests.filter( ( r ) => r !== request ),\n\t\t\t\ttree: newTree,\n\t\t\t};\n\t\t}\n\t\tcase 'RELEASE_LOCK': {\n\t\t\tconst { lock } = action;\n\t\t\tconst storePath = [ lock.store, ...lock.path ];\n\n\t\t\tconst newTree = deepCopyLocksTreePath( state.tree, storePath );\n\t\t\tconst node = getNode( newTree, storePath );\n\t\t\tnode.locks = node.locks.filter( ( l ) => l !== lock );\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttree: newTree,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn state;\n}\n","/**\n * Internal dependencies\n */\nimport {\n\titerateDescendants,\n\titeratePath,\n\thasConflictingLock,\n\tgetNode,\n} from './utils';\n\nexport function getPendingLockRequests( state ) {\n\treturn state.requests;\n}\n\nexport function isLockAvailable( state, store, path, { exclusive } ) {\n\tconst storePath = [ store, ...path ];\n\tconst locks = state.tree;\n\n\t// Validate all parents and the node itself\n\tfor ( const node of iteratePath( locks, storePath ) ) {\n\t\tif ( hasConflictingLock( { exclusive }, node.locks ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// iteratePath terminates early if path is unreachable, let's\n\t// re-fetch the node and check it exists in the tree.\n\tconst node = getNode( locks, storePath );\n\tif ( ! node ) {\n\t\treturn true;\n\t}\n\n\t// Validate all nested nodes\n\tfor ( const descendant of iterateDescendants( node ) ) {\n\t\tif ( hasConflictingLock( { exclusive }, descendant.locks ) ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport { isLockAvailable, getPendingLockRequests } from './selectors';\n\nexport default function createLocks() {\n\tlet state = reducer( undefined, { type: '@@INIT' } );\n\n\tfunction processPendingLockRequests() {\n\t\tfor ( const request of getPendingLockRequests( state ) ) {\n\t\t\tconst { store, path, exclusive, notifyAcquired } = request;\n\t\t\tif ( isLockAvailable( state, store, path, { exclusive } ) ) {\n\t\t\t\tconst lock = { store, path, exclusive };\n\t\t\t\tstate = reducer( state, {\n\t\t\t\t\ttype: 'GRANT_LOCK_REQUEST',\n\t\t\t\t\tlock,\n\t\t\t\t\trequest,\n\t\t\t\t} );\n\t\t\t\tnotifyAcquired( lock );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction acquire( store, path, exclusive ) {\n\t\treturn new Promise( ( resolve ) => {\n\t\t\tstate = reducer( state, {\n\t\t\t\ttype: 'ENQUEUE_LOCK_REQUEST',\n\t\t\t\trequest: { store, path, exclusive, notifyAcquired: resolve },\n\t\t\t} );\n\t\t\tprocessPendingLockRequests();\n\t\t} );\n\t}\n\tfunction release( lock ) {\n\t\tstate = reducer( state, {\n\t\t\ttype: 'RELEASE_LOCK',\n\t\t\tlock,\n\t\t} );\n\t\tprocessPendingLockRequests();\n\t}\n\n\treturn { acquire, release };\n}\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","/**\n * WordPress dependencies\n */\nimport {\n\tcreateContext,\n\tuseContext,\n\tuseCallback,\n\tuseEffect,\n} from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { parse, __unstableSerializeAndClean } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { STORE_NAME } from './name';\n\n/** @typedef {import('@wordpress/blocks').WPBlock} WPBlock */\n\nconst EMPTY_ARRAY = [];\n\n/**\n * Internal dependencies\n */\nimport { rootEntitiesConfig, additionalEntityConfigLoaders } from './entities';\n\nconst entityContexts = {\n\t...rootEntitiesConfig.reduce( ( acc, loader ) => {\n\t\tif ( ! acc[ loader.kind ] ) {\n\t\t\tacc[ loader.kind ] = {};\n\t\t}\n\t\tacc[ loader.kind ][ loader.name ] = {\n\t\t\tcontext: createContext( undefined ),\n\t\t};\n\t\treturn acc;\n\t}, {} ),\n\t...additionalEntityConfigLoaders.reduce( ( acc, loader ) => {\n\t\tacc[ loader.kind ] = {};\n\t\treturn acc;\n\t}, {} ),\n};\nconst getEntityContext = ( kind, name ) => {\n\tif ( ! entityContexts[ kind ] ) {\n\t\tthrow new Error( `Missing entity config for kind: ${ kind }.` );\n\t}\n\n\tif ( ! entityContexts[ kind ][ name ] ) {\n\t\tentityContexts[ kind ][ name ] = {\n\t\t\tcontext: createContext( undefined ),\n\t\t};\n\t}\n\n\treturn entityContexts[ kind ][ name ].context;\n};\n\n/**\n * Context provider component for providing\n * an entity for a specific entity.\n *\n * @param {Object} props          The component's props.\n * @param {string} props.kind     The entity kind.\n * @param {string} props.type     The entity name.\n * @param {number} props.id       The entity ID.\n * @param {*}      props.children The children to wrap.\n *\n * @return {Object} The provided children, wrapped with\n *                   the entity's context provider.\n */\nexport default function EntityProvider( { kind, type: name, id, children } ) {\n\tconst Provider = getEntityContext( kind, name ).Provider;\n\treturn <Provider value={ id }>{ children }</Provider>;\n}\n\n/**\n * Hook that returns the ID for the nearest\n * provided entity of the specified type.\n *\n * @param {string} kind The entity kind.\n * @param {string} name The entity name.\n */\nexport function useEntityId( kind, name ) {\n\treturn useContext( getEntityContext( kind, name ) );\n}\n\n/**\n * Hook that returns the value and a setter for the\n * specified property of the nearest provided\n * entity of the specified type.\n *\n * @param {string} kind  The entity kind.\n * @param {string} name  The entity name.\n * @param {string} prop  The property name.\n * @param {string} [_id] An entity ID to use instead of the context-provided one.\n *\n * @return {[*, Function, *]} An array where the first item is the\n *                            property value, the second is the\n *                            setter and the third is the full value\n * \t\t\t\t\t\t\t  object from REST API containing more\n * \t\t\t\t\t\t\t  information like `raw`, `rendered` and\n * \t\t\t\t\t\t\t  `protected` props.\n */\nexport function useEntityProp( kind, name, prop, _id ) {\n\tconst providerId = useEntityId( kind, name );\n\tconst id = _id ?? providerId;\n\n\tconst { value, fullValue } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEntityRecord, getEditedEntityRecord } = select(\n\t\t\t\tSTORE_NAME\n\t\t\t);\n\t\t\tconst record = getEntityRecord( kind, name, id ); // Trigger resolver.\n\t\t\tconst editedRecord = getEditedEntityRecord( kind, name, id );\n\t\t\treturn record && editedRecord\n\t\t\t\t? {\n\t\t\t\t\t\tvalue: editedRecord[ prop ],\n\t\t\t\t\t\tfullValue: record[ prop ],\n\t\t\t\t  }\n\t\t\t\t: {};\n\t\t},\n\t\t[ kind, name, id, prop ]\n\t);\n\tconst { editEntityRecord } = useDispatch( STORE_NAME );\n\tconst setValue = useCallback(\n\t\t( newValue ) => {\n\t\t\teditEntityRecord( kind, name, id, {\n\t\t\t\t[ prop ]: newValue,\n\t\t\t} );\n\t\t},\n\t\t[ kind, name, id, prop ]\n\t);\n\n\treturn [ value, setValue, fullValue ];\n}\n\n/**\n * Hook that returns block content getters and setters for\n * the nearest provided entity of the specified type.\n *\n * The return value has the shape `[ blocks, onInput, onChange ]`.\n * `onInput` is for block changes that don't create undo levels\n * or dirty the post, non-persistent changes, and `onChange` is for\n * peristent changes. They map directly to the props of a\n * `BlockEditorProvider` and are intended to be used with it,\n * or similar components or hooks.\n *\n * @param {string} kind         The entity kind.\n * @param {string} name         The entity name.\n * @param {Object} options\n * @param {string} [options.id] An entity ID to use instead of the context-provided one.\n *\n * @return {[WPBlock[], Function, Function]} The block array and setters.\n */\nexport function useEntityBlockEditor( kind, name, { id: _id } = {} ) {\n\tconst providerId = useEntityId( kind, name );\n\tconst id = _id ?? providerId;\n\tconst { content, blocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getEditedEntityRecord } = select( STORE_NAME );\n\t\t\tconst editedRecord = getEditedEntityRecord( kind, name, id );\n\t\t\treturn {\n\t\t\t\tblocks: editedRecord.blocks,\n\t\t\t\tcontent: editedRecord.content,\n\t\t\t};\n\t\t},\n\t\t[ kind, name, id ]\n\t);\n\tconst { __unstableCreateUndoLevel, editEntityRecord } = useDispatch(\n\t\tSTORE_NAME\n\t);\n\n\tuseEffect( () => {\n\t\t// Load the blocks from the content if not already in state\n\t\t// Guard against other instances that might have\n\t\t// set content to a function already or the blocks are already in state.\n\t\tif ( content && typeof content !== 'function' && ! blocks ) {\n\t\t\tconst parsedContent = parse( content );\n\t\t\teditEntityRecord(\n\t\t\t\tkind,\n\t\t\t\tname,\n\t\t\t\tid,\n\t\t\t\t{\n\t\t\t\t\tblocks: parsedContent,\n\t\t\t\t},\n\t\t\t\t{ undoIgnore: true }\n\t\t\t);\n\t\t}\n\t}, [ content ] );\n\n\tconst onChange = useCallback(\n\t\t( newBlocks, options ) => {\n\t\t\tconst { selection } = options;\n\t\t\tconst edits = { blocks: newBlocks, selection };\n\n\t\t\tconst noChange = blocks === edits.blocks;\n\t\t\tif ( noChange ) {\n\t\t\t\treturn __unstableCreateUndoLevel( kind, name, id );\n\t\t\t}\n\n\t\t\t// We create a new function here on every persistent edit\n\t\t\t// to make sure the edit makes the post dirty and creates\n\t\t\t// a new undo level.\n\t\t\tedits.content = ( { blocks: blocksForSerialization = [] } ) =>\n\t\t\t\t__unstableSerializeAndClean( blocksForSerialization );\n\n\t\t\teditEntityRecord( kind, name, id, edits );\n\t\t},\n\t\t[ kind, name, id, blocks ]\n\t);\n\n\tconst onInput = useCallback(\n\t\t( newBlocks, options ) => {\n\t\t\tconst { selection } = options;\n\t\t\tconst edits = { blocks: newBlocks, selection };\n\t\t\teditEntityRecord( kind, name, id, edits );\n\t\t},\n\t\t[ kind, name, id ]\n\t);\n\n\treturn [ blocks ?? EMPTY_ARRAY, onInput, onChange ];\n}\n","/**\n * External dependencies\n */\nimport memoize from 'memize';\n\n// re-export due to restrictive esModuleInterop setting\nexport default memoize;\n","/* eslint-disable-next-line no-shadow */\nexport enum Status {\n\tIdle = 'IDLE',\n\tResolving = 'RESOLVING',\n\tError = 'ERROR',\n\tSuccess = 'SUCCESS',\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport memoize from './memoize';\nimport { Status } from './constants';\n\nexport const META_SELECTORS = [\n\t'getIsResolving',\n\t'hasStartedResolution',\n\t'hasFinishedResolution',\n\t'isResolving',\n\t'getCachedResolvers',\n];\n\ninterface QuerySelectResponse< Data > {\n\t/** the requested selector return value */\n\tdata: Data;\n\n\t/** is the record still being resolved? Via the `getIsResolving` meta-selector */\n\tisResolving: boolean;\n\n\t/** was the resolution started? Via the `hasStartedResolution` meta-selector */\n\thasStarted: boolean;\n\n\t/** has the resolution finished? Via the `hasFinishedResolution` meta-selector. */\n\thasResolved: boolean;\n}\n\n/**\n * Like useSelect, but the selectors return objects containing\n * both the original data AND the resolution info.\n *\n * @param {Function} mapQuerySelect see useSelect\n * @param {Array}    deps           see useSelect\n *\n * @example\n * ```js\n * import { useQuerySelect } from '@wordpress/data';\n * import { store as coreDataStore } from '@wordpress/core-data';\n *\n * function PageTitleDisplay( { id } ) {\n *   const { data: page, isResolving } = useQuerySelect( ( query ) => {\n *     return query( coreDataStore ).getEntityRecord( 'postType', 'page', id )\n *   }, [ id ] );\n *\n *   if ( isResolving ) {\n *     return 'Loading...';\n *   }\n *\n *   return page.title;\n * }\n *\n * // Rendered in the application:\n * // <PageTitleDisplay id={ 10 } />\n * ```\n *\n * In the above example, when `PageTitleDisplay` is rendered into an\n * application, the page and the resolution details will be retrieved from\n * the store state using the `mapSelect` callback on `useQuerySelect`.\n *\n * If the id prop changes then any page in the state for that id is\n * retrieved. If the id prop doesn't change and other props are passed in\n * that do change, the title will not change because the dependency is just\n * the id.\n * @see useSelect\n *\n * @return {QuerySelectResponse} Queried data.\n */\nexport default function __experimentalUseQuerySelect( mapQuerySelect, deps ) {\n\treturn useSelect( ( select, registry ) => {\n\t\tconst resolve = ( store ) => enrichSelectors( select( store ) );\n\t\treturn mapQuerySelect( resolve, registry );\n\t}, deps );\n}\n\ninterface EnrichedSelectors {\n\t< Selectors extends Record< string, ( ...args: any[] ) => any > >(\n\t\tselectors: Selectors\n\t): {\n\t\t[ Selector in keyof Selectors ]: (\n\t\t\t...args: Parameters< Selectors[ Selector ] >\n\t\t) => QuerySelectResponse< ReturnType< Selectors[ Selector ] > >;\n\t};\n}\n\n/**\n * Transform simple selectors into ones that return an object with the\n * original return value AND the resolution info.\n *\n * @param {Object} selectors Selectors to enrich\n * @return {EnrichedSelectors} Enriched selectors\n */\nconst enrichSelectors = memoize( ( ( selectors ) => {\n\tconst resolvers = {};\n\tfor ( const selectorName in selectors ) {\n\t\tif ( META_SELECTORS.includes( selectorName ) ) {\n\t\t\tcontinue;\n\t\t}\n\t\tObject.defineProperty( resolvers, selectorName, {\n\t\t\tget: () => ( ...args: unknown[] ) => {\n\t\t\t\tconst { getIsResolving, hasFinishedResolution } = selectors;\n\t\t\t\tconst isResolving = !! getIsResolving( selectorName, args );\n\t\t\t\tconst hasResolved =\n\t\t\t\t\t! isResolving &&\n\t\t\t\t\thasFinishedResolution( selectorName, args );\n\t\t\t\tconst data = selectors[ selectorName ]( ...args );\n\n\t\t\t\tlet status;\n\t\t\t\tif ( isResolving ) {\n\t\t\t\t\tstatus = Status.Resolving;\n\t\t\t\t} else if ( hasResolved ) {\n\t\t\t\t\tif ( data ) {\n\t\t\t\t\t\tstatus = Status.Success;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstatus = Status.Error;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstatus = Status.Idle;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tdata,\n\t\t\t\t\tstatus,\n\t\t\t\t\tisResolving,\n\t\t\t\t\thasResolved,\n\t\t\t\t};\n\t\t\t},\n\t\t} );\n\t}\n\treturn resolvers;\n} ) as EnrichedSelectors );\n","/**\n * Internal dependencies\n */\nimport useQuerySelect from './use-query-select';\nimport { store as coreStore } from '../';\nimport type { Status } from './constants';\n\ninterface EntityRecordResolution< RecordType > {\n\t/** The requested entity record */\n\trecord: RecordType | null;\n\n\t/**\n\t * Is the record still being resolved?\n\t */\n\tisResolving: boolean;\n\n\t/**\n\t * Is the record resolved by now?\n\t */\n\thasResolved: boolean;\n\n\t/** Resolution status */\n\tstatus: Status;\n}\n\ninterface Options {\n\tenabled: boolean;\n}\n\n/**\n * Resolves the specified entity record.\n *\n * @param  kind                   Kind of the requested entity.\n * @param  name                   Name of the requested  entity.\n * @param  recordId               Record ID of the requested entity.\n * @param  options                Hook options.\n * @param  [options.enabled=true] Whether to run the query or short-circuit and return null. Defaults to true.\n * @example\n * ```js\n * import { useEntityRecord } from '@wordpress/core-data';\n *\n * function PageTitleDisplay( { id } ) {\n *   const { record, isResolving } = useEntityRecord( 'postType', 'page', id );\n *\n *   if ( isResolving ) {\n *     return 'Loading...';\n *   }\n *\n *   return record.title;\n * }\n *\n * // Rendered in the application:\n * // <PageTitleDisplay id={ 1 } />\n * ```\n *\n * In the above example, when `PageTitleDisplay` is rendered into an\n * application, the page and the resolution details will be retrieved from\n * the store state using `getEntityRecord()`, or resolved if missing.\n *\n * @return {EntityRecordResolution<RecordType>} Entity record data.\n * @template RecordType\n */\nexport default function __experimentalUseEntityRecord< RecordType >(\n\tkind: string,\n\tname: string,\n\trecordId: string | number,\n\toptions: Options = { enabled: true }\n): EntityRecordResolution< RecordType > {\n\tconst { data: record, ...rest } = useQuerySelect(\n\t\t( query ) => {\n\t\t\tif ( ! options.enabled ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn query( coreStore ).getEntityRecord( kind, name, recordId );\n\t\t},\n\t\t[ kind, name, recordId, options.enabled ]\n\t);\n\n\treturn {\n\t\trecord,\n\t\t...rest,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport useQuerySelect from './use-query-select';\nimport { store as coreStore } from '../';\nimport type { Status } from './constants';\n\ninterface EntityRecordsResolution< RecordType > {\n\t/** The requested entity record */\n\trecords: RecordType[] | null;\n\n\t/**\n\t * Is the record still being resolved?\n\t */\n\tisResolving: boolean;\n\n\t/**\n\t * Is the record resolved by now?\n\t */\n\thasResolved: boolean;\n\n\t/** Resolution status */\n\tstatus: Status;\n}\n\ninterface Options {\n\t/**\n\t * Whether to run the query or short-circuit and return null.\n\t *\n\t * @default true\n\t */\n\tenabled: boolean;\n}\n\n/**\n * Resolves the specified entity records.\n *\n * @param  kind      Kind of the requested entities.\n * @param  name      Name of the requested entities.\n * @param  queryArgs HTTP query for the requested entities.\n * @param  options   Hook options.\n * @example\n * ```js\n * import { useEntityRecord } from '@wordpress/core-data';\n *\n * function PageTitlesList() {\n *   const { records, isResolving } = useEntityRecords( 'postType', 'page' );\n *\n *   if ( isResolving ) {\n *     return 'Loading...';\n *   }\n *\n *   return (\n *     <ul>\n *       {records.map(( page ) => (\n *         <li>{ page.title }</li>\n *       ))}\n *     </ul>\n *   );\n * }\n *\n * // Rendered in the application:\n * // <PageTitlesList />\n * ```\n *\n * In the above example, when `PageTitlesList` is rendered into an\n * application, the list of records and the resolution details will be retrieved from\n * the store state using `getEntityRecords()`, or resolved if missing.\n *\n * @return Entity records data.\n * @template RecordType\n */\nexport default function __experimentalUseEntityRecords< RecordType >(\n\tkind: string,\n\tname: string,\n\tqueryArgs: Record< string, unknown > = {},\n\toptions: Options = { enabled: true }\n): EntityRecordsResolution< RecordType > {\n\t// Serialize queryArgs to a string that can be safely used as a React dep.\n\t// We can't just pass queryArgs as one of the deps, because if it is passed\n\t// as an object literal, then it will be a different object on each call even\n\t// if the values remain the same.\n\tconst queryAsString = addQueryArgs( '', queryArgs );\n\n\tconst { data: records, ...rest } = useQuerySelect(\n\t\t( query ) => {\n\t\t\tif ( ! options.enabled ) {\n\t\t\t\treturn {\n\t\t\t\t\tdata: [],\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn query( coreStore ).getEntityRecords( kind, name, queryArgs );\n\t\t},\n\t\t[ kind, name, queryAsString, options.enabled ]\n\t);\n\n\treturn {\n\t\trecords,\n\t\t...rest,\n\t};\n}\n","var __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Filters the search by type\n *\n * @typedef { 'attachment' | 'post' | 'term' | 'post-format' } WPLinkSearchType\n */\n\n/**\n * A link with an id may be of kind post-type or taxonomy\n *\n * @typedef { 'post-type' | 'taxonomy' } WPKind\n */\n\n/**\n * @typedef WPLinkSearchOptions\n *\n * @property {boolean}          [isInitialSuggestions] Displays initial search suggestions, when true.\n * @property {WPLinkSearchType} [type]                 Filters by search type.\n * @property {string}           [subtype]              Slug of the post-type or taxonomy.\n * @property {number}           [page]                 Which page of results to return.\n * @property {number}           [perPage]              Search results per page.\n */\n\n/**\n * @typedef WPLinkSearchResult\n *\n * @property {number} id     Post or term id.\n * @property {string} url    Link url.\n * @property {string} title  Title of the link.\n * @property {string} type   The taxonomy or post type slug or type URL.\n * @property {WPKind} [kind] Link kind of post-type or taxonomy\n */\n\n/**\n * @typedef WPLinkSearchResultAugments\n *\n * @property {{kind: WPKind}} [meta]    Contains kind information.\n * @property {WPKind}         [subtype] Optional subtype if it exists.\n */\n\n/**\n * @typedef {WPLinkSearchResult & WPLinkSearchResultAugments} WPLinkSearchResultAugmented\n */\n\n/**\n * @typedef WPEditorSettings\n *\n * @property {boolean} [ disablePostFormats ] Disables post formats, when true.\n */\n\n/**\n * Fetches link suggestions from the API.\n *\n * @async\n * @param {string}              search\n * @param {WPLinkSearchOptions} [searchOptions]\n * @param {WPEditorSettings}    [settings]\n *\n * @example\n * ```js\n * import { __experimentalFetchLinkSuggestions as fetchLinkSuggestions } from '@wordpress/core-data';\n *\n * //...\n *\n * export function initialize( id, settings ) {\n *\n * settings.__experimentalFetchLinkSuggestions = (\n *     search,\n *     searchOptions\n * ) => fetchLinkSuggestions( search, searchOptions, settings );\n * ```\n * @return {Promise< WPLinkSearchResult[] >} List of search suggestions\n */\nconst fetchLinkSuggestions = async (\n\tsearch,\n\tsearchOptions = {},\n\tsettings = {}\n) => {\n\tconst {\n\t\tisInitialSuggestions = false,\n\t\ttype = undefined,\n\t\tsubtype = undefined,\n\t\tpage = undefined,\n\t\tperPage = isInitialSuggestions ? 3 : 20,\n\t} = searchOptions;\n\n\tconst { disablePostFormats = false } = settings;\n\n\t/** @type {Promise<WPLinkSearchResult>[]} */\n\tconst queries = [];\n\n\tif ( ! type || type === 'post' ) {\n\t\tqueries.push(\n\t\t\tapiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\t\tsearch,\n\t\t\t\t\tpage,\n\t\t\t\t\tper_page: perPage,\n\t\t\t\t\ttype: 'post',\n\t\t\t\t\tsubtype,\n\t\t\t\t} ),\n\t\t\t} )\n\t\t\t\t.then( ( results ) => {\n\t\t\t\t\treturn results.map( ( result ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tmeta: { kind: 'post-type', subtype },\n\t\t\t\t\t\t};\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => [] ) // Fail by returning no results.\n\t\t);\n\t}\n\n\tif ( ! type || type === 'term' ) {\n\t\tqueries.push(\n\t\t\tapiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\t\tsearch,\n\t\t\t\t\tpage,\n\t\t\t\t\tper_page: perPage,\n\t\t\t\t\ttype: 'term',\n\t\t\t\t\tsubtype,\n\t\t\t\t} ),\n\t\t\t} )\n\t\t\t\t.then( ( results ) => {\n\t\t\t\t\treturn results.map( ( result ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tmeta: { kind: 'taxonomy', subtype },\n\t\t\t\t\t\t};\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => [] ) // Fail by returning no results.\n\t\t);\n\t}\n\n\tif ( ! disablePostFormats && ( ! type || type === 'post-format' ) ) {\n\t\tqueries.push(\n\t\t\tapiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\t\tsearch,\n\t\t\t\t\tpage,\n\t\t\t\t\tper_page: perPage,\n\t\t\t\t\ttype: 'post-format',\n\t\t\t\t\tsubtype,\n\t\t\t\t} ),\n\t\t\t} )\n\t\t\t\t.then( ( results ) => {\n\t\t\t\t\treturn results.map( ( result ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tmeta: { kind: 'taxonomy', subtype },\n\t\t\t\t\t\t};\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => [] ) // Fail by returning no results.\n\t\t);\n\t}\n\n\tif ( ! type || type === 'attachment' ) {\n\t\tqueries.push(\n\t\t\tapiFetch( {\n\t\t\t\tpath: addQueryArgs( '/wp/v2/media', {\n\t\t\t\t\tsearch,\n\t\t\t\t\tpage,\n\t\t\t\t\tper_page: perPage,\n\t\t\t\t} ),\n\t\t\t} )\n\t\t\t\t.then( ( results ) => {\n\t\t\t\t\treturn results.map( ( result ) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\tmeta: { kind: 'media' },\n\t\t\t\t\t\t};\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => [] ) // Fail by returning no results.\n\t\t);\n\t}\n\n\treturn Promise.all( queries ).then( ( results ) => {\n\t\treturn results\n\t\t\t.reduce(\n\t\t\t\t( /** @type {WPLinkSearchResult[]} */ accumulator, current ) =>\n\t\t\t\t\taccumulator.concat( current ), // Flatten list.\n\t\t\t\t[]\n\t\t\t)\n\t\t\t.filter(\n\t\t\t\t/**\n\t\t\t\t * @param {{ id: number }} result\n\t\t\t\t */\n\t\t\t\t( result ) => {\n\t\t\t\t\treturn !! result.id;\n\t\t\t\t}\n\t\t\t)\n\t\t\t.slice( 0, perPage )\n\t\t\t.map( ( /** @type {WPLinkSearchResultAugmented} */ result ) => {\n\t\t\t\tconst isMedia = result.type === 'attachment';\n\n\t\t\t\treturn {\n\t\t\t\t\tid: result.id,\n\t\t\t\t\t// @ts-ignore fix when we make this a TS file\n\t\t\t\t\turl: isMedia ? result.source_url : result.url,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\tdecodeEntities(\n\t\t\t\t\t\t\tisMedia\n\t\t\t\t\t\t\t\t? // @ts-ignore fix when we make this a TS file\n\t\t\t\t\t\t\t\t  result.title.rendered\n\t\t\t\t\t\t\t\t: result.title || ''\n\t\t\t\t\t\t) || __( '(no title)' ),\n\t\t\t\t\ttype: result.subtype || result.type,\n\t\t\t\t\tkind: result?.meta?.kind,\n\t\t\t\t};\n\t\t\t} );\n\t} );\n};\n\nexport default fetchLinkSuggestions;\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\taddQueryArgs,\n\tprependHTTP,\n\tisURL,\n\tgetProtocol,\n\tisValidProtocol,\n} from '@wordpress/url';\n\n/**\n * A simple in-memory cache for requests.\n * This avoids repeat HTTP requests which may be beneficial\n * for those wishing to preserve low-bandwidth.\n */\nconst CACHE = new Map();\n\n/**\n * @typedef WPRemoteUrlData\n *\n * @property {string} title contents of the remote URL's `<title>` tag.\n */\n\n/**\n * Fetches data about a remote URL.\n * eg: <title> tag, favicon...etc.\n *\n * @async\n * @param {string}  url     the URL to request details from.\n * @param {Object?} options any options to pass to the underlying fetch.\n * @example\n * ```js\n * import { __experimentalFetchUrlData as fetchUrlData } from '@wordpress/core-data';\n *\n * //...\n *\n * export function initialize( id, settings ) {\n *\n * settings.__experimentalFetchUrlData = (\n * url\n * ) => fetchUrlData( url );\n * ```\n * @return {Promise< WPRemoteUrlData[] >} Remote URL data.\n */\nconst fetchUrlData = async ( url, options = {} ) => {\n\tconst endpoint = '/wp-block-editor/v1/url-details';\n\n\tconst args = {\n\t\turl: prependHTTP( url ),\n\t};\n\n\tif ( ! isURL( url ) ) {\n\t\treturn Promise.reject( `${ url } is not a valid URL.` );\n\t}\n\n\t// Test for \"http\" based URL as it is possible for valid\n\t// yet unusable URLs such as `tel:123456` to be passed.\n\tconst protocol = getProtocol( url );\n\n\tif (\n\t\t! protocol ||\n\t\t! isValidProtocol( protocol ) ||\n\t\t! protocol.startsWith( 'http' ) ||\n\t\t! /^https?:\\/\\/[^\\/\\s]/i.test( url )\n\t) {\n\t\treturn Promise.reject(\n\t\t\t`${ url } does not have a valid protocol. URLs must be \"http\" based`\n\t\t);\n\t}\n\n\tif ( CACHE.has( url ) ) {\n\t\treturn CACHE.get( url );\n\t}\n\n\treturn apiFetch( {\n\t\tpath: addQueryArgs( endpoint, args ),\n\t\t...options,\n\t} ).then( ( res ) => {\n\t\tCACHE.set( url, res );\n\t\treturn res;\n\t} );\n};\n\nexport default fetchUrlData;\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as actions from './actions';\nimport * as resolvers from './resolvers';\nimport createLocksActions from './locks/actions';\nimport { rootEntitiesConfig, getMethodName } from './entities';\nimport { STORE_NAME } from './name';\n\n// The entity selectors/resolvers and actions are shortcuts to their generic equivalents\n// (getEntityRecord, getEntityRecords, updateEntityRecord, updateEntityRecords)\n// Instead of getEntityRecord, the consumer could use more user-friendly named selector: getPostType, getTaxonomy...\n// The \"kind\" and the \"name\" of the entity are combined to generate these shortcuts.\n\nconst entitySelectors = rootEntitiesConfig.reduce( ( result, entity ) => {\n\tconst { kind, name } = entity;\n\tresult[ getMethodName( kind, name ) ] = ( state, key, query ) =>\n\t\tselectors.getEntityRecord( state, kind, name, key, query );\n\tresult[ getMethodName( kind, name, 'get', true ) ] = ( state, query ) =>\n\t\tselectors.getEntityRecords( state, kind, name, query );\n\treturn result;\n}, {} );\n\nconst entityResolvers = rootEntitiesConfig.reduce( ( result, entity ) => {\n\tconst { kind, name } = entity;\n\tresult[ getMethodName( kind, name ) ] = ( key, query ) =>\n\t\tresolvers.getEntityRecord( kind, name, key, query );\n\tconst pluralMethodName = getMethodName( kind, name, 'get', true );\n\tresult[ pluralMethodName ] = ( ...args ) =>\n\t\tresolvers.getEntityRecords( kind, name, ...args );\n\tresult[ pluralMethodName ].shouldInvalidate = ( action ) =>\n\t\tresolvers.getEntityRecords.shouldInvalidate( action, kind, name );\n\treturn result;\n}, {} );\n\nconst entityActions = rootEntitiesConfig.reduce( ( result, entity ) => {\n\tconst { kind, name } = entity;\n\tresult[ getMethodName( kind, name, 'save' ) ] = ( key ) =>\n\t\tactions.saveEntityRecord( kind, name, key );\n\tresult[ getMethodName( kind, name, 'delete' ) ] = ( key, query ) =>\n\t\tactions.deleteEntityRecord( kind, name, key, query );\n\treturn result;\n}, {} );\n\nconst storeConfig = () => ( {\n\treducer,\n\tactions: { ...actions, ...entityActions, ...createLocksActions() },\n\tselectors: { ...selectors, ...entitySelectors },\n\tresolvers: { ...resolvers, ...entityResolvers },\n} );\n\n/**\n * Store definition for the code data namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n *\n * @type {Object}\n */\nexport const store = createReduxStore( STORE_NAME, storeConfig() );\n\nregister( store );\n\nexport { default as EntityProvider } from './entity-provider';\nexport { default as __experimentalUseEntityRecord } from './hooks/use-entity-record';\nexport { default as __experimentalUseEntityRecords } from './hooks/use-entity-records';\nexport * from './entity-provider';\nexport * from './fetch';\nexport * from './entity-types';\n","/**\n * Internal dependencies\n */\nimport createLocks from './engine';\n\nexport default function createLocksActions() {\n\tconst locks = createLocks();\n\n\tfunction __unstableAcquireStoreLock( store, path, { exclusive } ) {\n\t\treturn () => locks.acquire( store, path, exclusive );\n\t}\n\n\tfunction __unstableReleaseStoreLock( lock ) {\n\t\treturn () => locks.release( lock );\n\t}\n\n\treturn { __unstableAcquireStoreLock, __unstableReleaseStoreLock };\n}\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","getValuePair","instance","_map","_arrayTreeMap","_objectTreeMap","has","get","properties","keys","sort","map","Array","isArray","property","undefined","propertyValue","valuePair","delete","set","EquivalentKeyMap","iterable","Constructor","TypeError","_classCallCheck","this","clear","iterablePairs","forEach","value","push","protoProps","previousValuePair","callback","_this","thisArg","arguments","call","Map","size","module","exports","fn","options","head","tail","memoized","args","node","len","searchCache","next","prev","val","apply","maxSize","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","prop","hasOwnProperty","r","toStringTag","window","isMatch","reducer","state","action","replacer","conservativeMapItem","item","nextItem","hasChanges","result","isEqual","actionProperty","nextKeyState","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rng","Error","uuid","byteToHex","toString","substr","buf","offset","rnds","random","arr","toLowerCase","receiveItems","items","edits","type","castArray","persistedEdits","removeItems","kind","name","records","invalidateCache","itemIds","receiveQueriedItems","query","maxItems","async","defaultProcessor","requests","preflightResponse","apiFetch","path","method","endpoints","results","batchRequests","chunk","batchResponse","data","validation","request","body","headers","batchResults","failed","responses","response","error","status","output","ObservableSet","Set","subscribers","add","subscriber","isSuccess","subscribe","STORE_NAME","receiveUserQuery","queryID","users","receiveCurrentUser","currentUser","addEntities","entities","receiveEntityRecords","record","title","receiveCurrentTheme","currentTheme","__experimentalReceiveCurrentGlobalStylesId","currentGlobalStylesId","id","__experimentalReceiveThemeBaseGlobalStyles","stylesheet","globalStyles","__experimentalReceiveThemeGlobalStyleVariations","variations","receiveThemeSupports","deprecated","since","receiveEmbedPreview","url","preview","deleteEntityRecord","recordId","__unstableFetch","throwOnError","dispatch","configs","getOrLoadEntitiesConfig","entityConfig","find","deletedRecord","__experimentalNoFetch","lock","__unstableAcquireStoreLock","exclusive","hasError","baseURL","addQueryArgs","_error","__unstableReleaseStoreLock","editEntityRecord","select","getEntityConfig","transientEdits","mergedEdits","getRawEntityRecord","editedRecord","getEditedEntityRecord","edit","reduce","acc","recordValue","editedRecordValue","meta","undo","undoIgnore","undoEdit","getUndoEdit","isUndo","redo","redoEdit","getRedoEdit","isRedo","__unstableCreateUndoLevel","saveEntityRecord","isAutosave","resolveSelect","entityIdKey","DEFAULT_ENTITY_KEY","entries","evaluatedValue","updatedRecord","persistedRecord","getCurrentUser","currentUserId","autosavePost","getAutosave","includes","newRecord","receiveAutosaves","__unstablePrePersist","__experimentalBatch","batch","processor","lastId","queue","pending","inputOrThunk","input","Promise","resolve","reject","isFunction","finally","unsubscribe","pair","zip","queueItem","createBatch","api","saveEditedEntityRecord","resultPromises","all","run","hasEditsForEntityRecord","getEntityRecordNonTransientEdits","__experimentalSaveSpecifiedEntityEdits","itemsToSave","editsToSave","some","receiveUploadPermissions","hasUploadPermissions","alternative","receiveUserPermission","isAllowed","postId","autosaves","POST_RAW_ATTRIBUTES","rootEntitiesConfig","label","__","baseURLParams","_fields","join","getTitle","context","rawAttributes","plural","blocks","description","rendered","additionalEntityConfigLoaders","loadEntities","postTypes","postType","isTemplate","rest_namespace","rest_base","selection","startCase","slug","String","prePersistPostType","__unstable_rest_base","taxonomies","taxonomy","newEdits","getMethodName","prefix","usePlural","kindPrefix","upperFirst","camelCase","nameSuffix","suffix","getEntitiesConfig","loader","split","cache","WeakMap","parts","stableKey","page","perPage","fields","include","Number","getNormalizedCommaSeparable","slice","isObjectLike","getContextFromAction","getQueryParts","getMergedItemIds","nextItemIds","nextItemIdsStartIndex","Math","max","mergedItemIds","isInNextItemsRange","receiveQueries","flowRight","ifMatchingAction","replaceAction","onSubKey","combineReducers","accumulator","itemId","mapValues","contextState","omit","itemIsComplete","queryParts","isCompleteQuery","queries","removedItems","contextQueries","queryItems","filter","queryId","entity","queriedData","queriedDataReducer","nextState","nextEdits","saving","deleting","entitiesConfig","UNDO_INITIAL_STATE","assign","lastEditAction","LEAF_KEY","hasWeakMap","terms","byId","keyBy","user","themeGlobalStyleVariations","themeBaseGlobalStyles","newConfig","config","entitiesDataReducer","entitiesByKind","groupBy","memo","subEntities","kindReducer","kindMemo","newData","isCreateUndoLevel","isUndoOrRedo","flattenedUndo","pop","comparisonUndoEdits","values","comparisonEdits","isShallowEqual","embedPreviews","userPermissions","autosavesData","blockPatterns","patterns","blockPatternCategories","categories","arrayOf","createCache","b","fromIndex","selector","getDependants","rootCache","getCache","callSelector","dependants","isUniqueByDependants","lastDependants","dependant","caches","queriedItemsCacheByState","getQueriedItemsUncached","startOffset","endOffset","min","filteredItem","f","field","getQueriedItems","createSelector","queriedItemsCache","queriedItems","EMPTY_OBJECT","isRequestingEmbedPreview","createRegistrySelector","isResolving","getAuthors","getUserQueryResults","queryResults","getEntitiesByKind","getEntity","getEntityRecord","queriedState","__experimentalGetEntityRecordNoResolver","_key","attribute","isRawAttribute","hasEntityRecords","getEntityRecords","__experimentalGetDirtyEntityRecords","dirtyRecords","primaryKeys","primaryKey","entityRecord","__experimentalGetEntitiesBeingSaved","recordsBeingSaved","isSavingEntityRecord","getEntityRecordEdits","isAutosavingEntityRecord","Boolean","isDeletingEntityRecord","getLastEntitySaveError","getLastEntityDeleteError","getCurrentUndoOffset","hasUndo","hasRedo","getCurrentTheme","__experimentalGetCurrentGlobalStylesId","getThemeSupports","theme_supports","getEmbedPreview","isPreviewEmbedFallback","oEmbedLinkCheck","html","canUser","resource","compact","canUserEditEntityRecord","getAutosaves","authorId","author","hasFetchedAutosaves","hasFinishedResolution","getReferenceByDistinctEdits","__experimentalGetTemplateForLink","link","template","__experimentalGetCurrentThemeBaseGlobalStyles","__experimentalGetCurrentThemeGlobalStylesVariations","getBlockPatterns","getBlockPatternCategories","resolverName","uniq","forwardResolver","resolutionsArgs","selectorName","shouldInvalidate","activeThemes","embedProxyResponse","create","read","update","parse","allowHeader","restBase","getPostType","fetch","then","res","json","e","globalStylesURL","globalStylesObject","themeGlobalStyles","restPatterns","pattern","mapKeys","deepCopyLocksTreePath","tree","newTree","currentNode","branchName","children","locks","getNode","nextNode","hasConflictingLock","DEFAULT_STATE","store","storePath","l","isLockAvailable","iteratePath","descendant","stack","childNode","iterateDescendants","createLocks","processPendingLockRequests","getPendingLockRequests","notifyAcquired","acquire","release","EMPTY_ARRAY","entityContexts","createContext","getEntityContext","EntityProvider","Provider","useEntityId","useContext","useEntityProp","_id","providerId","fullValue","useSelect","useDispatch","useCallback","newValue","useEntityBlockEditor","content","useEffect","parsedContent","onChange","newBlocks","blocksForSerialization","__unstableSerializeAndClean","onInput","Status","META_SELECTORS","__experimentalUseQuerySelect","mapQuerySelect","deps","registry","enrichSelectors","memoize","selectors","resolvers","getIsResolving","hasResolved","Resolving","Success","Idle","__experimentalUseEntityRecord","enabled","rest","useQuerySelect","coreStore","__experimentalUseEntityRecords","queryArgs","queryAsString","search","searchOptions","settings","isInitialSuggestions","subtype","disablePostFormats","per_page","catch","current","concat","isMedia","source_url","decodeEntities","CACHE","endpoint","prependHTTP","isURL","protocol","getProtocol","isValidProtocol","startsWith","test","entitySelectors","entityResolvers","pluralMethodName","entityActions","actions","createReduxStore","createLocksActions","register"],"sourceRoot":""}