{if $products_history_block eq 'true'}
{section name=i loop=$history_products}
  {if $smarty.section.i.first}
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="19" class="block_head_background"><img src="{$theme_image}/table_head_arrow.gif" alt=" " width="21" height="19"></td>
    <td width="100%" class="block_head_background">{$lang.table_heading_products_history}</td>
    <td width="5" class="block_head_background"><img src="{$theme_image}/table_head_right.gif" alt=" " width="5" height="19"></td>
  </tr>
</table>
<table border="0" width="100%" cellspacing="0" cellpadding="4" class="oos-BoxContents">
  <tr>
  {/if}
    <td align="center" width="33%" class="smallText"><a href="{product_info_link products_id=$history_products[i].products_id}">{small_product_image image=$history_products[i].products_image alt=$history_products[i].products_name|strip_tags}</a><br><a href="{product_info_link products_id=$history_products[i].products_id}">{$history_products[i].products_name}</a></td>
  {if $smarty.section.i.rownum is div by 3}
    </tr>
    <tr>
  {/if}
  {if $smarty.section.i.last}
</table>
  {/if}
{/section}
{/if}